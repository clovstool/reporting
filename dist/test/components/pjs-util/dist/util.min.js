var Util=function(a,b,c){var d={version:"2.2.1",build:"Thu Apr 24 2014 11:37:16"},e=function(){function b(b){this.prefix=b||"Logger",a.bindAll(this,"debug","info","log","warn","error")}function c(c,e,g){var i=b.getFilters();if(-1!==i.indexOf("all")||-1!==e.prefix.toLowerCase().indexOf(i)){var j="["+e.prefix+"]";g=a.toArray(g),f('logMessage:<span style="color:'+d[c]+'">'+j+" "+g+"</span>","*"),g.unshift(j),h[c].apply(h,g)}}var d={debug:"blue",info:"green",log:"#333",warn:"orange",error:"red"},e=function(){},f=window.postMessage||e,g=["debug","log","info","error","warn"],h=window.console||{};return a.each(g,function(a){h[a]||(h[a]=e)}),a.extend(b.prototype,{debug:function(){c("debug",this,arguments)},info:function(){c("info",this,arguments)},log:function(){c("log",this,arguments)},warn:function(){c("warn",this,arguments)},error:function(){c("error",this,arguments)}}),b.getFilters=function(){return b.fiters?b.filters.toString().toLowerCase():""},b}();d.Logger=e,d.extend=c.Model.extend,d.Events=c.Events;var f=function(a){this.options=a||{},this.logger=new e(this.options.loggerName||this.name||this.moduleId||"Logger"),this.initialize.apply(this,arguments)};f.prototype={initialize:function(){},destroy:function(){this.stopListening()}},a.extend(f.prototype,c.Events),f.extend=d.extend,d.Module=f;var g=function(a){return a.replace(/\{{1,}/g,"{{").replace(/\}{1,}/g,"}}").replace(/\{uri\./,"{uriParts.").replace(/\{{2,}/g,"{{data.")};d.template=function(b,c,d){return a.isString(b)?a.template(g(b),{data:c},{interpolate:/\{\{(.+?)\}\}/g}):(a(b).each(function(e,f){(!d||a.contains(d,f))&&a.isString(e)&&-1!==e.indexOf("{")&&(b[f]=a.template(g(e),{data:c},{interpolate:/\{\{(.+?)\}\}/g}))}),b)},d.buildTemplateData=function(b,c){var d=a.extend({},b.config,c),e=d.uri.split(":");return d.uriParts={namespace:e[3],id:e[4]},d.currentMetadata=b.currentMetadata?b.currentMetadata:null,d.metadata=b.currentMetadata?b.currentMetadata.rss:null,d.playlistMetadata=b.playlistMetadata,d.player=b,d.app={width:d.width,height:d.height},d},d.FullScreen=function(b){var d,e=b.cancelFullScreen||b.mozCancelFullScreen||b.webkitCancelFullScreen,f=a.extend({},c.Events,{toggle:function(a){return f.isFullScreen()?f.cancelFullScreen():f.requestFullScreen(a)},requestFullScreen:function(c){c=c||b.documentElement;var d=c.requestFullScreen||c.mozRequestFullScreen||c.webkitRequestFullScreen;return a.isFunction(d)?(d.call(c),!0):!1},cancelFullScreen:function(){return a.isFunction(e)?(e.call(b),!0):!1},isFullScreen:function(){return void 0!==b.fullScreenElement&&null!==b.fullScreenElement||void 0!==b.mozFullScreen&&b.mozFullScreen===!0||void 0!==b.webkitIsFullScreen&&b.webkitIsFullScreen===!0},Events:{FULL_SCREEN_CHANGE:"fullscreenChange"}});return b.fullScreenEnabled||b.fullscreenEnabled?d="fullscreenchange":b.mozFullscreenEnabled||b.mozFullScreenEnabled?d="mozfullscreenchange":(b.webkitFullscreenEnabled||b.webkitFullScreenEnabled)&&(d="webkitfullscreenchange"),d&&b.addEventListener(d,function(){f.trigger(f.Events.FULL_SCREEN_CHANGE,{type:f.Events.FULL_SCREEN_CHANGE,data:f.isFullScreen()})},!1),f}(document);var h=function(a){this.options=a||{},this.initialize.apply(this,arguments)};return h.Events={INDEX_CHANGE:"playlist:index",READY:"playlist:ready",ITEM_READY:"playlist:item:ready"},h.prototype=a.extend({initialize:function(){this.options.metadata&&(this.metadata=this.options.metadata,this.currentItem=this.getCurrentItem())},currentIndex:0,currentItem:null,getPrevious:function(){return this.metadata.items[this.hasPrevious()?this.currentIndex-1:this.currentIndex]},getNext:function(){var a=this.metadata.items;return this.hasNext()?a[this.currentIndex+1]:a[this.currentIndex]},previous:function(){return this.setIndex(this.currentIndex-1)},next:function(){return this.setIndex(this.currentIndex+1)},hasNext:function(){return this.currentIndex<this.metadata.items.length-1},hasPrevious:function(){return this.currentIndex>0},getCurrentItem:function(){return this.metadata.items[this.currentIndex]},setIndex:function(a){return a>this.metadata.items.length-1?!1:a!==this.currentIndex?(this.currentIndex=a,this.updateCurrent(),this.onIndexChange(),!0):!1},onIndexChange:function(){this.trigger(h.Events.INDEX_CHANGE,{type:h.Events.INDEX_CHANGE,data:this.currentIndex})},getItemAt:function(a){var b=this.metadata.items;if(0>a||a>b.length-1)throw new Error("Playlist index "+a+" is out of range [0-"+b.length+"]");return b[a]},updateCurrent:function(){this.currentItem=this.metadata.items[this.currentIndex]}},d.Events),h.extend=d.extend,d.Playlist=h,d}(_,$,Backbone,Handlebars);