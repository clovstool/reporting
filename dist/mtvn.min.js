!function(a,b){"object"==typeof MTVNPlayer&&MTVNPlayer.require(["_","mtvn-util"],function(){MTVNPlayer.provide("pjs-reporting",b.apply(null,arguments))})}(this,function(_,Util){function s_gi(a,b,c){var d,e,f,g,h,i='s.version=\'H.25.5\';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function(\'var e;try{console.log("\'+s.rep(s.rep(s.rep(m,"\\\\","\\\\\\\\"),"\\n","\\\\n"),"\\"","\\\\\\"")+\'");}catch(e){}\');tcf()};s.cls=function(x,c){var i,y=\'\';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}retur'+"n y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){return o};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;return 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',f=\"+~!*()'\",i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent(x);for(i=0;i<f.length;i++) {n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,\"%\"+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.substring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unescape(x)}return y');return tcf(x)}else return unescape(x)}return y};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring(0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf',f);return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visibilitychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){while(s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\");s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostname,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-60);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':'');return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i;l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s.wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0;return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)for(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackingServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+(un),im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLowerCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.version+(s.tcn?'T':'')+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im=s.wd[imn];if(!im)im=s.wd[imn]=new Image;im.s_l=0;im.onload=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.bcr();s.mrq(\"'+un+'\");s.nrs--;if(!s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;im.src=rs;if(s.useForcedLinkTracking||s.bcf){if(!s.forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].bcr()',s.forcedLinkTrackingTimeout);}else if((s.lnk||s.eo)&&(!ta||ta=='_self'||ta=='_top'||ta=='_parent'||(s.wd.name&&ta==s.wd.name))){b=e=new Date;while(!im.s_l&&e.getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='https://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(nfn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLightData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';else if(k=='pageURL'){q='g';if(v.length>255){s.pageURLRest=v.substring(255);v=v.substring(0,255);}}else if(k=='pageURLRest')q='-g';else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?');h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.indexOf('#')!=0&&h.indexOf('about:')!=0&&h.indexOf('javascript:')!=0&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=this;s.t();s.lnk=0;if(b)return this[b](e);return true');s.bcr=function(){var s=this;if(s.bct&&s.bce)s.bct.dispatchEvent(s.bce);if(s.bcf){if(typeof(s.bcf)=='function')s.bcf();else if(s.bct&&s.bct.href)s.d.location=s.bct.href}s.bct=s.bce=s.bcf=0};s.bc=new Function('e','if(e&&e.s_fe)return;var s=s_c_il['+s._in+'],f,tcf,t,n,nrs,a,h;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;if(!s.bbc)s.useForcedLinkTracking=0;else if(!s.useForcedLinkTracking){s.b.removeEventListener(\"click\",s.bc,true);s.bbc=s.useForcedLinkTracking=0;return}else s.b.removeEventListener(\"click\",s.bc,false);s.eo=e.srcElement?e.srcElement:e.target;nrs=s.nrs;s.t();s.eo=0;if(s.nrs>nrs&&s.useForcedLinkTracking&&e.target){a=e.target;while(a&&a!=s.b&&a.tagName.toUpperCase()!=\"A\"&&a.tagName.toUpperCase()!=\"AREA\")a=a.parentNode;if(a){h=a.href;if(h.indexOf(\"#\")==0||h.indexOf(\"about:\")==0||h.indexOf(\"javascript:\")==0)h=0;t=a.target;if(e.target.dispatchEvent&&h&&(!t||t==\"_self\"||t==\"_top\"||t==\"_parent\"||(s.wd.name&&t==s.wd.name))){e.stopPropagation();if (e.stopImmediatePropagation) {e.stopImmediatePropagation();}e.preventDefault();n=s.d.createEvent(\"MouseEvents\");n.initMouseEvent(\"click\",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);n.s_fe=1;s.bct=e.target;s.bce=n}}}');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener){if(s.n&&s.n.userAgent.indexOf('WebKit')>=0&&s.d.createEvent){s.bbc=1;s.useForcedLinkTracking=1;s.b.addEventListener('click',s.bc,true)}s.b.addEventListener('click',s.bc,false)}else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))return;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s.gfid=function(){var s=this,d='0123456789ABCDEF',k='s_fid',fid=s.c_r(k),h='',l='',i,j,m=8,n=4,e=new Date,y;if(!fid||fid.indexOf('-')<0){for(i=0;i<16;i++){j=Math.floor(Math.random()*m);h+=d.substring(j,j+1);j=Math.floor(Math.random()*n);l+=d.substring(j,j+1);m=n=16}fid=h+'-'+l;}y=e.getYear();e.setYear(y+2+(y<1900?1900:0));if(!s.c_w(k,fid,e))fid=0;return fid};s.applyADMS=function(){var s=this,vb=new Object;if(s.wd.ADMS&&!s.visitorID&&!s.admsc){if(!s.adms)s.adms=ADMS.getDefault();if(!s.admsq){s.visitorID=s.adms.getVisitorID(new Function('v','var s=s_c_il['+s._in+'],l=s.admsq,i;if(v==-1)v=0;if(v)s.visitorID=v;s.admsq=0;if(l){s.admsc=1;for(i=0;i<l.length;i++)s.t(l[i]);s.admsc=0;}'));if(!s.visitorID)s.admsq=new Array}if(s.admsq){s.vob(vb);vb['!visitorID']=0;s.admsq.push(vb);return 1}else{if(s.visitorID==-1)s.visitorID=0}}return 0};s.track=s.t=function(vo){var s=this,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;if(s.mpc('t',arguments))return;s.gl(s.vl_g);s.uns();s.m_ll();if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next){j='1.7';if(a.reduce){j='1.8';if(j.trim){j='1.8.1';if(Date.parse){j='1.8.2';if(Object.create)j='1.8.5'}}}}}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}s.fid=s.gfid();if(s.applyADMS())return '';if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);if(!s.abort){var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot(o);n=s.oid(o);x=o.s_oidt}}if(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>=0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');s.pev2=(l?s.ape(l):'')}else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(o.dataset&&o.dataset.sObjectId){s.wd.s_objectID=o.dataset.sObjectId;}else if(o.getAttribute&&o.getAttribute('data-s-object-id')){s.wd.s_objectID=o.getAttribute('data-s-object-id');}else if(s.useForcedLinkTracking){s.wd.s_objectID='';oc=o.onclick?''+o.onclick:'';if(oc){var ocb=oc.indexOf('s_objectID'),oce,ocq,ocx;if(ocb>=0){ocb+=10;while(ocb<oc.length&&(\"= \\t\\r\\n\").indexOf(oc.charAt(ocb))>=0)ocb++;if(ocb<oc.length){oce=ocb;ocq=ocx=0;while(oce<oc.length&&(oc.charAt(oce)!=';'||ocq)){if(ocq){if(oc.charAt(oce)==ocq&&!ocx)ocq=0;else if(oc.charAt(oce)==\"\\\\\")ocx=!ocx;else ocx=0;}else{ocq=oc.charAt(oce);if(ocq!='\"'&&ocq!=\"'\")ocq=0}oce++;}oc=oc.substring(ocb,oce);if(oc){o.s_soid=new Function('s','var e;try{s.wd.s_objectID='+oc+'}catch(e){}');o.s_soid(s)}}}}}if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs)}}}else s.dl(vo);if(vo)s.voa(vb,1);s.abort=0;s.pageURLRest=s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo,f){var s=this;s.lnk=o;s.linkType=t;s.linkName=n;if(f){s.bct=o;s.bcf=f}s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.setTagContainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.length;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t.lmq[i];y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x.u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!='function'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f].apply(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='timestamp,dynamicVariablePrefix,visitorID,fid,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteLightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,linkName,linkType';var n;for(n=1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resolution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,pageURLRest,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){return o};s.wd.s_gs=function(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",j=window,k=j.s_c_il,l=navigator,m=l.userAgent,n=l.appVersion,o=n.indexOf("MSIE "),p=m.indexOf("Netscape6/");if(a&&(a=a.toLowerCase(),k))for(f=0;2>f;f++)for(e=0;e<k.length;e++)if(h=k[e],g=h._c,(!g||"s_c"==g||f>0&&"s_l"==g)&&(h.oun==a||h.fs&&h.sa&&h.fs(h.oun,a))){if(h.sa&&h.sa(a),"s_c"==g)return h}else h=0;return j.s_an="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",j.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.substring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a"),j.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x"),j.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)"),j.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn(x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x"),j.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")"),j.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':a"),j.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){if(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")'+c.substring(e+1);s=c.indexOf('=function(')}return c;"),i=s_d(i),o>0?(d=parseInt(e=n.substring(o+5)),d>3&&(d=parseFloat(e))):d=parseFloat(p>0?m.substring(p+10):n),(5>d||n.indexOf("Opera")>=0||m.indexOf("Opera")>=0)&&(i=s_ft(i)),h||(h=new Object,j.s_c_in||(j.s_c_il=new Array,j.s_c_in=0),h._il=j.s_c_il,h._in=j.s_c_in,h._il[h._in]=h,j.s_c_in++),h._c="s_c",new Function("s","un","pg","ss",i)(h,a,b,c),h
}function s_giqf(){var a,b,c,d=window,e=d.s_giq;if(e)for(a=0;a<e.length;a++)b=e[a],c=s_gi(b.oun),c.sa(b.un),c.setTagContainer(b.tagContainerName);d.s_giq=0}function Bento(){this.initialize.apply(this,arguments)}var Reporting={version:"0.1.0",build:"Wed May 07 2014 10:55:05"};!function(a){a.BTG="object"==typeof a.BTG?a.BTG:{}}(window),function(a){a.AppMeasureVars={DEFAULT_ITEM_INDEX:0,VISITOR_NAMESPACE:"mtvn",TRAFFIC_VAR_LIMIT:75,MIN_DURATION:30,MAX_DURATION:120,NETWORK_PATH:"video/net/",SYNDICATED_PATH:"video/syn/",VIRAL_PATH:"video/syn/",VIDEOAD_TITLE:"VIDEO_AD|",VIDEOITEM_EVENT:"event15",ADITEM_EVENT:"event29",PLAYLIST_START:"event24",BUFFER_EVENT:"event25",PLAYLIST_DURATION:"event26",PLAYLIST_LENGTH:"event28",SINGLECLIP_EVENT:"event50",PLAYLIST_EVENT:"event49",FRANCHISE_TITLE:"prop35",EVENTS:"events",PRODUCTS:"products",SEMICOLONS:";;;;",PLAYLIST_ITEM:"PLAYLIST",SINGLECLIP_ITEM:"SINGLECLIP",MEDIA_NAME:"eVar33,prop50",MEDIA_TIMEPLAYED:"event78",MEDIA_COMPLETE:"event76",MEDIA_SEGMENTVIEW:"event77",MEDIA_SEGMENTEVAR:"eVar56",MEDIA_SEGMENTEVAR_DEMDEX:"evar57eventsproductspagenamehier",MEDIA_PLAYLIST_COMPLETE:"event89",DURATION_EVENT:"event46",AD_START_EVENT:"event71",AD_END_EVENT:"event72",AD_TIME_SPENT:"event73",AD_POD_ID:"eVar38,prop54",AD_CREATIVE_ID:"eVar37,prop53",AD_POD_ITEMS:"eVar39,prop55",AD_VIDEO_TITLE:"Ad Play",LIVE_BEACON_FREQ:180,LIVE_FREQ_MAX:180,LIVE_FREQ_MIN:60,LIVE_DURATION:864e4,LIVE_EVENT_START_PLAYHEAD:432e4,VMN_UUID_COOKIE:"vmn_uuid",USER_SEG_CATEGORY:"User Segment;",DEFAULT_TRACK_SECONDS:60,DEFAULT_VARS:{pageName:"pageName",eVar26:"franchise",eVar27:"mtvnOwner",eVar28:"mediaCategory",eVar29:"artistName",eVar30:"applicationOrigin",eVar31:"applicationName",eVar32:"applicationContext",eVar33:"videoTitle",eVar34:"playlistTitle",eVar56:"segmentName",eVar66:"playlistId",events:"events",products:"products",prop35:"mediaTitle",prop36:"franchise",prop38:"mtvnOwner",prop43:"playlistTitle",prop45:"mediaCategory",prop46:"artistName",prop47:"applicationOrigin",prop48:"applicationName",prop49:"applicationContext",prop50:"videoTitle",prop1:"agreement",prop3:"agreementId",prop30:"guid",eVar57:"vmnUUID",prop31:"userSegment",prop66:"playlistId"},DEFAULT_AD_VARS:{eVar37:"creativeId",prop53:"creativeId",eVar38:"podId",prop54:"podId",eVar39:"currentAdIndex",prop55:"currentAdIndex"}}}(BTG),function(a){a.AriaVars={BENTO_MODULES_URL:"//btg.mtvnservices.com/aria/bento.js"}}(BTG),function(a){a.BeaconVars={MAX_VALUE:1/0,DEFAULT_RANGE:1e3}}(BTG),function(a){a.ComscoreVars={BEACON_URL:"//beacon.securestudies.com/scripts/beacon.dll",BEACON_TYPEID:"1",VIDEOAD_TITLE:"VIDEO_AD",VIDEOAD_GENREID:"01",CONTENT_GENREID:"03",RND_KEY:"rn",PARAM_LIMIT:512,URL_LIMIT:2080}}(BTG),function(a){a.DataJanitorVars={DEFAULT_VALUES:{applicationContext:{value:"NOT_AVAILABLE",matchOn:"none"}},UNDEFINED_VALUES:{applicationContext:"NO_REF"}}}(BTG),function(a){a.FreewheelVars={FW_URL:"//140cc.v.fwmrm.net/ad/g/1?nw={0}&prof={0}:{1}&flag=+sltp+exvt+slcb+unka+unks;",FW_URL_INT:"//2ab7f.v.fwmrm.net/ad/g/1?nw={0}&prof={0}:{1}&flag=+sltp+exvt+slcb+unka+unks;",FW_URL_INT_TEST:"//293a7.v.fwmrm.net/ad/g/1?nw={0}&prof={0}:{1}&flag=+sltp+exvt+slcb+unka+unks;",FW_VIDEO_PLAYED_TIME:"mtvn_btg_videoPlayedTime",FW_LAST_PLAYTIME_CODE:"mtvn_btg_lastPlayTimeCode",FW_LAST_GUID_PLAYED:"mtvn_btg_lastGUIDPlayed",FW_LAST_PLAYLIST_URI_PLAYED:"mtvn_btg_lastPlaylistURIPlayed",FW_MINTIME_BTW_ADS:10,FW_QC_DEMO_VALUE:"vmn_btg_qcdemotargetting",FW_ARA_KEY:"_fw_ara",FW_FSS_KEY:"_fw_fss",FW_FSS_VALUE:"_fw_search",FW_DEMDEX_FW_SEGMENT:"mtvn_demdex_fw_segment",FW_VMN_UUID:"vmnUUID",FW_DEF_CLIP_TIME:180,FW_NETWORK_ID:82125,FW_NETWORK_ID_TEST:82124,FW_NETWORK_ID_INTL_TEST:168871,FW_NETWORK_ID_INTL:174975,FW_PROFILE_ID:"HTML5_5.12",FW_DEF_MIN_TIME_FOR_ADS:3e4,FW_DEF_SITE_SECTION:"MTVN_Viral_Syndication",FW_INTL_DEFAULT_ASSET_ID:41349526,FW_MOB_SID_SUFFIX:"_mob",FW_TAB_SID_SUFFIX:"_tab",FW_INIT_AD_INDEX:1,FW_PLAYLIST_KEY:"playlist"}}(BTG),function(a){a.MessageVars={VMN_UUID:"uuid",DEMDEX_SEGMENT:"demdexfwsegment",USER_SEGMENT:"usersegment",DEMDEX:"demdexcall",OMT_TRACKING_SERVER:"trackingserver",OMT_VISITOR_ID:"visitorid"}}(BTG),function(a){a.NielsenVars={BEACON_URL:"//secure-us.imrworldwide.com/cgi-bin/m",SCRIPT_URL:"//secure-us.imrworldwide.com/novms/js/2/ggcmb354.js",CLIENT_PROD:"sc",COOKIE_CHECK:1,LOAD:3,PLAY:5,PAUSE:6,STOP:7,SEEK:8,CONTENT_VIDEO:"content",PREROLL_VIDEO:"preroll",MIDROLL_VIDEO:"midroll",POSTROLL_VIDEO:"postroll",MILESTONES:"25%,50%,75%",VIDEOAD_TITLE:"VIDEO_AD",CLIP_TITLE:"CLIP"}}(BTG),function(a){a.StreamSenseVars={BASE_URL:"//b.scorecardresearch.com/p",TYPEID:"2",MAX_DURATION:600,CLIP_SHORT:"vc11",CLIP_LONG:"vc12",CLIP_LIVE:"vc13",AD_PREROLL:"va11",AD_MIDROLL:"va12",AD_POSTROLL:"va13",AD_LIVE:"va21",AD_OTHER:"va00"}}(BTG),function(a){a.Beacon={send:function(b){var c="?",d="&";if(b.url){var e,f=a.String,g="function"==typeof b.onload?b.onload:function(){},h=b.url,i="",j="";f.containsString(h,c)&&!f.endsWith(h,c)?j=d:f.endsWith(h,c)||(j=c),"object"==typeof b.params?e=a.Object.toString(b.params):"string"==typeof b.params&&(e=b.params),e&&(h+=j+e),"string"==typeof b.rndKey&&(i=d+b.rndKey+"="+Math.round(1e17*Math.random())),isNaN(b.maxLength)||(b.maxLength-=i.length,h=f.lengthLimiter(h,b.maxLength,d)),h+=i;try{var k=new Image(0,0);k.src=h,k.onload=k.onabort=k.onerror=function(a){g({src:h,data:e,event:a})}}catch(l){}}}}}(BTG),function(a){a.Environment=new function(){var a=window.navigator.userAgent.replace(/\;|\(|\)|\,/gi,""),b=/iphone/i.test(a)||/ipod/i.test(a),c=/ipad/i.test(a);return{isMobile:function(){return b},isTablet:function(){return c}}}}(BTG),function(a){a.JSInjector={loadScript:function(a){try{var b=document.head||document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("script");c.type="text/javascript",c.src=location.protocol+a,b.appendChild(c)}catch(d){}}}}(BTG),function(a){var b=function(a){if("object"==typeof a&&JSON&&a.data)try{var b=BTG.MessageVars,c=BTG.Events,d=JSON.parse(a.data);if(d.type)switch(d.type){case b.VMN_UUID:c.VMN_UUID.dispatch(d.value);break;case b.DEMDEX_SEGMENT:c.DEMDEX_SEGMENT.dispatch(d.value);break;case b.OMT_TRACKING_SERVER:c.OMT_TRACKING_SERVER.dispatch(d.value);break;case b.USER_SEGMENT:c.USER_SEGMENT.dispatch(d.value);break;case b.OMT_VISITOR_ID:c.OMT_VISITOR_ID.dispatch(d.value)}}catch(a){}};"undefined"!=typeof a.addEventListener?a.addEventListener("message",b,!1):"undefined"!=typeof a.attachEvent&&a.attachEvent("onmessage",b)}(window),function(a){a.MessageUtil=function(){var a="object"==typeof parent&&"function"==typeof parent.postMessage&&parent!==self;return{postMessage:function(b,c){if(a&&b){var d={type:b};"undefined"!=typeof c&&(d.value=c),d=JSON.stringify(d),parent.postMessage(d,"*")}}}}()}(BTG),function(a){a.Object={toString:function(a,b){if("object"==typeof a){b||(b="&");var c=[];for(var d in a)a.hasOwnProperty(d)&&a[d]&&c.push(d+"="+a[d]);return c.sort(),c.join(b)}},replaceWith:function(a,b,c){c="function"==typeof c?c:function(){return!0};for(var d in b)b.hasOwnProperty(d)&&a.hasOwnProperty(d)&&c(a[d])&&(a[d]=b[d]);return a},isArray:function(a){return"object"==typeof a&&"[object Array]"===Object.prototype.toString.call(a)}}}(BTG),function(a){a.String={toObject:function(a,b){for(var c=a.split(b?b:","),d=c.length,e={},f=0;d>f;f++){var g=c[f].split("=");g[0]&&g[1]&&(e[g[0]]=g[1])}return e},isDefined:function(a){return"string"!=typeof a||"undefined"==typeof a||null===a||""==a?!1:!0},replaceTokens:function(a,b){for(var c=a.match(/{\w+}/g),d=c?c.length:0,e=0;d>e;e++){var f=c[e],g=f.replace(/{|}/g,""),h="ord"===g?Math.floor(Math.random()*Math.pow(10,"999999".length))%999999:b[g];h&&(a=a.replace(f,h))}return a},stripToken:function(a){return a.replace(/^\{|\}$/g,"")},lengthLimiter:function(a,b,c){if(a&&!isNaN(b)&&a.length>b&&(a=a.substring(0,b),c)){var d=a.lastIndexOf(c);d>0&&(a=a.substr(0,d))}return a},endsWith:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},trimSlashes:function(a){return a=a.replace(/^\s*|\s*$/gi,"").replace(/^[\/\\]|[\/\\]$/gi,"")},containsString:function(a,b){return-1!==a.indexOf(b)},toString:function(a){var b=typeof a;return"object"===b||"function"===b?a.toString():"boolean"===b?a?"true":"false":a?a.valueOf():""}}}(BTG),function(a){a.Timer=function(a,b){var c=a,d=isNaN(b)?100:b,e=!1,f=null,g=0,h=[];return{start:function(){e||(e=!0,f=setInterval(c+".count()",d))},count:function(){g+=d,this.notify()},stop:function(){clearInterval(f),e=!1},reset:function(){e&&this.stop(),g=0},currentCount:function(){return g},running:function(){return e},addListener:function(a){g=0,"function"==typeof a&&h.push(a)},removeListener:function(a){if("function"==typeof a)for(var b=h.length,c=0;b>c;c++)h[c]===a&&(h[c]=null)},notify:function(){var a=h.length;if(a>0)for(var b=0;a>b;b++){var c=h[b];"function"==typeof c&&c(this)}}}}}(BTG),function(a){a.TimerUtil=function(){var b={};return{getTimer:function(c,d){return c='BTG.TimerUtil.getTimer("'+c+'")',b[c]||(b[c]=new a.Timer(c,d)),b[c]}}}()}(BTG),function(a){a.UserSegments={getFormattedUserSegment:function(a){for(var b=a.split(","),c=[],d=b.length,e=0;d>e;e++)""!=b[e]&&c.push("User Segment;"+b[e]);return c.join(",")}}}(BTG);var s_code="",s_objectID;return s_giqf(),s_code=s_gi(""),s_code.loadModule("Media"),s_code.Media.onLoad=function(){},s_code.m_Media_c="var m=s.m_i('Media');if(m.completeByCloseOffset==undefined)m.completeByCloseOffset=1;if(m.completeCloseOffsetThreshold==undefined)m.completeCloseOffsetThreshold=1;m.cn=function(n){var m=this;return m.s.rep(m.s.rep(m.s.rep(n,\"\\n\",''),\"\\r\",''),'--**--','')};m.open=function(n,l,p,b){var m=this,i=new Object,tm=new Date,a='',x;n=m.cn(n);if(!l)l=-1;if(n&&p){if(!m.l)m.l=new Object;if(m.l[n])m.close(n);if(b&&b.id)a=b.id;if(a)for (x in m.l)if(m.l[x]&&m.l[x].a==a)m.close(m.l[x].n);i.n=n;i.l=l;i.o=0;i.x=0;i.p=m.cn(m.playerName?m.playerName:p);i.a=a;i.t=0;i.ts=0;i.s=Math.floor(tm.getTime()/1000);i.lx=0;i.lt=i.s;i.lo=0;i.e='';i.to=-1;i.tc=0;i.fel=new Object;i.vt=0;i.sn=0;i.sx=\"\";i.sl=0;i.sg=0;i.sc=0;i.us=0;i.ad=0;i.adpn;i.adpp;i.adppp;i.clk;i.CPM;i.co=0;i.cot=0;i.lm=0;i.lom=0;m.l[n]=i}};m.openAd=function(n,l,p,pn,pp,ppp,CPM,b){var m=this,i=new Object;n=m.cn(n);m.open(n,l,p,b);i=m.l[n];if(i){i.ad=1;i.adpn=m.cn(pn);i.adpp=pp;i.adppp=ppp;i.CPM=CPM}};m._delete=function(n){var m=this,i;n=m.cn(n);i=m.l[n];m.l[n]=0;if(i&&i.m)clearTimeout(i.m.i)};m.close=function(n){this.e(n,0,-1)};m.play=function(n,o,sn,sx,sl){var m=this,i;i=m.e(n,1,o,sn,sx,sl);if(i&&!i.m){i.m=new Object;i.m.m=new Function('var m=s_c_il['+m._in+'],i;if(m.l){i=m.l[\"'+m.s.rep(i.n,'\"','\\\\\"')+'\"];if(i){if(i.lx==1)m.e(i.n,3,-1);i.m.i=setTimeout(i.m.m,1000)}}');i.m.m()}};m.click=function(n,o){this.e(n,7,o)};m.complete=function(n,o){this.e(n,5,o)};m.stop=function(n,o){this.e(n,2,o)};m.track=function(n){this.e(n,4,-1)};m.bcd=function(vo,i){var m=this,ns='a.media.',v=vo.linkTrackVars,e=vo.linkTrackEvents,pe='m_i',pev3,c=vo.contextData,x;if(i.ad){ns+='ad.';if(i.adpn){c['a.media.name']=i.adpn;c[ns+'pod']=i.adpp;c[ns+'podPosition']=i.adppp;}if(!i.vt)c[ns+'CPM']=i.CPM;}if (i.clk) {c[ns+'clicked']=true;i.clk=0}c['a.contentType']='video'+(i.ad?'Ad':'');c['a.media.channel']=m.channel;c[ns+'name']=i.n;c[ns+'playerName']=i.p;if(i.l>0)c[ns+'length']=i.l;if(Math.floor(i.ts)>0)c[ns+'timePlayed']=Math.floor(i.ts);if(!i.vt){c[ns+'view']=true;pe='m_s';i.vt=1}if(i.sx){c[ns+'segmentNum']=i.sn;c[ns+'segment']=i.sx;if(i.sl>0)c[ns+'segmentLength']=i.sl;if(i.sc&&i.ts>0)c[ns+'segmentView']=true}if(!i.cot&&i.co){c[ns+\"complete\"]=true;i.cot=1}if(i.lm>0)c[ns+'milestone']=i.lm;if(i.lom>0)c[ns+'offsetMilestone']=i.lom;if(v)for(x in c)v+=',contextData.'+x;pev3=c['a.contentType'];vo.pe=pe;vo.pev3=pev3;var d=m.contextDataMapping,y,a,l,n;if(d){vo.events2='';if(v)v+=',events';for(x in d){if(x.substring(0,ns.length)==ns)y=x.substring(ns.length);else y=\"\";a=d[x];if(typeof(a)=='string'){l=m.s.sp(a,',');for(n=0;n<l.length;n++){a=l[n];if(x==\"a.contentType\"){if(v)v+=','+a;vo[a]=c[x]}else if(y=='view'||y=='segmentView'||y=='clicked'||y=='complete'||y=='timePlayed'||y=='CPM'){if(e)e+=','+a;if(y=='timePlayed'||y=='CPM'){if(c[x])vo.events2+=(vo.events2?',':'')+a+'='+c[x];}else if(c[x])vo.events2+=(vo.events2?',':'')+a}else if(y=='segment'&&c[x+'Num']){if(v)v+=','+a;vo[a]=c[x+'Num']+':'+c[x]}else{if(v)v+=','+a;vo[a]=c[x]}}}else if(y=='milestones'||y=='offsetMilestones'){x=x.substring(0,x.length-1);if(c[x]&&d[x+'s'][c[x]]){if(e)e+=','+d[x+'s'][c[x]];vo.events2+=(vo.events2?',':'')+d[x+'s'][c[x]]}}if(c[x])c[x]=undefined;if(y=='segment'&&c[x+'Num'])c[x+\"Num\"]=undefined}}vo.linkTrackVars=v;vo.linkTrackEvents=e};m.bpe=function(vo,i,x,o){var m=this,pe='m_o',pev3,d='--**--';pe='m_o';if(!i.vt){pe='m_s';i.vt=1}else if(x==4)pe='m_i';pev3=m.s.ape(i.n)+d+Math.floor(i.l>0?i.l:1)+d+m.s.ape(i.p)+d+Math.floor(i.t)+d+i.s+d+(i.to>=0?'L'+Math.floor(i.to):'')+i.e+(x!=0&&x!=2?'L'+Math.floor(o):'');vo.pe=pe;vo.pev3=pev3};m.e=function(n,x,o,sn,sx,sl,pd){var m=this,i,tm=new Date,ts=Math.floor(tm.getTime()/1000),c,l,v=m.trackVars,e=m.trackEvents,ti=m.trackSeconds,tp=m.trackMilestones,to=m.trackOffsetMilestones,sm=m.segmentByMilestones,so=m.segmentByOffsetMilestones,z=new Array,j,t=1,w=new Object,x,ek,tc,vo=new Object;if(!m.channel)m.channel=m.s.wd.location.hostname;n=m.cn(n);i=n&&m.l&&m.l[n]?m.l[n]:0;if(i){if(i.ad){ti=m.adTrackSeconds;tp=m.adTrackMilestones;to=m.adTrackOffsetMilestones;sm=m.adSegmentByMilestones;so=m.adSegmentByOffsetMilestones}if(o<0){if(i.lx==1&&i.lt>0)o=(ts-i.lt)+i.lo;else o=i.lo}if(i.l>0)o=o<i.l?o:i.l;if(o<0)o=0;i.o=o;if(i.l>0){i.x=(i.o/i.l)*100;i.x=i.x>100?100:i.x}if(i.lo<0)i.lo=o;tc=i.tc;w.name=n;w.ad=i.ad;w.length=i.l;w.openTime=new Date;w.openTime.setTime(i.s*1000);w.offset=i.o;w.percent=i.x;w.playerName=i.p;if(i.to<0)w.mediaEvent=w.event='OPEN';else w.mediaEvent=w.event=(x==1?'PLAY':(x==2?'STOP':(x==3?'MONITOR':(x==4?'TRACK':(x==5?'COMPLETE':(x==7?'CLICK':('CLOSE')))))));if(!pd){if(i.pd)pd=i.pd}else i.pd=pd;w.player=pd;if(x>2||(x!=i.lx&&(x!=2||i.lx==1))) {if(!sx){sn=i.sn;sx=i.sx;sl=i.sl}if(x){if(x==1)i.lo=o;if((x<=3||x>=5)&&i.to>=0){t=0;v=e=\"None\";if(i.to!=o){l=i.to;if(l>o){l=i.lo;if(l>o)l=o}z=tp?m.s.sp(tp,','):0;if(i.l>0&&z&&o>=l)for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c&&(l/i.l)*100<c&&i.x>=c){t=1;j=z.length;w.mediaEvent=w.event='MILESTONE';i.lm=w.milestone=c}}z=to?m.s.sp(to,','):0;if(z&&o>=l)for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c&&l<c&&o>=c){t=1;j=z.length;w.mediaEvent=w.event='OFFSET_MILESTONE';i.lom=w.offsetMilestone=c}}}}if(i.sg||!sx){if(sm&&tp&&i.l>0){z=m.s.sp(tp,',');if(z){z[z.length]='100';l=0;for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c){if(i.x<c){sn=j+1;sx='M:'+l+'-'+c;j=z.length}l=c}}}}else if(so&&to){z=m.s.sp(to,',');if(z){z[z.length]=''+(i.l>0?i.l:'E');l=0;for(j=0;j<z.length;j++){c=z[j]?parseFloat(''+z[j]):0;if(c||z[j]=='E'){if(o<c||z[j]=='E'){sn=j+1;sx='O:'+l+'-'+c;j=z.length}l=c}}}}if(sx)i.sg=1}if((sx||i.sx)&&sx!=i.sx){i.us=1;if(!i.sx){i.sn=sn;i.sx=sx}if(i.to>=0)t=1}if((x>=2||i.x>=100)&&i.lo<o){i.t+=o-i.lo;i.ts+=o-i.lo}if(x<=2||(x==3&&!i.lx)){i.e+=(x==1||x==3?'S':'E')+Math.floor(o);i.lx=(x==3?1:x)}if(!t&&i.to>=0&&x<=3){ti=ti?ti:0;if(ti&&i.ts>=ti){t=1;w.mediaEvent=w.event='SECONDS'}}i.lt=ts;i.lo=o}if(!x||(x<=3&&i.x>=100)){if(i.lx!=2)i.e+='E'+Math.floor(o);x=0;v=e=\"None\";w.mediaEvent=w.event=\"CLOSE\"}if(x==7){w.clicked=i.clk=1;t=1}if(x==5||(m.completeByCloseOffset&&(!x||i.x>=100)&&i.l>0&&o>=i.l-m.completeCloseOffsetThreshold)){w.complete=i.co=1;t=1}ek=w.mediaEvent;if(ek=='MILESTONE')ek+='_'+w.milestone;else if(ek=='OFFSET_MILESTONE')ek+='_'+w.offsetMilestone;if(!i.fel[ek]) {w.eventFirstTime=true;i.fel[ek]=1}else w.eventFirstTime=false;w.timePlayed=i.t;w.segmentNum=i.sn;w.segment=i.sx;w.segmentLength=i.sl;if(m.monitor&&x!=4)m.monitor(m.s,w);if(x==0)m._delete(n);if(t&&i.tc==tc){vo=new Object;vo.contextData=new Object;vo.linkTrackVars=v;vo.linkTrackEvents=e;if(!vo.linkTrackVars)vo.linkTrackVars='';if(!vo.linkTrackEvents)vo.linkTrackEvents='';if(m.trackUsingContextData)m.bcd(vo,i);else m.bpe(vo,i,x,o);m.s.t(vo);if(i.us){i.sn=sn;i.sx=sx;i.sc=1;i.us=0}else if(i.ts>0)i.sc=0;i.e=\"\";i.lm=i.lom=0;i.ts-=Math.floor(i.ts);i.to=o;i.tc++}}}return i};m.ae=function(n,l,p,x,o,sn,sx,sl,pd,b){var m=this,r=0;if(n&&(!m.autoTrackMediaLengthRequired||(length&&length>0)) &&p){if(!m.l||!m.l[n]){if(x==1||x==3){m.open(n,l,p,b);r=1}}else r=1;if(r)m.e(n,x,o,sn,sx,sl,pd)}};m.a=function(o,t){var m=this,i=o.id?o.id:o.name,n=o.name,p=0,v,c,c1,c2,xc=m.s.h,x,e,f1,f2='s_media_'+m._in+'_oc',f3='s_media_'+m._in+'_t',f4='s_media_'+m._in+'_s',f5='s_media_'+m._in+'_l',f6='s_media_'+m._in+'_m',f7='s_media_'+m._in+'_c',tcf,w;if(!i){if(!m.c)m.c=0;i='s_media_'+m._in+'_'+m.c;m.c++}if(!o.id)o.id=i;if(!o.name)o.name=n=i;if(!m.ol)m.ol=new Object;if(m.ol[i])return;m.ol[i]=o;if(!xc)xc=m.s.b;tcf=new Function('o','var e,p=0;try{if(o.versionInfo&&o.currentMedia&&o.controls)p=1}catch(e){p=0}return p');p=tcf(o);if(!p){tcf=new Function('o','var e,p=0,t;try{t=o.GetQuickTimeVersion();if(t)p=2}catch(e){p=0}return p');p=tcf(o);if(!p){tcf=new Function('o','var e,p=0,t;try{t=o.GetVersionInfo();if(t)p=3}catch(e){p=0}return p');p=tcf(o)}}v=\"var m=s_c_il[\"+m._in+\"],o=m.ol['\"+i+\"']\";if(p==1){p='Windows Media Player '+o.versionInfo;c1=v+',n,p,l,x=-1,cm,c,mn;if(o){cm=o.currentMedia;c=o.controls;if(cm&&c){mn=cm.name?cm.name:c.URL;l=cm.duration;p=c.currentPosition;n=o.playState;if(n){if(n==8)x=0;if(n==3)x=1;if(n==1||n==2||n==4||n==5||n==6)x=2;}';c2='if(x>=0)m.ae(mn,l,\"'+p+'\",x,x!=2?p:-1,0,\"\",0,0,o)}}';c=c1+c2;if(m.s.isie&&xc){x=m.s.d.createElement('script');x.language='jscript';x.type='text/javascript';x.htmlFor=i;x.event='PlayStateChange(NewState)';x.defer=true;x.text=c;xc.appendChild(x);o[f6]=new Function(c1+'if(n==3){x=3;'+c2+'}setTimeout(o.'+f6+',5000)');o[f6]()}}if(p==2){p='QuickTime Player '+(o.GetIsQuickTimeRegistered()?'Pro ':'')+o.GetQuickTimeVersion();f1=f2;c=v+',n,x,t,l,p,p2,mn;if(o){mn=o.GetMovieName()?o.GetMovieName():o.GetURL();n=o.GetRate();t=o.GetTimeScale();l=o.GetDuration()/t;p=o.GetTime()/t;p2=o.'+f5+';if(n!=o.'+f4+'||p<p2||p-p2>5){x=2;if(n!=0)x=1;else if(p>=l)x=0;if(p<p2||p-p2>5)m.ae(mn,l,\"'+p+'\",2,p2,0,\"\",0,0,o);m.ae(mn,l,\"'+p+'\",x,x!=2?p:-1,0,\"\",0,0,o)}if(n>0&&o.'+f7+'>=10){m.ae(mn,l,\"'+p+'\",3,p,0,\"\",0,0,o);o.'+f7+'=0}o.'+f7+'++;o.'+f4+'=n;o.'+f5+'=p;setTimeout(\"'+v+';o.'+f2+'(0,0)\",500)}';o[f1]=new Function('a','b',c);o[f4]=-1;o[f7]=0;o[f1](0,0)}if(p==3){p='RealPlayer '+o.GetVersionInfo();f1=n+'_OnPlayStateChange';c1=v+',n,x=-1,l,p,mn;if(o){mn=o.GetTitle()?o.GetTitle():o.GetSource();n=o.GetPlayState();l=o.GetLength()/1000;p=o.GetPosition()/1000;if(n!=o.'+f4+'){if(n==3)x=1;if(n==0||n==2||n==4||n==5)x=2;if(n==0&&(p>=l||p==0))x=0;if(x>=0)m.ae(mn,l,\"'+p+'\",x,x!=2?p:-1,0,\"\",0,0,o)}if(n==3&&(o.'+f7+'>=10||!o.'+f3+')){m.ae(mn,l,\"'+p+'\",3,p,0,\"\",0,0,o);o.'+f7+'=0}o.'+f7+'++;o.'+f4+'=n;';c2='if(o.'+f2+')o.'+f2+'(o,n)}';if(m.s.wd[f1])o[f2]=m.s.wd[f1];m.s.wd[f1]=new Function('a','b',c1+c2);o[f1]=new Function('a','b',c1+'setTimeout(\"'+v+';o.'+f1+'(0,0)\",o.'+f3+'?500:5000);'+c2);o[f4]=-1;if(m.s.isie)o[f3]=1;o[f7]=0;o[f1](0,0)}};m.as=new Function('e','var m=s_c_il['+m._in+'],l,n;if(m.autoTrack&&m.s.d.getElementsByTagName){l=m.s.d.getElementsByTagName(m.s.isie?\"OBJECT\":\"EMBED\");if(l)for(n=0;n<l.length;n++)m.a(l[n]);}');if(s.wd.attachEvent)s.wd.attachEvent('onload',m.as);else if(s.wd.addEventListener)s.wd.addEventListener('load',m.as,false);if(m.onLoad)m.onLoad(s,m)",s_code.m_i("Media"),function(a){a.AppMeasureMapper=function(b,c){var d=b,e=c,f=[],g=function(a){f[a]||f.push(a)},h=function(a){var b=a.replace(/\{|\}|^\s|\s$/g,"");return d.hasOwnProperty(b)&&d[b]?d[b]:a.search(/^{[\s\S]+}$/)?a:""};return{getMappedObject:function(b){b=b===!0;var c={},i=a.AppMeasureVars.DEFAULT_VARS;for(var j in i)if(i.hasOwnProperty(j)){var k=i[j];d.hasOwnProperty(k)&&d[k]&&(c[j]=a.String.stripToken(d[k]),g(j))}if(b&&"object"==typeof e.omnitureCustomFields&&"function"==typeof e.omnitureCustomFields.getItems)for(var l=e.omnitureCustomFields.getItems(),m=0,n=l.length;n>m;m++){var o=l[m],p=o.name,q=o.value,r="";if(q.indexOf("+")>-1)for(var s=q.split("+"),t=0,u=s.length;u>t;t++)r+=h(s[t]);else r=h(q);r&&(c.hasOwnProperty(p)?o.override&&(c[p]=r,g(p)):(c[p]=r,g(p)))}return c.trackVars=f.join(","),f=[],c}}}}(BTG),function(){var O="SDK_"+"5.12.0-r10386-201401200634".replace(/[^\w]/g,"_"),t="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:this;return t.tv=t.tv||{},t.tv.freewheel=t.tv.freewheel||{},t.tv.freewheel[O]=function(t){var a={version:"js-5.12.0-r10386-201401200634"};return"undefined"!=typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version),a.LOG_LEVEL_QUIET=0,a.LOG_LEVEL_INFO=1,a.LOG_LEVEL_DEBUG=2,a.setLogLevel=function(b){"undefined"!=typeof console&&b>a.LOG_LEVEL_QUIET?(a.log=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},a.warn=function(){console.warn(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},a.debug=b>a.LOG_LEVEL_INFO?function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))}:function(){}):a.warn=a.log=a.debug=function(){}},a.setLogLevel(a.LOG_LEVEL_INFO),a.log("FreeWheel Integration Runtime",a.version),function(){var b=navigator.userAgent.toLowerCase();a.PLATFORM_IS_WINDOWSPHONE=-1<b.search("windows phone os"),a.PLATFORM_IS_IPAD=-1<b.search("ipad"),a.PLATFORM_IS_IPHONE_IPOD=-1<b.search("iphone")||-1<b.search("ipod"),a.PLATFORM_IE_MOBILE_VERSION=function(){var a=b.search(/iemobile\/\d\.\d/);if(a>-1){var c=b.substr(a+9,1),a=b.substr(a+11,1);return 1*c+.1*a}return 0}(),a.PLATFORM_IOS_VERSION=function(){var a=b.search(/os \d_\d/);if(a>-1){var c=b.substr(a+3,1),a=b.substr(a+5,1);return 1*c+.1*a}return 0}(),a.PLATFORM_ANDROID_VERSION=function(){var a=b.search(/android \d\.\d/);if(a>-1){var c=b.substr(a+8,1),a=b.substr(a+10,1);return 1*c+.1*a}return-1<b.indexOf("transformer")?3.2:0}(),a.PLATFORM_IS_SAFARI=0<a.PLATFORM_IOS_VERSION&&-1<b.search("applewebkit")||0===a.PLATFORM_ANDROID_VERSION&&0>b.search("chrome")&&-1<b.search("safari"),a.PLATFORM_IS_MOBILE=0<a.PLATFORM_IOS_VERSION||0<a.PLATFORM_ANDROID_VERSION,a.PLATFORM_ID=a.PLATFORM_IS_MOBILE?0<a.PLATFORM_ANDROID_VERSION?"Android"+a.PLATFORM_ANDROID_VERSION:a.PLATFORM_IS_IPAD?"iPad"+a.PLATFORM_IOS_VERSION:a.PLATFORM_IS_IPHONE_IPOD?"iPhone"+a.PLATFORM_IOS_VERSION:"UnknownMobile":"Desktop",a.log("Device:",a.PLATFORM_ID,"PLATFORM_IS_SAFARI:",a.PLATFORM_IS_SAFARI)}(),a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?"touchend":"click",a.MOBILE_EVENT_DRAG="touchmove",a.PLATFORM_SEND_REQUEST_BY_FORM=!1,a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_MOVE_POSITION=3.1<=a.PLATFORM_ANDROID_VERSION,a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_SET_DISPLAY=!0,a.PLATFORM_SUPPORT_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=a.PLATFORM_IS_IPAD||a.PLATFORM_IS_IPHONE_IPOD,a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD,a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||0<a.PLATFORM_ANDROID_VERSION&&3.1>a.PLATFORM_ANDROID_VERSION||a.PLATFORM_IS_WINDOWSPHONE,a.PLATFORM_FILL_VIDEO_POOL_FOR_MIDROLL=4.2<=a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=2.2<=a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION||9<=a.PLATFORM_IE_MOBILE_VERSION,a.PLATFORM_NOT_SUPPORT_VIDEO_AD=0<a.PLATFORM_ANDROID_VERSION&&2.1>=a.PLATFORM_ANDROID_VERSION,a.PLATFORM_DETECT_FULL_SCREEN_FOR_MIDROLL=a.PLATFORM_IS_IPAD&&4.2<=a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_IS_WINDOWSPHONE,a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=3.1<=a.PLATFORM_ANDROID_VERSION,a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT=0<a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION,a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=9<=a.PLATFORM_IE_MOBILE_VERSION,a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=0<a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION&&4<=a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL=!1,a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||4<=a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION,a.PLATFORM_NOT_SUPPORT_OVERLAY_CLICK_WHEN_CONTROLS_IS_TRUE=a.PLATFORM_IS_IPAD,a.RENDERER_STATE_INIT=1,a.RENDERER_STATE_STARTING=2,a.RENDERER_STATE_STARTED=3,a.RENDERER_STATE_COMPLETING=4,a.RENDERER_STATE_COMPLETED=5,a.RENDERER_STATE_FAILED=6,a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT,a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING,a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED,a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING,a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED,a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED,a.EVENT_AD="adEvent",a.EVENT_SLOT_IMPRESSION="slotImpression",a.EVENT_SLOT_END="slotEnd",a.EVENT_AD_IMPRESSION="defaultImpression",a.EVENT_AD_IMPRESSION_END="adEnd",a.EVENT_AD_QUARTILE="quartile",a.EVENT_AD_FIRST_QUARTILE="firstQuartile",a.EVENT_AD_MIDPOINT="midPoint",a.EVENT_AD_THIRD_QUARTILE="thirdQuartile",a.EVENT_AD_COMPLETE="complete",a.EVENT_AD_CLICK="defaultClick",a.EVENT_AD_MUTE="_mute",a.EVENT_AD_UNMUTE="_un-mute",a.EVENT_AD_COLLAPSE="_collapse",a.EVENT_AD_EXPAND="_expand",a.EVENT_AD_PAUSE="_pause",a.EVENT_AD_RESUME="_resume",a.EVENT_AD_REWIND="_rewind",a.EVENT_AD_ACCEPT_INVITATION="_accept-invitation",a.EVENT_AD_CLOSE="_close",a.EVENT_AD_MINIMIZE="_minimize",a.EVENT_ERROR="_e_unknown",a.EVENT_RESELLER_NO_AD="resellerNoAd",a.INFO_KEY_CUSTOM_ID="customId",a.INFO_KEY_MODULE_TYPE="moduleType",a.MODULE_TYPE_EXTENSION="extension",a.MODULE_TYPE_RENDERER="renderer",a.MODULE_TYPE_TRANSLATOR="translator",a.INFO_KEY_ERROR_CODE="errorCode",a.INFO_KEY_ERROR_INFO="errorInfo",a.INFO_KEY_ERROR_MODULE="errorModule",a.ERROR_IO="_e_io",a.ERROR_TIMEOUT="_e_timeout",a.ERROR_NULL_ASSET="_e_null-asset",a.ERROR_ADINSTANCE_UNAVAILABLE="_e_adinst-unavail",a.ERROR_UNKNOWN="_e_unknown",a.ERROR_MISSING_PARAMETER="_e_missing-param",a.ERROR_NO_AD_AVAILABLE="_e_no-ad",a.ERROR_PARSE="_e_parse",a.ERROR_INVALID_VALUE="_e_invalid-value",a.ERROR_INVALID_SLOT="_e_invalid-slot",a.ERROR_NO_RENDERER="_e_no-renderer",a.ERROR_DEVICE_LIMIT="_e_device-limit",a.ERROR_3P_COMPONENT="_e_3p-comp",a.ERROR_UNSUPPORTED_3P_FEATURE="_e_unsupp-3p-feature",a.ERROR_SECURITY="_e_security",a.ERROR_UNMATCHED_SLOT_SIZE="_e_slot-size-unmatch",a.INFO_KEY_URL="url",a.INFO_KEY_SHOW_BROWSER="showBrowser",a.INFO_KEY_CUSTOM_EVENT_NAME="customEventName",a.INFO_KEY_NEED_EMPTY_CT="needEmptyCT",a.EVENT_TYPE_CLICK_TRACKING="CLICKTRACKING",a.EVENT_TYPE_IMPRESSION="IMPRESSION",a.EVENT_TYPE_CLICK="CLICK",a.EVENT_TYPE_STANDARD="STANDARD",a.EVENT_TYPE_GENERIC="GENERIC",a.EVENT_TYPE_ERROR="ERROR",a.EVENT_VIDEO_VIEW="videoView",a.SHORT_EVENT_TYPE_IMPRESSION="i",a.SHORT_EVENT_TYPE_CLICK="c",a.SHORT_EVENT_TYPE_STANDARD="s",a.SHORT_EVENT_TYPE_ERROR="e",a.INIT_VALUE_ZERO="0",a.INIT_VALUE_ONE="1",a.INIT_VALUE_TWO="2",a.INFO_KEY_PARAMETERS="parameters",a.URL_PARAMETER_KEY_ET="et",a.URL_PARAMETER_KEY_CN="cn",a.URL_PARAMETER_KEY_INIT="init",a.URL_PARAMETER_KEY_CT="ct",a.URL_PARAMETER_KEY_METR="metr",a.URL_PARAMETER_KEY_CR="cr",a.URL_PARAMETER_KEY_KEY_VALUE="kv",a.URL_PARAMETER_KEY_ERROR_INFO="additional",a.URL_PARAMETER_KEY_ERROR_MODULE="renderer",a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID="reid",a.CAPABILITY_SLOT_TEMPLATE="sltp",a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS="emcr",a.CAPABILITY_RECORD_VIDEO_VIEW="exvt",a.CAPABILITY_CHECK_COMPANION="cmpn",a.CAPABILITY_CHECK_TARGETING="targ",a.CAPABILITY_FALLBACK_UNKNOWN_ASSET="unka",a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION="unks",a.CAPABILITY_FALLBACK_ADS="fbad",a.CAPABILITY_SLOT_CALLBACK="slcb",a.CAPABILITY_NULL_CREATIVE="nucr",a.CAPABILITY_AUTO_EVENT_TRACKING="aeti",a.CAPABILITY_RENDERER_MANIFEST="rema",a.CAPABILITY_REQUIRE_VIDEO_CALLBACK="vicb",a.CAPABILITY_SKIP_AD_SELECTION="skas",a.SLOT_TYPE_TEMPORAL="temporal",a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL="videoPlayerNonTemporal",a.SLOT_TYPE_SITESECTION_NONTEMPORAL="siteSectionNonTemporal",a.TIME_POSITION_CLASS_PREROLL="PREROLL",a.TIME_POSITION_CLASS_MIDROLL="MIDROLL",a.TIME_POSITION_CLASS_POSTROLL="POSTROLL",a.TIME_POSITION_CLASS_OVERLAY="OVERLAY",a.TIME_POSITION_CLASS_DISPLAY="DISPLAY",a.TIME_POSITION_CLASS_PAUSE_MIDROLL="PAUSE_MIDROLL",a.EVENT_REQUEST_COMPLETE="onRequestComplete",a.EVENT_SLOT_STARTED="onSlotStarted",a.EVENT_SLOT_ENDED="onSlotEnded",a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST="contentVideoPauseRequest",a.EVENT_CONTENT_VIDEO_RESUME_REQUEST="contentVideoResumeRequest",a.CAPABILITY_STATUS_OFF=0,a.CAPABILITY_STATUS_ON=1,a.PARAMETER_LEVEL_PROFILE=0,a.PARAMETER_LEVEL_GLOBAL=1,a.PARAMETER_LEVEL_OVERRIDE=5,a.PARAMETER_ENABLE_FORM_TRANSPORT="sdk.enableFormTransport",a.PARAMETER_DESIRED_BITRATE="desiredBitrate",a.PARAMETER_VIDEO_POOL_SIZE="sdk.videoPoolSize",a.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT="PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT",a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT="extension.ad.control.clickElement",a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED="extension.contentVideo.enabled",a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME="extension.contentVideo.respondPauseResume",a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK="extension.contentVideo.autoSeekBack",a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE="extension.contentVideo.autoSourceRestore",a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED="extension.videoState.enabled",a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT="renderer.video.startDetectTimeout",a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT="renderer.video.progressDetectTimeout",a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY="renderer.video.android.delay",a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE="renderer.video.displayControlsWhenPause",a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION="renderer.video.clickDetection",a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED="renderer.video.playAfterStalled",a.PARAMETER_EXTENSION_SURVEY_ENABLED="extension.survey.enabled",a.PARAMETER_RENDERER_HTML_COAD_SCRIPT_NAME="renderer.html.coadScriptName",a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT="renderer.html.isBackgroundTransparent",a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION="renderer.html.shouldEndAfterDuration",a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT="renderer.html.adLoadTimeout",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE="renderer.html.placementType",a.PARAMETER_RENDERER_HTML_BOOTSTRAP="renderer.html.bootstrap",a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR="renderer.html.primaryAnchor",a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH="renderer.html.marginWidth",a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT="renderer.html.marginHeight",a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY="renderer.vpaid.creativeTimeoutDelay",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INLINE="inline",a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL="interstitial",a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL="app-interstitial",a.ID_TYPE_FW=1,a.ID_TYPE_CUSTOM=2,a.ID_TYPE_GROUP=3,a.VIDEO_STATE_PLAYING=1,a.VIDEO_STATE_PAUSED=2,a.VIDEO_STATE_STOPPED=3,a.VIDEO_STATE_COMPLETED=4,a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=1,a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2,a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3,a.VIDEO_ASSET_AUTO_PLAY_TYPE_NON_AUTO_PLAY=3,a.ADUNIT_PREROLL="preroll",a.ADUNIT_MIDROLL="midroll",a.ADUNIT_POSTROLL="postroll",a.ADUNIT_OVERLAY="overlay",a.Util={canPlayVideoType:function(b){if(a.PLATFORM_IS_SAFARI&&("video/ogg"==b||"video/webm"==b))return!1;if(1<a.PLATFORM_ANDROID_VERSION&&"video/m4v"==b)return!0;var c=document.createElement("video");return c.canPlayType?!(!c.canPlayType(b)&&!c.canPlayType(b.replace("/","/x-"))):!1},str2bool:function(b){return b?(b=a.Util.trim(b).toLowerCase(),"true"==b||"yes"==b||"on"==b||"1"==b):!1},trim:function(a){return"string"!=typeof a?a.toString():a.replace(/^\s+|\s+$/g,"")},isBlank:function(b){return!b||""===a.Util.trim(b)},encodeToHex:function(a){for(var b="",c=0;c<a.length;c++){for(var d=a.charCodeAt(c).toString(16).toUpperCase();4>d.length;)d="0"+d;b+="\\u"+d.toUpperCase()
}return b},forEachOnArray:function(a,b,c){var d;if(null==a)throw new TypeError(" array is null or not defined");var a=Object(a),e=a.length>>>0;if("[object Function]"!={}.toString.call(b))throw new TypeError(b+" is not a function");for(c&&(d=c),c=0;e>c;){var f;c in a&&(f=a[c],b.call(d,f,c,a)),c++}},mixin:function(a,b){var c,d={};for(c in b)("undefined"==typeof d[c]||d[c]!=b[c])&&(a[c]=b[c]);return a},copy:function(b){return a.Util.mixin({},b)},bind:function(a,b){var c=Array.prototype.slice.call(arguments);return c.shift(),b=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}},getObject:function(a,b,c){if(!a)return null;for(var d,a=a.split("."),b=b||window,e=0;b&&(d=a[e]);e++)b=d in b?b[d]:c?b[d]={}:void 0;return b},buildNode:function(b,c,d,f,g){a.debug("Util.buildNode"),d||(d=document);var h=null!=navigator.userAgent.match(/Firefox/);b.innerHTML=c||"";for(var b=b.getElementsByTagName("script"),j=d.getElementsByTagName("head")[0],c=0;c<b.length;++c)if(h||b[c].src){var k=d.createElement("script");b[c].charset&&(k.charset=b[c].charset),b[c].src&&(k.src=b[c].src),b[c].innerHTML&&(k.innerHTML=b[c].innerHTML),k.onload=k.onreadystatechange=function(){(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)&&j.removeChild(k)};try{j.appendChild(k)}catch(l){a.warn("load script err: "+l)}}else k=b[c].innerHTML,f&&(k=k.replace(/var fw_scope = document;/,"var fw_scope="+f+";")),g&&(k=k.replace(/var fw_scope_window = window;/,"var fw_scope_window="+g+";")),eval(k)},replacePageSlot:function(b,c,d){a.debug("Util.replacePageSlot("+Array.prototype.slice.call(arguments).join(",")+")");var e,f,g;try{e=document.getElementById(b)?document:parent.document.getElementById(b)?parent.document:null,f=document.getElementById(b)?"window":parent.document.getElementById(b)?"parent":null}catch(h){f=e=null}if(!e)for(var i=0;i<window.frames.length;i++)try{window.frames[i].document.getElementById(b)&&(e=window.frames[i].document,f="window.frames["+i+"]")}catch(j){a.warn(j)}if(f&&(g=f+".document"),a.log("replacing slot "+b+" in frame "+g),!e)throw"Slot element not found: "+b;i=e.getElementById(d?d:"_fw_container_"+b),a.Util.buildNode(i,c,e,g,f)},pingURLWithImage:function(a){new Image(1,1).src=a},pingURLWithForm:function(a,b,c){c=c?"_fw_request":"_fw_cb",null==b&&(b=Math.random());var d=document.createElement("iframe");d.name=c+"_iframe_"+b,d.id=c+"_iframe_"+b,d.style.position="absolute",d.style.left="-10000px",d.style.width="1px",d.style.visibility="hidden";var e=document.createElement("form");e.action=a,e.id=c+"_form_"+b,e.target=d.id,e.method="post",e.style.position="absolute",e.style.left="-10000px",e.style.width="1px",e.style.visibility="hidden",document.body&&(document.body.appendChild(d),document.body.appendChild(e),e.submit(),document.body.removeChild(e))},pingURLWithScript:function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.src=a,c.onload=c.onreadystatechange=function(){(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)&&b.removeChild(c)},b.appendChild(c)},pingURL:function(b){a.debug("send callback: "+b),b&&(a.PLATFORM_SEND_REQUEST_BY_FORM?a.Util.pingURLWithForm(b,null,!1):a.Util.pingURLWithImage(b))},pingURLs:function(b){for(var c=0;c<b.length;c++)a.Util.pingURL(b[c])},setParameterInURL:function(a,b,c){if(!a||!b||null==c)return null;var d,e,f=!1,a=a.split("?"),c=encodeURIComponent(c);if(a[1]){e=a[1].split("&");for(var g=0;g<e.length;++g)if(d=e[g].split("="),d[0]==b){e[g]=d[0]+"="+c,f=!0;break}d=e.join("&"),f||(d=b+"="+c+"&"+d)}else d=b+"="+c;return d=a[0]+"?"+d},getParameterInURL:function(b,c){if(!b||!c)return null;var d=b.split("?");if(d[1])for(var d=d[1].split("&"),e=0;e<d.length;++e){var f=d[e].split("=");if(f[0]==c&&!a.Util.isBlank(f[1]))return decodeURIComponent(f[1])}return null},isParameterInURL:function(a,b){if(!a||!b)return!1;var c=a.split("?");if(c[1])for(var c=c[1].split("&"),d=0;d<c.length;++d)if(c[d].split("=")[0]==b)return!0;return!1},flashVersion:function(){var b="0,0,0,0";if(null!=navigator.plugins&&0<navigator.plugins.length){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])try{var c=navigator.plugins["Shockwave Flash"+(navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"")].description.split(" "),d=c[2].split("."),e=d[0],f=d[1],g=c[3];""==g&&(g=c[4]),"d"==g[0]?g=g.substring(1):"r"==g[0]&&(g=g.substring(1),0<g.indexOf("d")&&(g=g.substring(0,g.indexOf("d")))),b=e+","+f+","+g+",0"}catch(h){a.warn("Flash detection failed on navigator method")}}else{var i;try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");var j=i.GetVariable("$version").split(" ")[1].split(",");3==j.length?b=j.join(",")+",0":4==j.length&&(b=j.join(","))}catch(k){a.warn("Flash detection failed on ActiveX method")}}return b},xmlToJson:function(b){var c={};if(!b)return null;if(1===b.nodeType){if(0<b.attributes.length){c["@attributes"]={};for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);c["@attributes"][e.nodeName]=e.nodeValue}}}else 3===b.nodeType?c=b.nodeValue:4===b.nodeType&&(c=b.nodeValue);if(b.hasChildNodes()){for(d=0;d<b.childNodes.length;d++){var e=b.childNodes.item(d),f=e.nodeName;if("undefined"==typeof c[f])c[f]=a.Util.xmlToJson(e);else{if("undefined"==typeof c[f].length||"string"==typeof c[f]){var g=c[f];c[f]=[],c[f].push(g)}c[f].push(a.Util.xmlToJson(e))}}"undefined"!=typeof c["#cdata-section"]?c.value=c["#cdata-section"]:c["#text"]&&(c.value=c["#text"])}return c},lazyJavaScriptLoad:function(a,b){var c=document.getElementsByTagName("head")[0]||document.documentElement,d=document.createElement("script");d.type="text/javascript",d.src=a,b&&(d.attachEvent&&!window.opera?d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&(c.removeChild(d),d.onreadystatechange=null,b())}:d.addEventListener("load",function(){c.removeChild(d),b()},!1)),c.insertBefore(d,c.firstChild)},getViewport:function(){var a=0,b=0;return"undefined"!=typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0]&&(a=document.getElementsByTagName("body")[0].clientWidth,b=document.getElementsByTagName("body")[0].clientHeight),{width:a,height:b,offsetX:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,offsetY:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},getAbsoluteUrl:function(b,c){if(b=a.Util.trim(b),c=a.Util.trim(c),-1!==c.indexOf("://"))return c;var d=b.substring(0,b.indexOf("://")-1);if(0===c.indexOf("//"))return d+":"+c;var d=b.indexOf("/",b.indexOf("://")+5),e=b;return-1!==d&&(e=b.substring(0,d)),0==c.indexOf("/")?e+c:(d=b.lastIndexOf("#"),e=b,-1!==d&&(e=b.substring(0,d)),0==c.indexOf("#")?e+c:(e=b.indexOf("?"),d=b,-1!==e&&(d=b.substring(0,e)),0==c.indexOf("?")?d+c:(e=-1===e?b.lastIndexOf("/"):d.lastIndexOf("/"),d=-1!==e?b.substring(0,e+1):d+"/",d+c)))}},a.MediaState=function(){},a.MediaState.prototype={},a.MediaState.prototype.constructor=a.MediaState,a.Util.mixin(a.MediaState.prototype,{play:function(b){a.debug(this._name+" play("+b+")")},pause:function(b){a.debug(this._name+" pause("+b+")")},complete:function(b){a.debug(this._name+" complete("+b+")")}}),a.MediaInitState=function(){this._name="MediaInitState"},a.MediaInitState.prototype=new a.MediaState,a.MediaInitState.prototype.constructor=a.MediaInitState,a.Util.mixin(a.MediaInitState.prototype,{play:function(b){a.debug(this._name+" play("+b+")"),b.setMediaState(a.MediaPlayingState.instance),"function"==typeof b.onStartPlaying&&b.onStartPlaying()}}),a.MediaInitState.instance=new a.MediaInitState,a.MediaPlayingState=function(){this._name="MediaPlayingState"},a.MediaPlayingState.prototype=new a.MediaState,a.MediaPlayingState.prototype.constructor=a.MediaPlayingState,a.Util.mixin(a.MediaPlayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")"),b.setMediaState(a.MediaPausedState.instance),"function"==typeof b.onPausePlaying&&b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")"),b.setMediaState(a.MediaEndState.instance),"function"==typeof b.onCompletePlaying&&b.onCompletePlaying()}}),a.MediaPlayingState.instance=new a.MediaPlayingState,a.MediaPausedState=function(){this._name="MediaPausedState"},a.MediaPausedState.prototype=new a.MediaState,a.MediaPausedState.prototype.constructor=a.MediaPausedState,a.Util.mixin(a.MediaPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")"),b.setMediaState(a.MediaPlayingState.instance),"function"==typeof b.onResumePlaying&&b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")"),b.setMediaState(a.MediaEndState.instance),"function"==typeof b.onCompletePlaying&&b.onCompletePlaying()}}),a.MediaPausedState.instance=new a.MediaPausedState,a.MediaReplayingState=function(){this._name="MediaReplayingState"},a.MediaReplayingState.prototype=new a.MediaState,a.MediaReplayingState.prototype.constructor=a.MediaReplayingState,a.Util.mixin(a.MediaReplayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")"),b.setMediaState(a.MediaReplayPausedState.instance),"function"==typeof b.onPausePlaying&&b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")"),b.setMediaState(a.MediaEndState.instance),"function"==typeof b.onCompleteReplaying&&b.onCompleteReplaying()}}),a.MediaReplayingState.instance=new a.MediaReplayingState,a.MediaReplayPausedState=function(){this._name="MediaReplayPausedState"},a.MediaReplayPausedState.prototype=new a.MediaState,a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState,a.Util.mixin(a.MediaReplayPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")"),b.setMediaState(a.MediaReplayingState.instance),"function"==typeof b.onResumePlaying&&b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")"),b.setMediaState(a.MediaEndState.instance),"function"==typeof b.onCompleteReplaying&&b.onCompleteReplaying()}}),a.MediaReplayPausedState.instance=new a.MediaReplayingState,a.MediaEndState=function(){this._name="MediaEndState"},a.MediaEndState.prototype=new a.MediaState,a.MediaEndState.prototype.constructor=a.MediaEndState,a.Util.mixin(a.MediaEndState.prototype,{play:function(b){a.debug(this._name+" play("+b+")"),b.setMediaState(a.MediaReplayingState.instance),"function"==typeof b.onStartReplaying&&b.onStartReplaying()}}),a.MediaEndState.instance=new a.MediaEndState,a.RendererState=function(){},a.RendererState.prototype={},a.RendererState.prototype.constructor=a.RendererState,a.Util.mixin(a.RendererState.prototype,{start:function(){a.debug(this._name+" start()")},notifyStarted:function(){a.debug(this._name+" notifyStarted()")},stop:function(){a.debug(this._name+" stop()")},complete:function(){a.debug(this._name+" complete()")},notifyCompleted:function(){a.debug(this._name+" notifyCompleted()")},fail:function(b){a.debug(this._name+" fail()"),b.setRendererState(a.RendererFailedState.instance),b.getAdInstance().complete()}}),a.RendererInitState=function(){this._name="RendererInitState"},a.RendererInitState.prototype=new a.RendererState,a.RendererInitState.prototype.constructor=a.RendererInitState,a.RendererInitState.instance=new a.RendererInitState,a.Util.mixin(a.RendererInitState.prototype,{start:function(b){a.debug(this._name+" start()"),b.setRendererState(a.RendererStartingState.instance),b.getRenderer().start(b)},stop:function(b){a.debug(this._name+" stop()"),b.setRendererState(a.RendererCompletingState.instance),b.getRendererState().notifyCompleted()}}),a.RendererStartingState=function(){this._name="RendererStartingState"},a.RendererStartingState.prototype=new a.RendererState,a.RendererStartingState.prototype.constructor=a.RendererStartingState,a.RendererStartingState.instance=new a.RendererStartingState,a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted:function(b){a.debug(this._name+" notifyStarted()"),b.setRendererState(a.RendererStartedState.instance),b.getAdInstance().play()},stop:function(b){a.debug(this._name+" stop()"),"function"==typeof b.getRenderer().stop&&(b.setRendererState(a.RendererCompletingState.instance),b.getRenderer().stop())}}),a.RendererStartedState=function(){this._name="RendererStartedState"},a.RendererStartedState.prototype=new a.RendererState,a.RendererStartedState.prototype.constructor=a.RendererStartedState,a.RendererStartedState.instance=new a.RendererStartedState,a.Util.mixin(a.RendererStartedState.prototype,{complete:function(b){a.debug(this._name+" complete()"),b.setRendererState(a.RendererCompletingState.instance)},stop:function(b){a.debug(this._name+" stop()"),"function"==typeof b.getRenderer().stop&&(b.setRendererState(a.RendererCompletingState.instance),!1===b.getRenderer().stop()&&b.getAdInstance().fakeComplete())}}),a.RendererCompletingState=function(){this._name="RendererCompletingState"},a.RendererCompletingState.prototype=new a.RendererState,a.RendererCompletingState.prototype.constructor=a.RendererCompletingState,a.RendererCompletingState.instance=new a.RendererCompletingState,a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted:function(b){a.debug(this._name+" notifyCompleted()"),b.setRendererState(a.RendererCompletedState.instance),b.getAdInstance().complete()}}),a.RendererCompletedState=function(){this._name="RendererCompletedState"},a.RendererCompletedState.prototype=new a.RendererState,a.RendererCompletedState.prototype.constructor=a.RendererCompletedState,a.RendererCompletedState.instance=new a.RendererCompletedState,a.RendererFailedState=function(){this._name="RendererFailedState"},a.RendererFailedState.prototype=new a.RendererState,a.RendererFailedState.prototype.constructor=a.RendererFailedState,a.RendererFailedState.instance=new a.RendererFailedState,a.HTMLRenderer=function(){},a.HTMLRenderer.prototype={start:function(b){this.rendererController=b,b.getAdInstance().getSlot().getBase()?this._setupParameters()&&(this._render(),b.handleStateTransition(a.RENDERER_STATE_STARTED)):b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_INVALID_SLOT,errorInfo:"slot base is empty"})},pause:function(){this.log("pause")},resume:function(){this.log("resume")},stop:function(){if(this.log("stop isMRAIDAd:"+this.isMRAIDAd+" tpc:"+this._tpc+" interstitial:"+this.shouldKeepInterstitial),!this.isMRAIDAd&&this._tpc==a.TIME_POSITION_CLASS_DISPLAY&&!this.shouldKeepInterstitial)return!1;var b=this.rendererController;this._cleanup(),b.handleStateTransition(a.RENDERER_STATE_COMPLETED)},_cleanup:function(){if(this.log("_cleanup"),this.timer&&(this.timer.stop(),this.timer=null),this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null),window.removeEventListener?(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),window.removeEventListener("message",this.messageHandlerFunc,!1),window.removeEventListener("resize",this.viewportChangeFunc,!1),window.removeEventListener("scroll",this.viewportChangeFunc,!1)):window.detachEvent&&(window.detachEvent("onmessage",this.messageHandlerFunc),window.detachEvent("onresize",this.viewportChangeFunc),window.detachEvent("onscroll",this.viewportChangeFunc)),this.isMRAIDAd&&(this.mraid.inExpandedState()&&(this.log("stopping with expanded state, invoke close()"),this._mraidClose()),this.mraid.inDefaultState()))return this.log("stopping with default state, invoke close()"),void this._mraidClose();var a;if(this.expandedAdElement&&(a=this.expandedAdElement.parentNode,this.expandedAdElement._fw_closeButton&&a.removeChild(this.expandedAdElement._fw_closeButton),a.removeChild(this.expandedAdElement),this.expandedAdElement===this.defaultAdElement&&(this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null),this.expandedAdElement=null),this.expandedLightbox&&(a=this.expandedLightbox.parentNode,a.removeChild(this.expandedLightbox),this.expandedLightbox=null),this.rendererController.getAdInstance().getSlot().getTimePositionClass(),this.defaultAdElement){a=this.defaultAdElement.parentNode;var b=this.defaultAdElement;b.style.display="hidden",window.setTimeout(function(){for(var c=a&&a.childNodes||[],d=0;d<c.length;d++){var e=c[d];e===b&&a.removeChild(e)}},200),this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null}this.defaultAdElementContainer&&(a=this.defaultAdElementContainer.parentNode,a.removeChild(this.defaultAdElementContainer),this.defaultAdElementContainer=null),this.shouldPauseContentWhenStart&&this.rendererController.requestContentStateChange(!1)},_setupParameters:function(){var b=this.rendererController,c=b.getAdInstance(),d=c.getSlot().getTimePositionClass();this._tpc=d;var e,f=c.getActiveCreativeRendition(),c=f.getBaseUnit(),f=f.getCreativeApi();if(a.PLATFORM_NOT_SUPPORT_OVERLAY_AD&&d===a.TIME_POSITION_CLASS_OVERLAY)return b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_DEVICE_LIMIT,errorInfo:"Overlay not supported on this device."}),!1;if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&(d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_PAUSE_MIDROLL))return b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_DEVICE_LIMIT,errorInfo:"Midroll, pause_midroll not supported on this device."}),!1;if(a.PLATFORM_IS_IPHONE_IPOD)switch(d){case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_OVERLAY:return b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_DEVICE_LIMIT,errorInfo:"Midroll, pause_midroll and overlay ads are not supported on iPod, iPhone."}),!1;case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:b.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF)}if(this.adLoadTimeout=5,(e=b.getParameter(a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT))&&(this.adLoadTimeout=0<Number(e)?Number(e):this.adLoadTimeout),this.shouldKeepInterstitial=!1,(e=b.getParameter(a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE))?this.shouldKeepInterstitial=e===a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL:"string"==typeof c&&(this.shouldKeepInterstitial=c.toLowerCase()===a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL),this.isInterstitialNow=this.shouldKeepInterstitial,this.shouldPauseContentWhenStart=!1,this.shouldPauseContentWhenExpandOrClick=!this.shouldKeepInterstitial&&(d===a.TIME_POSITION_CLASS_DISPLAY||d===a.TIME_POSITION_CLASS_OVERLAY),this.shouldBackgroundTransparent=!1,e=b.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT),"undefined"!=typeof e&&null!==e&&(this.shouldBackgroundTransparent=a.Util.str2bool(e)),this.shouldEndAfterDuration=d!==a.TIME_POSITION_CLASS_DISPLAY,e=b.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION),"undefined"!=typeof e&&null!==e&&(this.shouldEndAfterDuration=a.Util.str2bool(e)),this.coadScriptName=b.getParameter(a.PARAMETER_RENDERER_HTML_COAD_SCRIPT_NAME),this.coadScriptName||(this.coadScriptName=b.getParameter("coad_script_name")),this.primaryAnchor=b.getParameter(a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR)||"bc",this.marginWidth=b.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH)||0,this.marginHeight=b.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT)||0,this.bootstrap=b.getParameter(a.PARAMETER_RENDERER_HTML_BOOTSTRAP),c=a.Util.getViewport(),this.defaultExpandWidth=c.width,this.defaultExpandHeight=c.height,this.isMRAIDAd="MRAID-1.0"===f,this.mraid=new function(b){this.STATELOADING="loading",this.STATEDEFAULT="default",this.STATEEXPANDED="expanded",this.STATEHIDDEN="hidden",this._renderer=b,this._state=this.STATELOADING,this._useCustomClose=!1,this.viewable=this.expandIsModal=!0,this._baseUrlExpanded=this._baseUrlDefault="",b=Object.defineProperty||function(a,b,c){c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)},b(this,"baseUrl",{get:function(){return this.inExpandedState()?this._baseUrlExpanded||this._baseUrlDefault:this._baseUrlDefault},set:function(a){this.inExpandedState()?this._baseUrlExpanded=a:(this._baseUrlDefault=a,this._baseUrlExpanded="")}}),b(this,"useCustomClose",{get:function(){return this._useCustomClose},set:function(a){this._useCustomClose===!a&&(this._useCustomClose=!!a,this.pushData())}}),b(this,"placementType",{get:function(){return this._renderer.shouldKeepInterstitial?"interstitial":"inline"}}),b(this,"expandWidth",{get:function(){return this._renderer.requestedExpandWidth&&this._renderer.requestedExpandWidth<this._renderer.defaultExpandWidth?this._renderer.requestedExpandWidth:this._renderer.defaultExpandWidth}}),b(this,"expandHeight",{get:function(){return this._renderer.requestedExpandHeight&&this._renderer.requestedExpandHeight<this._renderer.defaultExpandHeight?this._renderer.requestedExpandHeight:this._renderer.defaultExpandHeight}}),b(this,"state",{get:function(){return this._state},set:function(b){this.log("mraid.state change "+this.state+" => "+b),this.state!==b&&(this._renderer.shouldPauseContentWhenExpandOrClick&&(b===this.STATEEXPANDED?this._renderer.rendererController.requestContentStateChange(!0):this.inExpandedState()&&this._renderer.rendererController.requestContentStateChange(!1)),b===this.STATEEXPANDED?(this._renderer.expandedAdElement?this._renderer.rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION}):(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer.rendererController.processEvent({name:a.EVENT_AD_EXPAND})),this._renderer.presentInterstitial(),this._renderer.shouldEndAfterDuration&&this._renderer.timer.pause()):b===this.STATEDEFAULT&&(this._renderer.shouldKeepInterstitial?(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer.presentInterstitial()):(this.inExpandedState()&&this._renderer.rendererController.processEvent(this._renderer.expandedAdElement!==this._renderer.defaultAdElement?{name:a.EVENT_AD_CLOSE}:{name:a.EVENT_AD_COLLAPSE}),this._renderer.expandedAdElement=null,this._renderer.presentInline()),this._renderer.shouldEndAfterDuration&&this._renderer.timer.start()),this._state=b,this.pushData(),b===this.STATEHIDDEN&&this._renderer.stop())}}),this.inLoadingState=function(){return this.state===this.STATELOADING},this.inDefaultState=function(){return this.state===this.STATEDEFAULT},this.inExpandedState=function(){return this.state===this.STATEEXPANDED},this.inHiddenState=function(){return this.state===this.STATEHIDDEN},this.pushData=function(){var a='mraid._Update("'+this.state+'", '+this.viewable+', "'+this.placementType+'", '+this.expandWidth+", "+this.expandHeight+", "+this.useCustomClose+", "+this.expandIsModal+")";this.log("mraid.pushData: going to invoke on iframe with "+a),this._renderer.defaultAdElement?(this._renderer.defaultAdElement.contentWindow.postMessage("fwsdk-bounce:"+a,"*"),this._renderer.expandedAdElement&&this._renderer.expandedAdElement!==this._renderer.defaultAdElement&&this._renderer.expandedAdElement.contentWindow.postMessage("fwsdk-bounce:"+a,"*")):this.warn("_mraidPushData: no iframe suitable to send "+a)},this.log=function(a){this._renderer.log(a)},this.warn=function(a){this._renderer.warn(a)}}(this),this.onLoadFunc=a.Util.bind(this,function(){this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null),this.timer&&this.shouldEndAfterDuration&&this.timer.start()}),this.touchMoveDisabler=function(a){a.preventDefault()},this.log("setting parameters, adLoadTimeout: "+this.adLoadTimeout+", isMRAIDAd: "+this.isMRAIDAd+", shouldKeepInterstitial: "+this.shouldKeepInterstitial+", shouldEndAfterDuration: "+this.shouldEndAfterDuration+", shouldPauseContentWhenStart: "+this.shouldPauseContentWhenStart+", shouldPauseContentWhenExpandOrClick: "+this.shouldPauseContentWhenExpandOrClick+", shouldBackgroundTransparent: "+this.shouldBackgroundTransparent+", defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", coadScriptName: "+this.coadScriptName+", primaryAnchor: "+this.primaryAnchor+", marginWidth: "+this.marginWidth+", marginHeight: "+this.marginHeight+", bootstrap: "+this.bootstrap),this.shouldKeepInterstitial){if(d===a.TIME_POSITION_CLASS_OVERLAY)return b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_INVALID_SLOT,errorInfo:"Interstitial ad is not supported on overlay slot."}),!1}else!this.isMRAIDAd||a.PLATFORM_IS_IPHONE_IPOD&&d!==a.TIME_POSITION_CLASS_DISPLAY||(b.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),b.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),b.setCapability(a.EVENT_AD_COLLAPSE,a.CAPABILITY_STATUS_ON),b.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON));return!0},_render:function(){this.log("_render");var b=this.rendererController,c=b.getAdInstance(),d=c.getSlot(),e=d.getTimePositionClass(),f=d.getBase(),g=c.getActiveCreativeRendition(),h=g.getDuration(),i=g.getPrimaryCreativeRenditionAsset(),c=i.getUrl(),j=i.getContent();if(e===a.TIME_POSITION_CLASS_DISPLAY&&(f.innerHTML=""),this.timer=new a.Timer(h,a.Util.bind(this,this.stop)),this.coadScriptName&&"function"==typeof window[this.coadScriptName])this.defaultAdElement=window[this.coadScriptName](j,c,g.getHeight(),g.getWidth(),i.getMimeType(),d.getCustomId()),this.timer&&this.shouldEndAfterDuration&&this.timer.start();else{if(g=document.createElement("span"),g.id="_fw_ad_container_html_"+d.getCustomId()+"_",g.style.position="relative"===f.style.position?"absolute":"relative",g.style.display="inline-block",g.style.margin="0px",g.style.padding="0px",g.style.width=f.style.width,g.style.height=f.style.height,g.style.top=g.style.left="0px",f.appendChild(g),this.defaultAdElementContainer=g,!c&&!j)return b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_NULL_ASSET}),void this.stop();g=document.createElement("iframe"),g.id="_fw_ad_container_iframe_"+d.getCustomId()+"_"+Math.random(),g.attachEvent?g.attachEvent("onload",this.onLoadFunc):g.onload=this.onLoadFunc,this.defaultAdElement=g,this.defaultAdElementContainer.appendChild(g),this._fillAdNode(g,c,j),this.isMRAIDAd&&(this.adLoadTimeoutTimer=new a.Timer(this.adLoadTimeout,a.Util.bind(this,function(){b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_TIMEOUT,errorModule:"HTMLRenderer",errorInfo:"Loading element timeout"}),e!==a.TIME_POSITION_CLASS_DISPLAY&&this.isMRAIDAd&&!this.mraid.inLoadingState()?this._mraidClose():this.stop()})),this.adLoadTimeoutTimer.start())}!this.defaultAdElement&&(d=f.getElementsByTagName("iframe"))&&0<d.length&&(this.defaultAdElement=d[d.length-1]),this.defaultAdElement?(this.defaultAdElement.frameBorder="0",this.shouldBackgroundTransparent&&(this.defaultAdElement.allowTransparency="true",this.defaultAdElement.style["background-color"]="rgba(255,255,255,0)"),this.isInterstitialNow?(this.expandedAdElement=this.defaultAdElement,this.presentInterstitial()):this.presentInline(),this.messageHandlerFunc=a.Util.bind(this,this._onWindowMessageReceived),this.viewportChangeFunc=a.Util.bind(this,function(){this.viewportChangeFuncTimer&&window.clearTimeout(this.viewportChangeFuncTimer),this.viewportChangeFuncTimer=window.setTimeout(a.Util.bind(this,this._onViewportResizeScroll),200)}),window.addEventListener?(window.addEventListener("message",this.messageHandlerFunc,!1),window.addEventListener("resize",this.viewportChangeFunc,!1),window.addEventListener("scroll",this.viewportChangeFunc,!1)):window.attachEvent&&(window.attachEvent("onmessage",this.messageHandlerFunc),window.attachEvent("onresize",this.viewportChangeFunc),window.attachEvent("onscroll",this.viewportChangeFunc))):this.isMRAIDAd&&(b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_UNKNOWN,errorModule:"HTMLRenderer",errorInfo:"Failed to find iframe in slotBase for MRAID ad"}),this.stop())},_layoutOverlayAd:function(a){this.log("_layoutOverlayAd");var b=this.rendererController.getAdInstance(),c=b.getSlot(),d=c.getVideoDisplaySize().width,c=c.getVideoDisplaySize().height,e=b.getActiveCreativeRendition(),b=e.getWidth()||240,e=e.getHeight()||50;switch(a.style.width=Math.min(b,d)+"px",a.style.height=Math.min(e,c)+"px",a.style.left=a.style.top=a.style.right=a.style.bottom="",this.primaryAnchor){case"tl":case"lt":a.style.top=this.marginHeight+"px",a.style.left=this.marginWidth+"px";break;case"tr":case"rt":a.style.top=this.marginHeight+"px",a.style.right=this.marginWidth+"px";break;case"bl":case"lb":a.style.bottom=this.marginHeight+"px",a.style.left=this.marginWidth+"px";break;case"br":case"rb":a.style.bottom=this.marginHeight+"px",a.style.right=this.marginWidth+"px";break;case"tc":case"ct":a.style.top=this.marginHeight+"px",a.style.left=.5*Math.max(0,d-b)+"px";break;case"lm":case"ml":a.style.left=this.marginWidth+"px",a.style.top=.5*Math.max(0,c-e)+"px";break;case"rm":case"mr":a.style.right=this.marginWidth+"px",a.style.top=.5*Math.max(0,c-e)+"px";break;case"mc":case"cm":case"c":case"m":a.style.left=.5*Math.max(0,d-b)+"px",a.style.top=.5*Math.max(0,c-e)+"px";break;default:case"bc":case"cb":a.style.bottom=this.marginHeight+"px",a.style.left=.5*Math.max(0,d-b)+"px"}},_fillAdNode:function(b,c,d){this.log("_fillAdNode, url:"+c+", content:"+(d?"<omited>":"<empty>"));var e=this.rendererController;if(c)b.src=c;else{if(!d)return e.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"HTMLRenderer",errorCode:a.ERROR_NULL_ASSET}),!1;b=b.contentWindow?b.contentWindow.document:b.contentDocument.document?b.contentDocument.document:b.contentDocument,b.open(),b.write(d),b.close()}return!0},presentInline:function(){this.log("presentInline"),this.isInterstitialNow=!1;var b=this.defaultAdElement;if(b){var c=this.rendererController.getAdInstance(),d=c.getSlot(),e=d.getTimePositionClass(),f=d.getWidth(),g=d.getHeight(),h=d.getVideoDisplaySize().width,d=d.getVideoDisplaySize().height,i=c.getActiveCreativeRendition(),c=i.getWidth(),i=i.getHeight();switch(b.scrolling="no",b.style.overflow="hidden",e){case a.TIME_POSITION_CLASS_DISPLAY:b.style.position="",b.style.background=this.shouldBackgroundTransparent?"transparent":"",b.style.left="0px",b.style.top="0px",b.style.width=(f?f:c)+"px",b.style.height=(g?g:i)+"px";break;case a.TIME_POSITION_CLASS_OVERLAY:b.style.position="absolute",b.style.background=this.shouldBackgroundTransparent?"transparent":"white",this._layoutOverlayAd(b);break;default:b.style.position="absolute",b.style.background=this.shouldBackgroundTransparent?"transparent":"white",b.style.left="0px",b.style.top="0px",b.style.width=h+"px",b.style.height=d+"px"}}},presentInterstitial:function(){if(this.log("presentInterstitial, defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", this.mraid.expandWidth: "+this.mraid.expandWidth+", this.mraid.expandHeight: "+this.mraid.expandHeight+", (Math.max(0, this.defaultExpandWidth - this.mraid.expandWidth) / 2) = "+Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+", (Math.max(0, this.defaultExpandHeight - this.mraid.expandHeight) / 2) = "+Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2),this.expandedAdElement){this.isInterstitialNow=!0,document.addEventListener&&(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),document.addEventListener("touchmove",this.touchMoveDisabler,!1));var b=this.expandedAdElement.parentNode;if(this.expandedLightbox||(this.expandedLightbox=document.createElement("div"),this.expandedLightbox.style.background="black",this.expandedLightbox.style.opacity=.8,this.expandedLightbox.style.position="fixed",this.expandedLightbox.style.top="0px",this.expandedLightbox.style.left="0px",this.expandedLightbox.style.zIndex=this.expandedLightbox.style["z-index"]=9999,b.appendChild(this.expandedLightbox)),this.expandedLightbox.style.width=this.defaultExpandWidth+"px",this.expandedLightbox.style.height=this.defaultExpandHeight+"px",this.expandedAdElement.frameBorder="0",this.expandedAdElement.scrolling="no",this.expandedAdElement.style.position="fixed",this.expandedAdElement.style.overflow="hidden",this.expandedAdElement.style.top=this.expandedAdElement.top=Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2+"px",this.expandedAdElement.style.left=this.expandedAdElement.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+"px",this.expandedAdElement.style.width=this.expandedAdElement.width=this.mraid.expandWidth+"px",this.expandedAdElement.style.height=this.expandedAdElement.height=this.mraid.expandHeight+"px",this.expandedAdElement.style.zIndex=this.expandedAdElement.style["z-index"]=1e4,this.log("presentInterstitial, expanded ad element size: (top, left, width, height) = ("+this.expandedAdElement.top+", "+this.expandedAdElement.left+", "+this.expandedAdElement.width+", "+this.expandedAdElement.height+")"),this.isMRAIDAd){var c=this.expandedAdElement._fw_closeButton;
c||(c=document.createElement("div"),c.addEventListener?c.addEventListener("click",a.Util.bind(this,function(){this._mraidClose()})):c.attachEvent&&c.attachEvent("onclick",a.Util.bind(this,function(){this._mraidClose()})),c.style.position="fixed",c.style.margin="0px",c.style.padding="0px",c.style.width="25px",c.style.height="25px",c.style.zIndex=c.style["z-index"]=10001,b.appendChild(c),this.expandedAdElement._fw_closeButton=c),c.style.top=this.expandedAdElement.style.top,c.style.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+this.mraid.expandWidth-25+"px",c.innerHTML=this.mraid.useCustomClose?0<a.PLATFORM_ANDROID_VERSION?"   ":"":0<a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION?'<img style="width:25px; height:25px; border:0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xJREFUeNrMmjFv2kAUxw/IUAZUw4AqJjIxMAQJ9sIHgDYLUqfSBTowJBudAmOnNCNeAitLyVgxxNlBgk+QTKgb6UQHhr7nniNj8PmM3zk86XQZOPt+ee/e+9+dI4zQms1mGTpsb6EVXH42h/YHmqHrukH17kjAiWvQfYT2gfeH2BjaHfYA9hwqCABkobvik9eI/qkIMYB2A0BPSkG4By44hErrQfvhx0MRn/F/Cy3LwjH0yhfZdRSThOhyCI2FZ/iuRrFYjMxmMyMwCEDc8nB6LSsDTBZg7g4GAYj7ANmI0gpeMDEPTxwDhBRMzAXiGrqv7PgMYTSA+eWZtQACvfCTHbedQzYbu4LwOvHolp3q9TorlUpsuVyyfr/P1us16ezi8TirVqtmP5lMzPcIiuepvc5EHT+4doPIZDImhPV3q9UyX0hl+MxOp2O+I5/Ps1qt5pWat4py1CE7Gm4jnf99Sph9z5Lw9gWf845HhLJjtVqx0WhEDuMGgaElYVdbWYuTDbxGYcwiELreskQiwXK5HFssFmyz2ZBA4PoTrA9nFhtCFnu2PCJdL6bTKYlnCCCYfe4WyGc/I4PCEEK8zD3Cw+rxkPjGDIMp2Rl+otRMDGHZaZRvTQ8yv55RBGEKSwQ5C/IEWRiFEGhnMVj1naCbJa9slk6nVUKg/T2h2iyhZywZ4/RCMplUCWFW+hPBsQ0ZjFMhEEOY9SRKLUv3rRnFEHtFI4nhRPelX1xH2FQYOYjf9EsJ8qQSQqVqth8dkYGI6oQK1awExKvYUQlNL5CFSghq1exiCwQxVEOEAGPEYFPyG2QKniS+CWNTRL05w7DSdf2blX7HYe7siD0ztteRm7B3doQww5c9Ow+vspcKRvHXbrfJBCBBmOH13XdnZe95jcKzJmoVK/KMhPV2JAq/UDG8TgJVCEA3GAlvGG5a61JGpmM4UKtYJ4zEs7fmuu8Qu8vU3xEK12EqlXJV0FZIgTe6QhAOcx/kUEKxYUhVZGX8Oft/sX9sNudz2zHXW13wCm6B71m4F6AiwyuECnhj7mtjxQdUKPcrQdStCELoEZtnNO6ZwiuGU8Xr4wE/HwzgJVDY19T49cOlzA9jsk/EC0iQMQ/cM+9C8MIngOjLDjj0o5oGrzVZBWsBa8TA78Cgnznh3QQe6we9j0cpPnTe1IYG4kgIZR5273mvCdIohg6G6TzI5O32T4ABAPsBS28k7apdAAAAAElFTkSuQmCC">':'<img style="width:25px; height:25px; border:0" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDAwcHgiIGhlaWdodD0iNDAwcHgiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48Y2lyY2xlIGZpbGw9IiM2NjY2NjYiIGN4PSIyMDAuMTM5IiBjeT0iMTk5Ljg2IiByPSIxOTcuODYiLz48cGF0aCBmaWxsPSIjRjBGMEYwIiBzdHJva2U9IiNGMEYwRjAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTExNC44NjUsMzAzLjY0NGMtNi4yMjYsNi4yMjctMTUuMzYzLDcuMTg2LTIwLjQwNywyLjE0NGwtMC41MjItMC41MjJjLTUuMDQzLTUuMDQzLTQuMDgzLTE0LjE4LDIuMTQ0LTIwLjQwN0wyODQuODYsOTYuMDc4YzYuMjI2LTYuMjI3LDE1LjM2Mi03LjE4NiwyMC40MDUtMi4xNDRsMC41MjIsMC41MjFjNS4wNDMsNS4wNDIsNC4wODMsMTQuMTc5LTIuMTQ0LDIwLjQwOEwxMTQuODY1LDMwMy42NDR6Ii8+PHBhdGggZmlsbD0iI0YwRjBGMCIgc3Ryb2tlPSIjRjBGMEYwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zMDcuODE5LDI4OC42NjZjNS4xNTMsNS4xNTgsNS4wNDgsMTMuNjI0LTAuMjQxLDE4LjkxMWwwLDBjLTUuMjg4LDUuMjg5LTEzLjc1Miw1LjM5My0xOC45MDksMC4yNEw5MS45MDYsMTExLjA1NWMtNS4xNTYtNS4xNTYtNS4wNDgtMTMuNjIzLDAuMjQtMTguOTFsMCwwYzUuMjktNS4yODksMTMuNzU1LTUuMzk2LDE4LjkxMS0wLjI0MUwzMDcuODE5LDI4OC42NjZ6Ii8+PC9zdmc+">'}}},_onWindowMessageReceived:function(b){if(this.defaultAdElement&&(b.source===this.defaultAdElement.contentWindow||(this.expandedAdElement?b.source===this.expandedAdElement.contentWindow:!1))){this.log("_onWindowMessageReceived, event.data:"+b.data+", event.origin:"+b.origin);var c=b.data.toString().split(":");if(c&&2<=c.length&&"fwsdk-invoke"===c[0]){var d=c[1];if((c=c.slice(2))&&0<c.length){for(var e=0;e<c.length;e++)c[e]=decodeURIComponent(c[e]);1===c.length&&(c=c[0])}else c=null;"iframe_ready"===d?(this.onLoadFunc&&b.source===this.defaultAdElement.contentWindow&&this.defaultAdElement!==this.expandedAdElement&&this.onLoadFunc(),c&&(c=a.Util.trim(c))&&this.isMRAIDAd&&(this.mraid.baseUrl=c),this.bootstrap&&b.source.postMessage("fwsdk-bounce:"+this.bootstrap,b.origin),b.source.postMessage('fwsdk-bounce:mraid._messagingModel = "postMessage"',b.origin),this.isMRAIDAd&&(b.source===this.defaultAdElement.contentWindow&&this.shouldPauseContentWhenStart&&this.rendererController.requestContentStateChange(!0),this.mraid.inLoadingState()?this.mraid.state=this.mraid.STATEDEFAULT:this.expandedAdElement&&b.source===this.expandedAdElement.contentWindow&&this.mraid.pushData())):this.isMRAIDAd?this._mraidMethods(d,c):"close"===d&&this.stop()}}},_mraidMethods:function(b,c){if(b&&this.isMRAIDAd)switch(this.log("_mraidMethods("+b+", "+c+")"),b){case"open":"string"==typeof c?this._mraidOpen(c):2<=c.length&&this._mraidOpen(c[0],a.Util.str2bool(c[1]));break;case"close":this._mraidClose();break;case"expand":this._mraidExpand(c);break;case"useCustomClose":c&&0<c.length?this.mraid.useCustomClose=a.Util.str2bool(c):this.warn("Invalid parameter to useCustomClose");break;case"setExpandProperties":if(!c)break;this.requestedExpandWidth=Number(c[0]),this.requestedExpandHeight=Number(c[1]),(!this.requestedExpandWidth||!this.requestedExpandHeight||this.requestedExpandWidth===this.defaultExpandWidth&&this.requestedExpandHeight===this.defaultExpandHeight)&&(this.requestedExpandHeight=this.requestedExpandWidth=0),this.mraid.useCustomClose=a.Util.str2bool(c[2]),(this.requestedExpandWidth!==this.mraid.expandWidth||this.requestedExpandHeight!==this.mraid.expandHeight)&&this.mraid.pushData();break;case"log":this.log("MRAID log:"+c);break;default:this.warn("Unknown MRAID function call: "+b+" with param:"+c)}},_mraidOpen:function(b,c){this.log("_mraidOpen("+b+"), baseUrl:"+this.mraid.baseUrl+", absolute Url"+(b=a.Util.getAbsoluteUrl(this.mraid.baseUrl,b)));var d=this.rendererController;d.getAdInstance(),b&&"string"==typeof b&&0<b.length?((c||"undefined"==typeof c)&&window.open(b),d.processEvent({name:a.EVENT_AD_CLICK,info:{showBrowser:!1,url:b}})):this.warn("_mraidOpen: url required for open")},_mraidClose:function(){if(this.log("_mraidClose, current state: "+this.mraid.state),this.mraid.inExpandedState()){window.removeEventListener&&document.removeEventListener("touchmove",this.touchMoveDisabler,!1);var a=this.expandedAdElement,b=this.expandedAdElement._fw_closeButton;this.expandedAdElement._fw_closeButton=null;var c=this.expandedAdElement.parentNode;this.mraid.state=this.mraid.STATEDEFAULT,this.expandedLightbox&&(c.removeChild(this.expandedLightbox),this.expandedLightbox=null),a!==this.defaultAdElement&&(a.style.display="hidden",window.setTimeout(function(){c.removeChild(a)},50)),c.removeChild(b)}else this.mraid.inDefaultState()?this.mraid.state=this.mraid.STATEHIDDEN:this.warn("_mraidClose: close() is only valid when in expanded/default state")},_mraidExpand:function(b){if(this.log("_mraidExpand, current state: "+this.mraid.state),this.mraid.inDefaultState())if(this.shouldKeepInterstitial)this.warn("_mraidExpand: expand() is only valid for inline ad");else{if(b){var c=document.createElement("iframe");this.shouldBackgroundTransparent&&(c.allowTransparency="true",c.style["background-color"]="rgba(255,255,255,0)"),(this.defaultAdElementContainer||this.defaultAdElement.parentNode).appendChild(c),this.expandedAdElement=c,this.log("_mraidExpand("+b+"), baseUrl:"+this.mraid.baseUrl+", absolute Url"+(b=a.Util.getAbsoluteUrl(this.mraid.baseUrl,b))),this._fillAdNode(c,b,null)}this.mraid.state=this.mraid.STATEEXPANDED,this.isInterstitialNow=!0,this._onViewportResizeScroll()}else this.warn("_mraidExpand: expand() is only valid when in default state")},_onViewportResizeScroll:function(){var b=a.Util.getViewport();this.defaultExpandWidth=b.width,this.defaultExpandHeight=b.height,this.isInterstitialNow&&this.presentInterstitial()},log:function(b){var c=this.rendererController.getAdInstance().getSlot();a.log("HTMLRenderer["+c+"]	"+b)},warn:function(b){var c=this.rendererController.getAdInstance().getSlot();a.warn("HTMLRenderer["+c+"]	"+b)},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this.timer?this.timer.getPlayheadTime():-1},getDuration:function(){return this.timer?this.timer.getDuration():-1}},a.HTMLRenderer.prototype.constructor=a.HTMLRenderer,a.Ad=function(){var b=null,c=[],d=!1,e=null,f=!1;return{isRequiredToShow:function(){return f},parse:function(g){if(g){b=g.adId||null,d=g.noLoad,e=g.adUnit,g.hasOwnProperty("required")&&(f=g.required);for(var h=0,g=g.creatives||[];h<g.length;h++){var i=g[h],j=new a.Creative;j.parse(i),c.push(j)}}},getSoAdUnit:function(){return e},getId:function(){return b},getNoLoad:function(){return d},getCreative:function(a){for(var b=0;b<c.length;b++)if(c[b].getId()===a)return c[b];return null},addCreativeRendition:function(){var b=new a.Creative;return c.push(b),b}}},a.Creative=function(){var b=null,c=null,d=null,e={},f=[];return{getId:function(){return b},getBaseUnit:function(){return c},getDuration:function(){return d},getParameter:function(a){return e[a]},setParameter:function(a,b){null==b?delete e[a]:e[a]=b},parse:function(g){if(g){b=g.creativeId||null,c=g.baseUnit||null,d=1*g.duration;var h;if(g.parameters)if(g.parameters.constructor===Array)for(var i=0,j=g.parameters||[];i<j.length;i++)h=j[i],e[h.name]=h.value;else"object"==typeof g.parameters&&(e=a.Util.copy(g.parameters));for(i=0,j=g.creativeRenditions||[];i<j.length;i++)h=j[i],g=new a.CreativeRendition,g.parse(h),g.setDuration(d),g.setBaseUnit(c),f.push(g)}},getAllCreativeRenditions:function(){return f},cloneForTranslation:function(){var f=new a.Creative;return f.parse({creativeId:b,baseUnit:c,duration:d,parameters:a.Util.copy(e)}),f}}},a.CreativeRendition=function(){var b=null,c="None",d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l={},m=null,n=[],o=null;return{getId:function(){return b},getCreativeApi:function(){return c},setCreativeApi:function(a){c=a||"None"},getReplicaId:function(){return e},getContentType:function(){return f?f:m&&m.getContentType()?m.getContentType():null},setContentType:function(a){f=a},getWrapperType:function(){return g},setWrapperType:function(a){g=a},getWrapperUrl:function(){return h},setWrapperUrl:function(a){h=a},getBaseUnit:function(){return d},setBaseUnit:function(a){d=a},getPreference:function(){return i},setPreference:function(a){i=a},getWidth:function(){return j},setWidth:function(a){j=a},getHeight:function(){return k},setHeight:function(a){k=a},getDuration:function(){return o},setDuration:function(a){o=a},getParameter:function(a){return l[a]},setParameter:function(a,b){null==b?delete l[a]:l[a]=b},getPrimaryCreativeRenditionAsset:function(){return m},getOtherCreativeRenditionAssets:function(){return n.slice()},addCreativeRenditionAsset:function(b,c){var d=new a.CreativeRenditionAsset;return d.setName(b),c?m=d:n.push(d),d},parse:function(d){if(d){b=d.creativeRenditionId||null,c=d.creativeApi||"None",e=d.hasOwnProperty("adReplicaId")?1*d.adReplicaId:-1,f=d.contentType||null,g=d.wrapperType||null,h=d.wrapperUrl||null,i=1*d.preference,j=1*d.width,k=1*d.height;for(var o,p=0,q=d.parameters||[];p<q.length;p++)o=q[p],l[o.name]=o.value;for(m=new a.CreativeRenditionAsset,m.parse(d.asset),p=0,q=d.otherAssets||[];p<q.length;p++)o=q[p],d=new a.CreativeRenditionAsset,d.parse(o),n.push(d)}}}},a.CreativeRenditionAsset=function(){var a=null,b=null,c=null,d=null,e=null,f=null;return{getName:function(){return a},setName:function(b){a=b},getUrl:function(){return b},setUrl:function(a){b=a},getContent:function(){return c},setContent:function(a){c=a},getContentType:function(){return d},setContentType:function(a){d=a},getMimeType:function(){return e},setMimeType:function(a){e=a},getBytes:function(){return f},setBytes:function(a){f=a},parse:function(g){g&&(a=g.name||null,b=g.url||null,c=g.content||null,d=g.contentType||null,e=g.mimeType||null,f=1*g.bytes)}}},a.AdControlExtension=function(a){this._context=a,this._currentSlot=this._dragEvent=this._clickEvent=this._targetElement=null,this._dragging=!1},a.AdControlExtension.prototype={start:function(){this._clickEvent||(this._clickEvent=a.PLATFORM_EVENT_CLICK,this._dragEvent=a.MOBILE_EVENT_DRAG),this._onAdClicked=a.Util.bind(this,function(){a.log("AdControlExtension","clicked on target element: "+this._targetElement.id),this._dragging?this._dragging=!1:this._currentSlot&&this._currentSlot.getCurrentAdInstance()&&this._currentSlot.getCurrentAdInstance().getRendererController().processEvent({name:a.EVENT_AD_CLICK})}),this._onAdDragged=a.Util.bind(this,function(){a.log("AdControlExtension","dragging target element: "+this._targetElement.id),this._dragging=!0}),this._onSlotStarted=a.Util.bind(this,function(a){a.slot&&this._isTargetSlot(a.slot)&&(this._clearListener(),this._attachListener(a.slot))}),this._onSlotEnded=a.Util.bind(this,function(a){a.slot&&this._isTargetSlot(a.slot)&&(this._targetElement&&(this._targetElement.style.visibility="hidden"),this._clearListener())}),this._onAdStarted=a.Util.bind(this,function(b){(b=b.adInstance)&&this._isTargetSlot(b.getSlot())&&this._targetElement&&(this._targetElement.style.visibility=0<b.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK).length?"":"hidden")}),this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._context.addEventListener(a.EVENT_SLOT_STARTED,this._onSlotStarted),this._context.addEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted),this._targetElement&&(this._targetElement.style.visibility="hidden")},_onAdClicked:function(){},_onSlotStarted:function(){},_onSlotEnded:function(){},_attachListener:function(b){a.debug("AdControlExtension._attachListener");var c=this._context.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);c&&((this._targetElement=document.getElementById(c))?(this._currentSlot=b,this._targetElement.addEventListener(this._clickEvent,this._onAdClicked,!1),this._targetElement.addEventListener(this._dragEvent,this._onAdDragged,!1)):a.warn("Attempted to process click/tap via PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT specified html element: '"+c+"'. The specified element is not available on the current HTML page."))},_clearListener:function(){this._targetElement&&(this._targetElement.removeEventListener(this._clickEvent,this._onAdClicked,!1),this._targetElement.removeEventListener(this._dragEvent,this._onAdDragged,!1),this._targetElement=null),this._currentSlot=null},_isTargetSlot:function(b){return b.getType()===a.SLOT_TYPE_TEMPORAL&&b.getTimePositionClass()!==a.TIME_POSITION_CLASS_OVERLAY?!0:!1},dispose:function(){a.log("AdControlExtension.dispose()"),this._clearListener(),this._onAdClicked=null,this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._context.removeEventListener(a.EVENT_SLOT_STARTED,this._onSlotStarted),this._context.removeEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted),this._onAdStarted=this._onSlotEnded=this._onSlotStarted=null}},a.AdControlExtension.prototype.constructor=a.AdControlExtension,a.AdInstance=function(b){this._context=b,this._primaryCreativeRendition=this._creative=this._replicaId=this._creativeRenditionId=this._creativeId=this._soAdUnit=this._adId=this._slot=null,this._creativeRenditions=[],this._noLoad=!1,this._companionAdInstances=[],this._eventCallbacks=[],this._externalEventCallbackUrlsDictionary={},this._rendererController=new a.RendererController(b,this),this._timer=new a.Timer,this._metr=0,this._state=a.MediaInitState.instance,this._isStartSuccessfully=this._translated=this._isImpressionSent=!1,this._lastDurationFromRenderer=-1,this._slotCustomId=this._parentAdInstancesGroup=null},a.AdInstance.prototype={},a.AdInstance.prototype.constructor=a.AdInstance,a.METR_MASK_QUARTILE=0,a.METR_MASK_MIDPOINT=1,a.METR_MASK_COMPLETE=2,a.METR_MASK_VOLUME=3,a.METR_MASK_SIZE=4,a.METR_MASK_CONTROL=5,a.METR_MASK_REWIND=6,a.METR_MASK_ACCEPT_INVITATION=7,a.METR_MASK_CLOSE=8,a.METR_MASK_MINIMIZE=9,a.METR_MASK_CLICK=10,a.AdInstance._metrDictionary={},a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=1<<a.METR_MASK_COMPLETE,a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME,a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME,a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=1<<a.METR_MASK_SIZE,a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE,a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL,a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL,a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND,a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION,a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE,a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=1<<a.METR_MASK_MINIMIZE,a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK,a.Util.mixin(a.AdInstance.prototype,{getAdId:function(){return this._adId},getSoAdUnit:function(){return this._soAdUnit},getEventCallbackUrls:function(b,c){var d=[],e=c===a.EVENT_TYPE_CLICK,f=c===a.EVENT_TYPE_CLICK_TRACKING,g=a.EventCallback.getEventCallback(this._eventCallbacks,b,f?a.EVENT_TYPE_CLICK:c);if(!g)return d;var h={};return h[a.INFO_KEY_NEED_EMPTY_CT]=!0,e?g._showBrowser&&d.push(g.getUrl(h)):f?g._showBrowser||d.push(g.getUrl(h)):d.push(g.getUrl(h)),e||(d=d.concat(g.getTrackingUrls())),d},addEventCallbackUrls:function(a,b,c){c&&this._isValidEventNameAndType(a,b)&&(this._externalEventCallbackUrlsDictionary[b+"-"+a]=this.getExternalEventCallbackUrls(a,b).concat(c||[]))},setClickThroughUrl:function(b,c){if(c&&this._isValidEventNameAndType(b,a.EVENT_TYPE_CLICK)){var d=this.getEventCallback(b,a.EVENT_TYPE_CLICK);d&&(a.Util.isParameterInURL(d._url,a.URL_PARAMETER_KEY_CR)||(d._url=d._url+"&"+a.URL_PARAMETER_KEY_CR+"="),d._url=a.Util.setParameterInURL(d._url,a.URL_PARAMETER_KEY_CR,c),d._showBrowser=!0)}},addCreativeRendition:function(){var b=new a.CreativeRendition;return b.parse({creativeRenditionId:this._creativeRenditionId,preference:0}),b.setBaseUnit(this._creative.getBaseUnit()),b.setDuration(this._creative.getDuration()),this._creativeRenditions.push(b),this.isPlaceholder()&&(this._noLoad=!1),b},getRendererController:function(){return this._rendererController},getSlot:function(){return this._slot||(this._slot=this._context._adResponse.getSlotByCustomId(this._slotCustomId)),this._slot},getCompanionSlots:function(){for(var a=[],b=0;b<this._companionAdInstances.length;b++)a.push(this._companionAdInstances[b]._slot);return a},getCreativeRendition:function(a,b){for(var c=null,d=0,e=this._creativeRenditions||[];d<e.length;d++)if(e[d].getId()===a){if(e[d].getReplicaId()===b)return e[d];(!c||e[d].getReplicaId()<c.getReplicaId())&&(c=e[d])}return c},getActiveCreativeRendition:function(){return this._primaryCreativeRendition},setActiveCreativeRendition:function(b){b?(-1==this._creativeRenditions.indexOf(b)&&this._creativeRenditions.push(cr),this._primaryCreativeRendition=b,this._creativeRenditionId=b.getId()):a.warn("AdInstance.setActiveCreativeRendition","rendition is null")},getAllCreativeRenditions:function(){var a=this._creativeRenditions.slice();a.sort(function(a,b){return b.getPreference()-a.getPreference()});var b=a.indexOf(this._primaryCreativeRendition);return b>-1&&(a.splice(b,1),a.unshift(this._primaryCreativeRendition)),a},getRenderableCreativeRenditions:function(){var a=this._creativeRenditions.slice().sort(function(a,b){return b.getPreference()-a.getPreference()}).filter(function(a){return this._rendererController.rendererMatch(a)},this),b=a.indexOf(this._primaryCreativeRendition);return b>-1&&(a.splice(b,1),a.unshift(this._primaryCreativeRendition)),a},getPlayheadTime:function(){var b=-1;if(this._rendererController.getRenderer()&&"function"==typeof this._rendererController.getRenderer().getPlayheadTime)try{b=this._rendererController.getRenderer().getPlayheadTime()}catch(c){a.warn("AdInstance.getPlayheadTime",c.description)}return b},getDuration:function(){var a=-1;return this._rendererController.getRenderer()&&"function"==typeof this._rendererController.getRenderer().getDuration&&(this._lastDurationFromRenderer=a=this._rendererController.getRenderer().getDuration()),-1===a&&(a=-1<this._lastDurationFromRenderer?this._lastDurationFromRenderer:this.getActiveCreativeRendition().getDuration()),a},parse:function(b){if(b){this._adId=b.adId,this._creativeId=b.creativeId,this._creativeRenditionId=b.creativeRenditionId,this._replicaId=b.hasOwnProperty("replicaId")?1*b.replicaId:-1,this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad(),this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit(),this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId),this._creativeRenditions=this._creative.getAllCreativeRenditions();for(var c,d=0,e=b.eventCallbacks||[];d<e.length;d++){c=e[d];var f=a.EventCallback.newEventCallback(this._context,c.name,c.type);f&&(f._adInstance=this,f.parse(c),this._eventCallbacks.push(f))}for(d=0,e=b.companionAds||[];d<e.length;++d)(c=e[d])&&c.adSlotCustomId&&(f=new a.AdInstance(this._context),f._slotCustomId=c.adSlotCustomId,f.parse(c),this._companionAdInstances.push(f));for(d=0,e=b.fallbackAds||[];d<e.length;++d)c=e[d],f=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(f),f._slot=this._slot,f._parentAdInstancesGroup=this._parentAdInstancesGroup,f.parse(c);this._primaryCreativeRendition=this.getCreativeRendition(this._creativeRenditionId,this._replicaId)}},play:function(){if(a.log("AdInstance.play "+this._slotCustomId),this._timer.tick(),this.processEvent(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION),this._isStartSuccessfully||(a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION,{adInstance:this,slotCustomId:this._slotCustomId}),this._isStartSuccessfully=!0),this._state.play(this),this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]===a.MODULE_TYPE_RENDERER)for(var b=0;b<this._companionAdInstances.length;b++)this._companionAdInstances[b].isPlaceholder()||this._companionAdInstances[b].getSlot().playCompanionAds(this._companionAdInstances[b])},stop:function(){a.log("AdInstance.stop"),this._rendererController.stop()},fakeComplete:function(){this._slot.getTimePositionClass()===a.TIME_POSITION_CLASS_DISPLAY&&(this._isStartSuccessfully=!1,this._slot.playNextAdInstance())},complete:function(){this._isStartSuccessfully&&(this.processEvent(a.EVENT_AD_IMPRESSION_END,a.EVENT_TYPE_IMPRESSION),a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION_END,{adInstance:this})),this._state.complete(this),this._rendererController._restorePlaceholdersForHybrid(),this._rendererController.setRenderer(null),this._isStartSuccessfully=!1,this._slot.playNextAdInstance()},isStarted:function(){return this._isStartSuccessfully},onStartPlaying:function(){a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]?this._isImpressionSent=!0:this._translated=!0},onCompletePlaying:function(){},onStartReplaying:function(){},onCompleteReplaying:function(){},getEventCallback:function(b,c){return a.EventCallback.getEventCallback(this._eventCallbacks,b,c)},processEvent:function(b,c,d){var e=!0,c=this.getEventCallback(b,c);return b===a.EVENT_AD_IMPRESSION&&this._isStartSuccessfully&&(c=this.getEventCallback(a.EVENT_ERROR,a.EVENT_TYPE_ERROR),d={errorInfo:"Trying to send defaultImpression multiple times"},e=!1),c?c.process(d):e=!1,b===a.EVENT_AD_CLICK&&this._context.dispatchEvent(a.EVENT_AD_CLICK,{adInstance:this}),this._context.dispatchEvent(a.EVENT_AD,{subType:b,adInstance:this,slot:this._slot}),e},setMetr:function(b,c){var d=a.AdInstance._metrDictionary[b];d&&(b===a.EVENT_AD_CLICK&&(c=!c),this._metr=c===a.CAPABILITY_STATUS_ON||!0===c?this._metr|d:this._metr&~d)},getExternalEventCallbackUrls:function(a,b){return(this._externalEventCallbackUrlsDictionary[b+"-"+a]||[]).slice()},reset:function(){this._rendererController.reset();for(var b=0;b<this._companionAdInstances.length;b++){var c=this._companionAdInstances[b];(c._state===a.MediaPlayingState.instance||c._state===a.MediaReplayingState.instance)&&c.stop(),c._rendererController.reset()}},cloneForTranslation:function(){var b=new a.AdInstance(this._context);b._parent=this,b._adId=this._adId,b._creativeId=this._creativeId,b._creative=this._creative.cloneForTranslation(),b._creativeRenditionId=this._creativeRenditionId,b._noLoad=this._noLoad,b._slot=this.getSlot();for(var c=0;c<this._eventCallbacks.length;c++){var d=this._eventCallbacks[c].copy();d._adInstance=b,b._eventCallbacks.push(d)}for(b._externalEventCallbackUrlsDictionary=a.Util.copy(this._externalEventCallbackUrlsDictionary),c=0;c<this._companionAdInstances.length;c++)b._companionAdInstances.push(this._companionAdInstances[c].isPlaceholder()?this._companionAdInstances[c].cloneForTranslation():this._companionAdInstances[c]);return b},isPlaceholder:function(){return this._noLoad},setMediaState:function(a){this._state=a},_isValidEventNameAndType:function(b,c){return a.Util.isBlank(b)||a.Util.isBlank(c)?!1:c===a.EVENT_TYPE_CLICK||c===a.EVENT_TYPE_CLICK_TRACKING||c===a.EVENT_TYPE_IMPRESSION&&(b===a.EVENT_AD_IMPRESSION||b===a.EVENT_AD_FIRST_QUARTILE||b===a.EVENT_AD_MIDPOINT||b===a.EVENT_AD_THIRD_QUARTILE||b===a.EVENT_AD_COMPLETE)||c===a.EVENT_TYPE_STANDARD&&(b===a.EVENT_AD_PAUSE||b===a.EVENT_AD_RESUME||b===a.EVENT_AD_REWIND||b===a.EVENT_AD_MUTE||b===a.EVENT_AD_UNMUTE||b===a.EVENT_AD_COLLAPSE||b===a.EVENT_AD_EXPAND||b===a.EVENT_AD_MINIMIZE||b===a.EVENT_AD_CLOSE||b===a.EVENT_AD_ACCEPT_INVITATION)||c===a.EVENT_TYPE_ERROR&&b===a.EVENT_ERROR},isPlayable:function(){var b;return(b=!(this._rendererController.getRendererState()==a.RendererFailedState.instance&&!this._isImpressionSent))?((b=b&&!this._translated)||a.debug("AdInstance.isPlayable returning false translated:",this._translated),b):(a.debug("AdInstance.isPlayable returning false isImpressionSent:",this._isImpressionSent),b)},toString:function(){return"[AdInstance "+this._adId+"]"},getCompanionAdInstances:function(){for(var a=[],b=0;b<this._companionAdInstances.length;++b)this._companionAdInstances[b].isPlaceholder()||a.push(this._companionAdInstances[b]);return a},isRequiredToShow:function(){return this._context._adResponse.getAd(this._adId).isRequiredToShow()}}),a.AdManager=function(){var b=this;this._context=this.newContext(),this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,function(a){b.onRequestComplete(a)}),this._networkId=this._serverURL="",this._onRequestComplete=this._location=null},a.AdManager.prototype={getVersion:function(){if(a.version){var b=a.version.match(/^js-(\d)\.(\d)\.(\d).(\d)/)||a.version.match(/^js-(\d)\.(\d)\.(\d)/)||a.version.match(/^js-(\d)\.(\d)/);if(0<b.length)return(b[1]<<24)+(b[2]<<16)+(b[3]<<8)+b[4];if(0===a.versions.indexOf("js-trunk"))return 4294967295}return 0},setNetwork:function(b){if(a.debug("AdManager.setNetwork("+Array.prototype.slice.call(arguments).join(",")+")"),1*b>0){this._networkId=1*b;for(var c in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(c)){var d=a._instanceQueue[c];d&&d._videoAsset._videoPlayPending&&d._videoAsset.play()}}else a.warn("AdManager.setNetwork","valid networkId required")},setServerURL:function(b){a.debug("AdManager.setServerURL("+Array.prototype.slice.call(arguments).join(",")+")"),a.warn("AdManager.setServerURL method is DEPRECATED, use AdManager.setServer instead."),this.setServer(b)},setServer:function(b){if(a.debug("AdManager.setServer("+Array.prototype.slice.call(arguments).join(",")+")"),b&&"string"==typeof b){this._serverURL=b;for(var c in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(c)){var d=a._instanceQueue[c];d&&d._videoAsset._videoPlayPending&&d._videoAsset.play()}}else a.warn("AdManager.setServer","server url required")},setLocation:function(b){a.debug("AdManager.setLocation("+Array.prototype.slice.call(arguments).join(",")+")"),this._location=b},newContext:function(){return a.debug("AdManager.newContext("+Array.prototype.slice.call(arguments).join(",")+")"),new a.Context(this)},setParameter:function(b,c,d){a.debug("AdManager.setParameter("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setParameter(b,c,d)},getParameter:function(a){return this._context.getParameter(a)},submitRequest:function(b,c){a.debug("AdManager.submitRequest()"),b&&"function"==typeof b?this._onRequestComplete=b:a.warn("AdManager.submitRequest(): callback function required"),this._context.submitRequest(c/1e3)},onRequestComplete:function(b){a.debug("AdManager.onRequestComplete("+Array.prototype.slice.call(arguments).join(",")+")"),this._onRequestComplete&&(this._onRequestComplete({success:b.success,response:b.response}),this._onRequestComplete=null)},registerVideoDisplayBase:function(b){a.debug("AdManager.registerVideoDisplayBase("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.registerVideoDisplayBase(b)},setVideoAsset:function(b,c){a.debug("AdManager.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setVideoAsset(b,c)},setSiteSection:function(b){a.debug("AdManager.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setSiteSection(b)},addKeyValue:function(b,c){a.debug("AdManager.addKeyValue("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.addKeyValue(b,c)},setVideoDisplayCompatibleSizes:function(b){a.debug("AdManager.setVideoDisplayCompatibleSizes("+Array.prototype.slice.call(arguments).join(",")+")"),this._context.setVideoDisplayCompatibleSizes(b)},playSlots:function(b,c){a.warn("AdManager.playSlots() has DEPRECATED, use tv.freewheel.SDK.Slot.Play() instead"),a.debug("AdManager.playSlots("+b+")"),"string"==typeof b&&(b=b.toUpperCase()),this._playSlots(b,c)},_playSlots:function(b,c){if("function"!=typeof c&&(c=function(){}),this._context._adResponse){for(var d=[],e=this._context.getTemporalSlots(),f=0;f<e.length;++f){var g=e[f];(.1>Math.abs(g.getTimePosition()-b)||b===g.getTimePositionClass())&&d.push(g)}if(0===d.length)a.warn("AdManager.playSlots","no slot matches",b),c();else if(b===a.TIME_POSITION_CLASS_OVERLAY)for(f=0;f<d.length;f++)(function(a){if(!a._onContentVideoTimeUpdate){var b=a.getBase()._fw_contentVideo,c=a._onContentVideoTimeUpdate=function(){!b.paused&&!0!==b._fw_videoAdPlaying&&0<=b.currentTime-a.getTimePosition()&&1>b.currentTime-a.getTimePosition()&&(b.removeEventListener("timeupdate",c,!1),a._play(function(){var d=setInterval(function(){!b.paused&&2<Math.abs(b.currentTime-a.getTimePosition())&&(b.addEventListener("timeupdate",c,!1),clearInterval(d))},1e3)}))};b.addEventListener("timeupdate",c,!1)}})(d[f]);else(function(){var a=d.shift();a?a._play(arguments.callee):c()})()}else a.warn("AdManager._playSlots","request is not completed"),c()},dispose:function(){a.debug("AdManager.dispose()"),this._context.dispose(),this._onRequestComplete=null}},a.AdManager.prototype.constructor=a.AdManager,a.AdRequest=function(b){this._context=b,this._capabilities=new a.Capabilities,this._keyValues=[],this._playerProfile="",this._compatibleDimensions=null,this._temporalSlots=[],this._siteSectionId=this._siteSectionCustomId="",this._siteSectionViewRandom=this._siteSectionFallbackId=this._siteSectionNetworkId=0,this._visitorCustomId="",this._slotScanner=new a.PageSlotScanner,this._urlParams={},this._urlKeyValues=[],this._customInfo=""},a.AdRequest.prototype={setCapability:function(a,b){this._capabilities.setCapability(a,b)
},addKeyValue:function(b,c){if("string"!=typeof b||"string"!=typeof c||0===b.length)a.warn("AdRequest.addKeyValue:","key and value required");else{var d=encodeURIComponent(b)+"="+encodeURIComponent(c);0>this._keyValues.indexOf(d)&&this._keyValues.push(d)}},setProfile:function(b){"string"!=typeof b?a.warn("AdRequest.setProfile:","player profile required"):this._playerProfile=b},setVideoDisplayCompatibleSizes:function(b){if(b&&b.length){for(var c=[],d={},e=0;e<b.length;++e)if(a.debug("dimension is:",b[e].width,"X",b[e].height),0<b[e].width&&0<b[e].height){var f=b[e].width+","+b[e].height;null==d[f]&&(d[f]="",c.push(f))}0<c.length&&(this._compatibleDimensions=c.join("|"))}else a.warn("AdRequest.setVideoDisplayCompatibleSizes:","compatible dimensions required")},setSiteSection:function(b,c,d,e,f){if(b){switch(e){case a.ID_TYPE_FW:this._siteSectionId=b;break;case a.ID_TYPE_GROUP:this._siteSectionId="g"+b;break;default:this._siteSectionCustomId=b}1*c>0&&(this._siteSectionNetworkId=1*c),1*d>0&&(this._siteSectionViewRandom=1*d),1*f>0&&(this._siteSectionFallbackId=1*f)}else a.warn("AdRequest.setSiteSection: id required")},setVisitor:function(b){"string"!=typeof b?a.warn("AdRequest.setVisitor:","customId required"):this._visitorCustomId=b},addTemporalSlot:function(b,c,d,e,f){if(a.Util.isBlank(b)||a.Util.isBlank(c)||0>d)a.warn("AdRequest.addTemporalSlot:","invalid parameters");else{for(var g=0;g<this._temporalSlots.length;g++)if(this._temporalSlots[g].getCustomId()===b)return void a.warn("AdRequest.addTemporalSlot:","slot is already existed, ignored");g=new a.Slot(this._context),g.setCustomId(b),g.setAdUnit(c),g.setTimePosition(d),g.setSlotProfile(e),g.setCuepointSequence(1*f),this._temporalSlots.push(g)}},scanPageSlots:function(){this._slotScanner.scanPageSlots()},generateTypeBRequestUrl:function(){var b=this._context._adManager._serverURL.split("?"),c=b[0],d=[/fwmrm\.net$/,/fwmrm\.net\/$/,/fwmrm\.net\/ad$/,/fwmrm\.net\/ad\/$/,/fwmrm\.net\/ad\/g$/,/fwmrm\.net\/ad\/g\/$/,/fwmrm\.net\/ad\/g\/1$/];if(0===c.indexOf("http://")||0===c.indexOf("https://"))for(var e=0;e<d.length;++e)if(c.match(d[e])){c=c.slice(0,c.indexOf("fwmrm.net")+9)+"/ad/g/1";break}return this.parseQueryStr(b.slice(1).join("?")),b=this.generateGlobalParametersQueryStr()+";"+this.generateKeyValuesStr()+";",this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)&&1==this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)||(b+=this.generateSlotsTypeBStr()),a.Util.isBlank(this._customInfo)||(b+=";"+this._customInfo),c+"?"+b},generateVideoViewRequestUrlWithDummyContextInstanceId:function(b){this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON),this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_ON);var c=this.generateTypeBRequestUrl(),c=a.Util.setParameterInURL(c,"cbfn","tv.freewheel.SDK._instanceQueue['Context_"+b+"']._videoAsset.requestComplete");return a.debug("generateVideoViewRequestUrlWithDummyContextInstanceId():"+c),this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET),this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_UNSET),c},parseQueryStr:function(b){if(a.debug("AdRequest.parseQueryStr("+Array.prototype.slice.call(arguments).join(",")+")"),this._urlParams={},this._urlKeyValues=[],this._customInfo="",b){";"===b.charAt(b.length-1)&&(b=b.substring(0,b.length-1));var c,d,e=b.split(";");if(e[0])for(c=e[0].split("&"),d=0;d<c.length;++d){var f=c[d].split("=");2===f.length&&(this._urlParams[f[0]]=f[1])}if(e[1])for(c=e[1].split("&"),d=0;d<c.length;++d)this._urlKeyValues.push(c[d]);e[2]&&(this._customInfo=e.slice(2).join(";"))}},generateGlobalParametersQueryStr:function(){a.debug("AdRequest.generateGlobalParametersQueryStr");for(var b=this._context.getParameter("wrapperVersion"),b=[["prof",this._playerProfile,"string"],["nw",this._context._adManager._networkId,"number"],["caid",this._context._videoAsset._customId,"string"],["asid",this._context._videoAsset._id,"string"],["vdur",this._context._videoAsset._duration,"number"],["asnw",this._context._videoAsset._networkId,"number"],["asml",this._context._videoAsset._location,"string"],["vprn",this._context._videoAsset._viewRandom,"number"],["afid",this._context._videoAsset._fallbackId,"number"],["csid",this._siteSectionCustomId,"string"],["ssid",this._siteSectionId,"string"],["ssnw",this._siteSectionNetworkId,"number"],["pvrn",this._siteSectionViewRandom,"number"],["sfid",this._siteSectionFallbackId,"number"],["vcid",this._visitorCustomId,"string"],["cd",this._compatibleDimensions||this.detectScreenDimension(),"string"],["vclr",a.version+(b?","+b:""),"string"],["resp",a.PLATFORM_SEND_REQUEST_BY_FORM?"json2":"json","string"],["orig",window.location.protocol+"//"+window.location.host,"string"],["cbfn","tv.freewheel.SDK._instanceQueue['Context_"+this._context._instanceId+"'].requestComplete","string"]],c=0;c<b.length;c++){var d=b[c];switch(d[2]){case"string":a.Util.isBlank(d[1])||(this._urlParams[d[0]]=encodeURIComponent(d[1]));break;case"number":0<d[1]&&(this._urlParams[d[0]]=d[1])}}var e,b="";for(e in this._urlParams)this._urlParams.hasOwnProperty(e)&&(b+=e+"="+this._urlParams[e]+"&");switch(b=b.substring(0,b.length-1),0<this._slotScanner._candidateAds.length&&(null==this._capabilities._capabilities[a.CAPABILITY_CHECK_COMPANION]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_COMPANION,a.CAPABILITY_STATUS_ON),null==this._capabilities._capabilities[a.CAPABILITY_CHECK_TARGETING]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_TARGETING,a.CAPABILITY_STATUS_OFF)),!this._context._videoAsset._eventCallback&&!this._context._videoAsset._requestedVideoViewUrl&&(this._context._videoAsset._id||this._context._videoAsset._customId)&&this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON),b=this._capabilities.parseCapabilities(b),this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET),e="",this._context._videoAsset._autoPlayType){case a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED:e="+play+uapl";break;case a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE:e="-play";break;default:e="+play-uapl"}return b=b.replace(/flag=/,"flag="+encodeURIComponent(e))},generateKeyValuesStr:function(){a.debug("AdRequest.generateKeyValuesStr");for(var b=a.Util.flashVersion(),b=this._keyValues.concat(["_fw_h_x_flash_version="+encodeURIComponent(b),"_fw_dpr="+(void 0===window.devicePixelRatio?"1":window.devicePixelRatio.toFixed(2).toString())]),c=0;c<this._urlKeyValues.length;c++){var d=this._urlKeyValues[c];0>b.indexOf(d)&&b.push(d)}return(c=this._context._adManager._location)&&b.push("ltlg="+encodeURIComponent(Math.round(1e4*c.coords.latitude)/1e4+","+Math.round(1e4*c.coords.longitude)/1e4)),b.join("&")},generateSlotsTypeBStr:function(){a.debug("AdRequest.generateSlotsTypeBStr");for(var b="",c=[],d=0;d<this._temporalSlots.length;d++){for(var e=this._temporalSlots[d],f=[["slid",e.getCustomId(),"string"],["slau",e.getAdUnit(),"string"],["ptgt","a","string"],["tpos",e.getTimePosition(),"number"],["cpsq",e.getCuepointSequence(),"number"],["envp",e.getSlotProfile(),"string"]],g=[],h=0;h<f.length;h++){var i=f[h];switch(i[2]){case"string":a.Util.isBlank(i[1])||g.push(i[0]+"="+encodeURIComponent(i[1]));break;case"number":"cpsq"===i[0]?0<i[1]&&e.getTimePosition()===a.TIME_POSITION_CLASS_MIDROLL&&g.push(i[0]+"="+i[1]):0<=i[1]&&g.push(i[0]+"="+i[1])}}c.push(g.join("&"))}return 0<c.length&&(b=c.join(";")+";"),b+=this._slotScanner.slotsToTypeBStr()},detectScreenDimension:function(){return a.debug("AdRequest.detectScreenDimension:",screen.width+","+screen.height),screen.width+","+screen.height}},a.AdResponse=function(a){this._context=a},a.AdResponse.prototype={},a.AdResponse.prototype.constructor=a.AdResponse,a.Util.mixin(a.AdResponse.prototype,{parse:function(b,c){this._data=b,this._temporalSlots=[],this._videoPlayerNonTemporalSlots=[],this._siteSectionNonTemporalSlots=[],this._profileParameters={},this._ads=[],this._siteSectionCustomId=a.Util.getObject("siteSection.customId",b)||"",this._adRenderers=[];var d,e,f;for(e=a.Util.getObject("parameters",b)||[],d=0;d<e.length;++d)f=e[d],this._profileParameters[f.name]=f.value;for(this._adRenderers=a.Util.getObject("rendererManifest.adRenderers.adRenderer",b)||[],d=0;d<this._adRenderers.length;d++)"undefined"!=typeof this._adRenderers[d].adUnit&&(this._adRenderers[d].baseUnit=this._adRenderers[d].adUnit,delete this._adRenderers[d].adUnit);for(e=a.Util.getObject("ads.ads",b)||[],d=0;d<e.length;++d)f=new a.Ad(this._context),f.parse(e[d]),this._ads.push(f);for(e=a.Util.getObject("siteSection.videoPlayer.videoAsset.adSlots",b)||[],d=0;d<e.length;++d)f=new a.Slot(this._context),f.setType(a.SLOT_TYPE_TEMPORAL),f.setBase(c),f.parse(e[d]),this._temporalSlots.push(f);for(e=a.Util.getObject("siteSection.videoPlayer.adSlots",b)||[],d=0;d<e.length;++d)f=new a.Slot(this._context),f.setType(a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL),f.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),f.parse(e[d]),this._initSlotData(f),this._videoPlayerNonTemporalSlots.push(f);for(e=a.Util.getObject("siteSection.adSlots",b)||[],d=0;d<e.length;++d)f=new a.Slot(this._context),f.setType(a.SLOT_TYPE_SITESECTION_NONTEMPORAL),f.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),f.parse(e[d]),this._initSlotData(f),this._siteSectionNonTemporalSlots.push(f);this._context._videoAsset.parse(a.Util.getObject("siteSection.videoPlayer.videoAsset",b)||{})},getCreativeRendition:function(a,b,c,d){return(a=this.getCreative(a,b))?a.getCreativeRendition(c,d):null},getCreative:function(a,b){var c=this.getAd(a);return c?c.getCreative(b):null},getAd:function(a){for(var b=0;b<this._ads.length;b++){var c=this._ads[b];if(c.getId()===a)return c}return null},getTemporalSlots:function(){return this._temporalSlots},getSiteSectionNonTemporalSlots:function(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots:function(){return this._videoPlayerNonTemporalSlots},getSiteSectionCustomId:function(){return this._siteSectionCustomId},getSlotByCustomId:function(b){for(var c=0;c<this._temporalSlots.length;++c)if(this._temporalSlots[c].getCustomId()===b)return this._temporalSlots[c];for(c=0;c<this._videoPlayerNonTemporalSlots.length;++c)if(this._videoPlayerNonTemporalSlots[c].getCustomId()===b)return this._videoPlayerNonTemporalSlots[c];for(c=0;c<this._siteSectionNonTemporalSlots.length;++c)if(this._siteSectionNonTemporalSlots[c].getCustomId()===b)return this._siteSectionNonTemporalSlots[c];return a.warn("getSlotByCustomId(): not found",b),null},_initSlotData:function(b){for(var c=!1,d=0;d<this._context._adRequest._slotScanner._knownSlots.length;d++){var e=this._context._adRequest._slotScanner._knownSlots[d];if(b.getCustomId()===e.id&&e.element){b.setWidth(e.width),b.setHeight(e.height),b.setBase(e.element),c=!0;break}}return c||a.warn("Failed to init slot "+b.getCustomId()),c}}),a.Capabilities=function(){this._capabilities={},this.init()},a.Capabilities.prototype={init:function(){for(var b=[a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS,a.CAPABILITY_FALLBACK_UNKNOWN_ASSET,a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION,a.CAPABILITY_FALLBACK_ADS,a.CAPABILITY_SLOT_CALLBACK,a.CAPABILITY_NULL_CREATIVE,a.CAPABILITY_AUTO_EVENT_TRACKING,a.CAPABILITY_RENDERER_MANIFEST],c=0;c<b.length;c++)this._capabilities[b[c]]=a.CAPABILITY_STATUS_ON},setCapability:function(a,b){this._capabilities[a]=b},getCapability:function(a){return this._capabilities[a]},parseCapabilities:function(b){var c,d="";for(c in this._capabilities)if(this._capabilities.hasOwnProperty(c)){switch(this._capabilities[c]){case a.CAPABILITY_STATUS_ON:d+="+"+c;break;case a.CAPABILITY_STATUS_OFF:d+="-"+c}b=b.replace(RegExp("(%2B|-|\\+)"+c,"g"),"")}return d=encodeURIComponent(d),b=-1<b.indexOf("flag=")?b.replace(/flag=/,"flag="+d):b+("&flag="+d)}},a.ContentVideoExtension=function(b){function c(){a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_PAUSE_REQUEST pausing content video",k.src),l=k.currentTime,k.pause()}function d(){if(a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_RESUME_REQUEST resume content video",k.src),!j._videoAsset||null!=j._videoAsset._state&&j._videoAsset._state!==a.VIDEO_STATE_COMPLETED){if(a.log("ContentVideoExtension: resume content video"),k.play(),a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL){var b=j.getParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK);null==b&&(b="true"),!1!==a.Util.str2bool(b)&&(m&&(k.removeEventListener("timeupdate",m,!1),m=null),m=function(){if(!(0>=k.currentTime||0>=k.seekable.length)&&(k.removeEventListener("timeupdate",m,!1),m=null,0<k.currentTime&&1>k.currentTime&&l>1)){a.log("ContentVideoExtension: seeking to original time",l);try{k.currentTime=l}catch(b){a.warn("ContentVideoExtension: seek error")}}},k.addEventListener("timeupdate",m,!1))}}else a.warn("ContentVideoExtension: video state is uninitialized or completed, skip resume.")}function e(b){switch(b.slot.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug("ContentVideoExtension: store current content video src",k.src),n=k.src,o=k.controls,k.paused||k.pause()}}function f(b){switch(b=b.slot.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug("ContentVideoExtension: restore content video src to",n),k.src!==n&&(k.src=n),k.controls=o,b===a.TIME_POSITION_CLASS_PREROLL&&k.load()}}function g(b,c){var d=j.getParameter(b);return null==d&&(d=c),a.Util.str2bool(d)}var h=!0,i=!0,j=b,k=b.getContentVideoElement(),l=0,m=null,n=null,o=null;return{start:function(){a.debug("ContentVideoExtension.start()"),h=g(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0),i=g(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,!0),h&&(a.debug("ContentVideoExtension: enabling content video pause resume request handling."),j.addEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,c),j.addEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,d)),i&&(a.debug("ContentVideoExtension: enabling content video source management."),j.addEventListener(a.EVENT_SLOT_STARTED,e),j.addEventListener(a.EVENT_SLOT_ENDED,f))},dispose:function(){a.debug("ContentVideoExtension.dispose()"),j&&(j.removeEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,c),j.removeEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,d),j.removeEventListener(a.EVENT_SLOT_STARTED,e),j.removeEventListener(a.EVENT_SLOT_ENDED,f),k&&m&&(k.removeEventListener("timeupdate",m,!1),m=null),j=null),k=null}}},a._instanceCounter=0,a._instanceQueue={},a.Context=function(b){this._adManager=b,this._adRequest=new a.AdRequest(this),this._adResponse=null,this._videoAsset=new a.VideoAsset(this),this._temporalSlotBase=null,this._videoDisplaySize={},this._globalLevelParameterDictionary={},this._overrideLevelParameterDictionary={},this._rendererManifest={},this._overriddenAdRenderers=[],this._eventDispatcher=new a.EventDispatcher,this._requestState=0,this._adControlExtension=new a.AdControlExtension(this),this._surveyExtension=new a.SurveyExtension(this),this._videoStateExtension=new a.VideoStateExtension(this),this._totalSetDisplaySizeCount=this._autoSetDisplaySizeCount=0,this._instanceId=a._instanceCounter,a._instanceQueue["Context_"+a._instanceCounter]=this,a._instanceCounter++,this._contentVideoAttached=!1,this._currentContentPlayheadTime=0},a.Context.prototype={addRenderer:function(a,b,c,d,e,f,g){this._overriddenAdRenderers.push({url:a,baseUnit:b,contentType:c,creativeApi:f,slotType:d,soAdUnit:e,parameter:g})},setCapability:function(b,c){a.debug("Context.setCapability",b,c),this._adRequest.setCapability(b,c)},addKeyValue:function(b,c){a.debug("Context.addKeyValue",b,c),this._adRequest.addKeyValue(b,c)},setParameter:function(b,c,d){a.debug("Context.setParameter",b,c,d);var e=null;if(d===a.PARAMETER_LEVEL_GLOBAL)e=this._globalLevelParameterDictionary;else{if(d!==a.PARAMETER_LEVEL_OVERRIDE)return;e=this._overrideLevelParameterDictionary}null==c?delete e[b]:e[b]=c},getParameter:function(a){return a?this._overrideLevelParameterDictionary.hasOwnProperty(a)?this._overrideLevelParameterDictionary[a]:this._adResponse&&this._adResponse._profileParameters.hasOwnProperty(a)?this._adResponse._profileParameters[a]:this._globalLevelParameterDictionary.hasOwnProperty(a)?this._globalLevelParameterDictionary[a]:null:null},setVideoState:function(b){a.debug("Context.setVideoState",b),this._videoAsset.setVideoState(b)},registerVideoDisplayBase:function(b){if(a.debug("Context.registerVideoDisplayBase",b),b&&"string"==typeof b)if(this._temporalSlotBase=document.getElementById(b)){var c=this._temporalSlotBase.getElementsByTagName("video");0===c.length?(a.warn("Context.registerVideoDisplayBase","could not get video element from",b),this._temporalSlotBase=null):(this._temporalSlotBase._fw_contentVideo=c[0],this._setVideoDisplaySizeByContentVideo(c[0]),this._startContentVideoExtension())}else a.warn("Context.registerVideoDisplayBase","could not get element",b);else a.warn("Context.registerVideoDisplayBase","id required")},setContentVideoElement:function(b){a.debug("Context.setContentVideoElement()"),b&&b.parentNode?(this._temporalSlotBase=b.parentNode,this._temporalSlotBase._fw_contentVideo=b,this._setVideoDisplaySizeByContentVideo(b),this._startContentVideoExtension()):a.warn("Context.setContentVideoElement","contentVideo and contentVideo.parentNode is required")},getContentVideoElement:function(){return this._temporalSlotBase?this._temporalSlotBase._fw_contentVideo:(a.warn("SlotBase is null"),null)},setVideoDisplaySize:function(b,c,d,e,f){a.debug("Context.setVideoDisplaySize("+Array.prototype.slice.call(arguments).join(",")+")"),this._totalSetDisplaySizeCount++,this._videoDisplaySize={left:b,top:c,width:d,height:e,position:f}},getVideoDisplaySize:function(){function a(a){return a=parseInt(a,10),isNaN(a)&&(a=0),a}return this._videoDisplaySize.left=a(this._videoDisplaySize.left),this._videoDisplaySize.right=a(this._videoDisplaySize.right),this._videoDisplaySize.width=a(this._videoDisplaySize.width),this._videoDisplaySize.height=a(this._videoDisplaySize.height),this._videoDisplaySize},setVideoDisplayCompatibleSizes:function(b){a.debug("Context.setVideoDisplayCompatibleSizes",b),this._adRequest.setVideoDisplayCompatibleSizes(b)},setProfile:function(b){a.debug("Context.setProfile",b),this._adRequest.setProfile(b)},setVideoAsset:function(b,c,d,e,f,g,h,i){a.debug("Context.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+")"),this._videoAsset.setVideoAsset(b,c,d,e,f,g,h,i)},setSiteSection:function(b,c,d,e,f){a.debug("Context.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")"),this._adRequest.setSiteSection(b,c,d,e,f)},setVisitor:function(b){a.debug("Context.setVisitor("+Array.prototype.slice.call(arguments).join(",")+")"),this._adRequest.setVisitor(b)},addTemporalSlot:function(b,c,d,e,f){a.debug("Context.addTemporalSlot("+Array.prototype.slice.call(arguments).join(",")+")"),this._adRequest.addTemporalSlot(b,c,d,e,f)},getTemporalSlots:function(){return this._adResponse?this._adResponse._temporalSlots.slice():[]},getSlotByCustomId:function(a){return this._adResponse?this._adResponse.getSlotByCustomId(a):null},getSlotsByTimePositionClass:function(a){var b=[];if(this._adResponse)for(var c=0;c<this._adResponse._temporalSlots.length;c++)this._adResponse._temporalSlots[c].getTimePositionClass()===a&&b.push(this._adResponse._temporalSlots[c]);return b},submitRequest:function(b){if(a.debug("Context.submitRequest",b),this._requestState)a.warn("Context.submitRequest: request already submitted");else if(a.Util.isBlank(this._adManager._serverURL))a.warn("Context.submitRequest: serverURL is not set");else{this._requestState=1,this._adRequest.scanPageSlots(),this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)&&(a.debug("Context.submitRequest: enabling Safari transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0);var c=this._adManager._serverURL;".js"!==c.substring(c.length-3,c.length)&&(c=this._adRequest.generateTypeBRequestUrl());var d=this;("number"!=typeof b||0>=b||!b)&&(b=5),setTimeout(function(){1===d._requestState&&(a.warn("Context.submitRequest: request timeout"),d.requestComplete(null))},1e3*b),a.log("Context.submitRequest: sending request to",c,"timeout",b),a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(c,this._instanceId,!0),d._onMessagePosted=function(a){"object"==typeof a.data&&a.data.hasOwnProperty("cbfn")&&-1<a.data.cbfn.indexOf("['Context_"+d._instanceId+"']")&&d.requestComplete(a.data.response)},window.addEventListener("message",d._onMessagePosted,!1)):a.Util.pingURLWithScript(c)}},requestComplete:function(b){if(1!==this._requestState)a.warn("ad request complete after timeout"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1});else{if(this._requestState=2,a.debug("Context.requestComplete"),a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var c=document.getElementById("_fw_request_iframe_"+this._instanceId);document.body.removeChild(c)}if(null!==b){for(this._adControlExtension.start(),this._surveyExtension.start(),a._instanceQueue["Context_"+this._instanceId]=null,this._adResponse=new a.AdResponse(this),this._adResponse.parse(b,this._temporalSlotBase),a.log("Ad request succeeded"),this._videoStateExtension.start(),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!0,response:b}),c=this._adResponse.getSiteSectionNonTemporalSlots(),b=0;b<c.length;++b)a.log("Auto play site section nonTemporal slots"),c[b].play();for(c=this._adResponse.getVideoPlayerNonTemporalSlots(),b=0;b<c.length;++b)a.log("Auto play video player nonTemporal slots"),c[b].play()}else a.warn("Ad request failed"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1})}},addEventListener:function(b,c){a.debug("Context.addEventListener",b),this._eventDispatcher.addEventListener(b,c)},removeEventListener:function(b,c){a.debug("Context.removeEventListener",b),this._eventDispatcher.removeEventListener(b,c)},dispatchEvent:function(b,c){if(a.log("Context.dispatchEvent",b),b===a.EVENT_SLOT_STARTED){var d=c.slot.getTimePositionClass();(d===a.TIME_POSITION_CLASS_PREROLL||d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_POSTROLL)&&(this._contentVideoAttached=!0,this._markCurrentContentPlayheadTime())}else b===a.EVENT_SLOT_ENDED&&(d=c.slot.getTimePositionClass(),d===a.TIME_POSITION_CLASS_PREROLL||d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_POSTROLL)&&(this._contentVideoAttached=!1);c=c||{},c.type=b,c.target=this,this._eventDispatcher.dispatchEvent(c)},dispose:function(){if(a.debug("Context.dispose"),this.setVideoState(a.VIDEO_STATE_STOPPED),this._adResponse){this._contentVideoExtension&&(this._contentVideoExtension.dispose(),this._contentVideoExtension=null),this._adControlExtension.dispose(),this._surveyExtension.dispose(),this._videoStateExtension.dispose();for(var b=0,c=this._adResponse._temporalSlots||[];b<c.length;++b){var d=c[b];d._onContentVideoTimeUpdate&&(d.getBase()._fw_contentVideo.removeEventListener("timeupdate",d._onContentVideoTimeUpdate,!1),d._onContentVideoTimeUpdate=null)}}},_markCurrentContentPlayheadTime:function(){var a=this._temporalSlotBase._fw_contentVideo.currentTime;a>0&&(this._currentContentPlayheadTime=a)},_getContentPlayheadTime:function(){var a=-1;return this._contentVideoAttached||(a=this._temporalSlotBase._fw_contentVideo.currentTime),a>0?a:this._currentContentPlayheadTime},_setVideoDisplaySizeByContentVideo:function(a){if(this._autoSetDisplaySizeCount===this._totalSetDisplaySizeCount){var b=a.style.left,c=a.style.top,d=a.offsetWidth?a.offsetWidth:a.style.pixelWidth,e=a.offsetHeight?a.offsetHeight:a.style.pixelHeight,a=a.style.position;this._autoSetDisplaySizeCount++,this.setVideoDisplaySize(b,c,d,e,a)}},_startContentVideoExtension:function(){var b=this.getParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED);null==b&&(b="true"),!1===a.Util.str2bool(b)?a.log("Content Video Extension disabled"):this._temporalSlotBase?(this._contentVideoExtension&&this._contentVideoExtension.dispose(),this._contentVideoExtension=new a.ContentVideoExtension(this),this._contentVideoExtension.start()):a.warn("SlotBase is null")}},a.Context.prototype.constructor=a.Context,a.EventCallback=function(a){this._url=this._name=this._type=null,this._showBrowser=!1,this._trackingUrls=[],this._adInstance=this._slot=null,this._context=a},a.EventCallback.prototype={},a.EventCallback.prototype.constructor=a.EventCallback,a.EventCallback.getEventCallback=function(b,c,d){for(var e,f=0;f<b.length;f++)if(e=b[f],e._name===c&&e._type===d)return e;for(f=0;f<b.length;f++)if(e=b[f],e._type===a.EVENT_TYPE_GENERIC)return(c=a.EventCallback.newEventCallback(e._context,c,d))&&(c._url=e._url,c._slot=e._slot,c._adInstance=e._adInstance,b.push(c)),c;return null},a.EventCallback.newEventCallback=function(b,c,d){var e=null;if(d===a.EVENT_TYPE_GENERIC)e=new a.EventCallback(b);else if(d===a.EVENT_TYPE_ERROR)e=new a.ErrorEventCallback(b);else if(d===a.EVENT_TYPE_CLICK)e=new a.AdClickEventCallback(b);else if(d===a.EVENT_TYPE_STANDARD)e=new a.AdStandardEventCallback(b);else if(c===a.EVENT_SLOT_IMPRESSION||c===a.EVENT_SLOT_END)e=new a.SlotImpressionEventCallback(b);else if(c===a.EVENT_AD_IMPRESSION||c===a.EVENT_AD_IMPRESSION_END)e=new a.AdImpressionEventCallback(b);else if(c===a.EVENT_VIDEO_VIEW)e=new a.VideoViewEventCallback(b);else if(c===a.EVENT_RESELLER_NO_AD)e=new a.ResellerNoAdEventCallback(b);else{if(c!==a.EVENT_AD_FIRST_QUARTILE&&c!==a.EVENT_AD_MIDPOINT&&c!==a.EVENT_AD_THIRD_QUARTILE&&c!==a.EVENT_AD_COMPLETE)return null;e=new a.AdQuartileEventCallback(b)}return e._name=c,e._type=d,e},a.EventCallback.getShortType=function(b){var c="";switch(b){case a.EVENT_TYPE_IMPRESSION:c=a.SHORT_EVENT_TYPE_IMPRESSION;break;case a.EVENT_TYPE_CLICK:c=a.SHORT_EVENT_TYPE_CLICK;break;case a.EVENT_TYPE_STANDARD:c=a.SHORT_EVENT_TYPE_STANDARD;break;case a.EVENT_TYPE_ERROR:c=a.SHORT_EVENT_TYPE_ERROR}return c},a.Util.mixin(a.EventCallback.prototype,{parse:function(a){if(a){this._usage=a.use,this._type=a.type,this._name=a.name,this._url=a.url,this._showBrowser=a.showBrowser,this._trackingUrls=[];for(var b=0,a=a.trackingUrls||[];b<a.length;b++)this._trackingUrls.push(a[b].value)}},copy:function(){var a=new this.constructor(this._context);return a._type=this._type,a._name=this._name,a._url=this._url,a._showBrowser=this._showBrowser,a._trackingUrls=this._trackingUrls.slice(),a._slot=this._slot,a._adInstance=this._adInstance,a},getUrl:function(){var b=this._replaceMacrosInUrl(this._url),b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_ET,a.EventCallback.getShortType(this._type)),b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CN,this._name);return this._adInstance&&0<this._adInstance._creativeRenditionId&&(b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID,this._adInstance._creativeRenditionId)),b},getTrackingUrls:function(){var b=this._trackingUrls;if(this._adInstance){var c=this._type;c===a.EVENT_TYPE_CLICK&&(c=a.EVENT_TYPE_CLICK_TRACKING),b=b.concat(this._adInstance.getExternalEventCallbackUrls(this._name,c))}for(var c=[],d=0;d<b.length;d++){var e=a.Util.trim(this._replaceMacrosInUrl(b[d]));a.Util.isBlank(e)||c.push(e)}return c},process:function(b){b=b||{},this._processTrackingUrls(),a.Util.pingURL(this.getUrl(b))},_processTrackingUrls:function(){this._shouldSkipSendingTrackingAndExternalUrls()||a.Util.pingURLs(this.getTrackingUrls())},_shouldSkipSendingTrackingAndExternalUrls:function(){return!1},_needEmptyCT:function(b){var c=!1;return b&&!0===b[a.INFO_KEY_NEED_EMPTY_CT]&&(c=!0),c},_getAdPlayheadTime:function(){var a=-1;return this._adInstance&&(a=this._adInstance.getPlayheadTime()),a},_getCreativeAssetLocation:function(){var a=null;return this._adInstance&&this._adInstance.getActiveCreativeRendition()&&this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset()&&(a=this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl()),a},_getParameter:function(a){var b=null;return b=this._adInstance?this._adInstance._rendererController.getParameter(a):this._slot?this._slot.getParameter(a):this._context.getParameter(a)},_replaceMacrosInUrl:function(b){if(a.Util.isBlank(b))return b;var b=b.replace(/#(ce?)\{([^\}]+)\}/g,a.Util.bind(this,function(b,c,d){switch(b="ce"===c,c=null,d){case"ad.playheadTime":d=this._getAdPlayheadTime(),c=d>=0?Math.round(d)+"":"";break;case"content.playheadTime":d=this._context._getContentPlayheadTime(),c=d>=0?Math.round(d)+"":"";break;case"creative.assetLocation":c=this._getCreativeAssetLocation();break;default:0===d.indexOf("parameter.")&&(c=this._getParameter(d.substr(10)))}return a.Util.isBlank(c)&&(c=""),b?encodeURIComponent(c):c})),c=a.Util.getParameterInURL(b,a.URL_PARAMETER_KEY_CR);return a.Util.isBlank(c)||(b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(c))),b}}),a.AdClickEventCallback=function(b){a.EventCallback.call(this,b)},a.AdClickEventCallback.prototype=new a.EventCallback,a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback,a.Util.mixin(a.AdClickEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);return b[a.INFO_KEY_URL]&&(a.Util.isParameterInURL(c,a.URL_PARAMETER_KEY_CR)||(c=c+"&"+a.URL_PARAMETER_KEY_CR+"="),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CR,b[a.INFO_KEY_URL])),c},process:function(b){var b=b||{},c=this.getUrl(b),d=!0===this._showBrowser,d=b.hasOwnProperty(a.INFO_KEY_SHOW_BROWSER)?!0===b[a.INFO_KEY_SHOW_BROWSER]:d;b[a.INFO_KEY_URL]&&(d=!0),d&&!a.Util.isBlank(c)?(window.open(c),this._processTrackingUrls()):a.EventCallback.prototype.process.call(this,b)}}),a.AdImpressionEventCallback=function(b){a.EventCallback.call(this,b)},a.AdImpressionEventCallback.prototype=new a.EventCallback,a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback,a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._adInstance.getSlot().isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);return this._name!==a.EVENT_AD_IMPRESSION&&(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick())),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:function(b){a.MODULE_TYPE_TRANSLATOR!==this._adInstance.getRendererController().getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&(a.EventCallback.prototype.process.call(this,b),this._processed=!0)}}),a.AdQuartileEventCallback=function(b){a.EventCallback.call(this,b)},a.AdQuartileEventCallback.prototype=new a.EventCallback,a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback,a.Util.mixin(a.AdQuartileEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick())},process:function(b){this._processed||(a.EventCallback.prototype.process.call(this,b),this._processed=!0)}}),a.AdStandardEventCallback=function(b){a.EventCallback.call(this,b)},a.AdStandardEventCallback.prototype=new a.EventCallback,a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback,a.ErrorEventCallback=function(b){a.EventCallback.call(this,b)},a.ErrorEventCallback.prototype=new a.EventCallback,a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback,a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b),d=b[a.INFO_KEY_ERROR_CODE];d||(d=a.ERROR_UNKNOWN);var e=b[a.INFO_KEY_ERROR_INFO];return e||(e=""),(b=b[a.INFO_KEY_ERROR_MODULE])||(b=""),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CN,d),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_KEY_VALUE,encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_MODULE)+"="+encodeURIComponent(b)+"&"+encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_INFO)+"="+a.PLATFORM_ID+"/"+encodeURIComponent(e))
}}),a.ResellerNoAdEventCallback=function(b){a.EventCallback.call(this,b)},a.ResellerNoAdEventCallback.prototype=new a.EventCallback,a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback,a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{}),a.SlotImpressionEventCallback=function(b){a.EventCallback.call(this,b)},a.SlotImpressionEventCallback.prototype=new a.EventCallback,a.SlotImpressionEventCallback.prototype.constructor=a.SlotImpressionEventCallback,a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._slot.isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl:function(b){return b=a.EventCallback.prototype.getUrl.call(this,b),b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:function(b){a.EventCallback.prototype.process.call(this,b),this._processed=!0}}),a.VideoViewEventCallback=function(b){a.EventCallback.call(this,b)},a.VideoViewEventCallback.prototype=new a.EventCallback,a.VideoViewEventCallback.prototype.constructor=a.VideoViewEventCallback,a.Util.mixin(a.VideoViewEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._processed?a.INIT_VALUE_ZERO:a.INIT_VALUE_ONE},_getCTValue:function(){return this._context._videoAsset.getPlayheadTime()},getUrl:function(b){return b=a.EventCallback.prototype.getUrl.call(this,b),b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_INIT,this._getInitValue()),b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CT,this._getCTValue())},_shouldSkipSendingTrackingAndExternalUrls:function(){return this._processed},process:function(b){a.EventCallback.prototype.process.call(this,b),this._processed=!0}}),a.EventDispatcher=function(){this._listeners={}},a.EventDispatcher.prototype={addEventListener:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},dispatchEvent:function(b){if("string"==typeof b&&(b={type:b}),b.target||(b.target=this),b.type&&this._listeners[b.type]instanceof Array)for(var c=this._listeners[b.type],d=0,e=c.length;e>d;d++)try{c[d]&&c[d].call(this,b)}catch(f){a.warn("EventDispatcher.dispatchEvent",b.type,f)}},removeEventListener:function(a,b){if(this._listeners[a]instanceof Array){var c=this._listeners[a];if(null==b)this._listeners[a]=[];else for(var d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}}}},a.EventDispatcher.prototype.constructor=a.EventDispatcher,a.Hash=function(){this._keys=[],this._dictionary={}},a.Hash.prototype={},a.Hash.prototype.constructor=a.Hash,a.Util.mixin(a.Hash.prototype,{setKeyValue:function(a,b,c){a&&(this._dictionary.hasOwnProperty(a)||(0===c?this._keys.unshift(a):this._keys.push(a)),this._dictionary[a]=b)},move:function(a){for(var b=0;b<this._keys.length;b++){var c=this._keys[b];if(c===a){this._keys.splice(b,1),this._keys.push(c);break}}},getValue:function(a){return this._dictionary[a]}}),a.HTMLAdGenerator={log:function(b){a.log("HTMLAdGenerator	"+b)},getExtension:function(a){return a&&(a=a.match(/^[^?]+\/[^?.]*(\.\w+)+/))?a[a.length-1].slice(1):""},generateAd:function(b,c,d,e,f,g,h){a.HTMLAdGenerator.log("generatorAd("+[].slice.call(arguments,0).join(",")+")");var i=g,j=!1;switch(null==i&&(j=!0,i=a.HTMLAdGenerator.getExtension(b).toLowerCase()),i){case"jpeg":case"jpg":case"gif":case"png":case"image/jpeg":case"image/jpg":case"image/gif":case"image/png":case"image/bmp":i=a.HTMLAdGenerator.generateImageHTML(b,c);break;case"swf":case"application/x-shockwave-flash":i=a.HTMLAdGenerator.generateFlashHTML(b,c,d,e,f);break;case"script":case"js":case"text/javascript":case"text/js_ref":case"application/x-javascript":i=a.HTMLAdGenerator.generateScriptHTML(b,d,e,f);break;case"iframe":case"html":case"htm":case"text/html":case"text/html_doc_ref":case"text/html_lit_nowrapper":case"text/html_doc_lit_mobile":i=a.HTMLAdGenerator.generateIFrameHTML(b,c,d,e,f);break;default:i=j?a.HTMLAdGenerator.generateIFrameHTML(b,c,d,e,f):a.HTMLAdGenerator.generateAd(b,c,d,e,f,null,h)}return"text/html_doc_lit_mobile"===h?a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(i):i},generateImageHTML:function(b,c){a.HTMLAdGenerator.log("generateImageHTML");return c?'<a href="'+c+'" target="_blank"><img src="'+b+'" border="0" /></a>':'<img src="'+b+'" border="0" />'},generateFlashHTML:function(b,c,d,e,f){a.HTMLAdGenerator.log("generateFlashHTML");var g=b;return c&&0<c.length&&(g+=-1===b.indexOf("?")?"?":"&",g+="clickTag="+encodeURIComponent(c)),'<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"WIDTH="'+e+'" HEIGHT="'+f+'" id="'+d+'_external_ad">'+('<PARAM NAME=movie VALUE="'+g+'"/>')+'<PARAM NAME=quality VALUE=high/><PARAM NAME=bgcolor VALUE=#FFFFFF/><PARAM NAME="allowScriptAccess" VALUE="always"/><PARAM NAME="loop" VALUE="true"/>'+('<EMBED src="'+g+'" ')+('quality=high bgcolor=#FFFFFF WIDTH="'+e+'" HEIGHT="'+f+'"NAME="'+d+'_external_video" ALIGN="" TYPE="application/x-shockwave-flash"PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>')},generateIFrameHTML:function(b,c,d,e,f){return a.HTMLAdGenerator.log("generateIFrameHTML"),'<iframe height="'+f+'" width="'+e+'" frameborder="0" scrolling="no" allowtransparency="true" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0" src="'+b+'"></iframe>'},docLitToHTMLLit:function(b,c,d,e){return a.HTMLAdGenerator.log("docLitToHTMLLit"),'<iframe id="_fw_frame_'+c+'" width="'+d+'" height="'+e+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no"></iframe><script language="javascript" type="text/javascript" id="_fw_container_js_'+c+"\">if(!fw_targets) {var fw_targets = [];}var _fw_wr;var fw_scope = document;var fw_content = '"+a.Util.encodeToHex(b)+"';var trgtFrm = fw_scope.getElementById(\"_fw_frame_"+c+'");trgtFrm = (trgtFrm.contentWindow) ? trgtFrm.contentWindow : (trgtFrm.contentDocument.document) ? trgtFrm.contentDocument.document : trgtFrm.contentDocument;fw_targets["'+c+'"] = trgtFrm;if(navigator.userAgent.match(/\\bMSIE\\b/) || navigator.userAgent.match(/\\bOpera\\b/)){trgtFrm.document.open();trgtFrm.document.write(fw_content);setTimeout(function(){fw_close(fw_targets["'+c+'"])}, 7500);} else if (navigator.userAgent.match(/\\bFirefox\\b/)) {if(true && fw_content.length < 2000){var ec = escape(fw_content);var fw_iframe_url = "http://m2.feiwei.tv/g/lib/template/echo.html?s="+ec;fw_scope.getElementById("_fw_frame_'+c+'").src = fw_iframe_url;} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}function fw_close(theFrame){theFrame.document.close();}</script>'},htmlLitToDocLit:function(b){return a.HTMLAdGenerator.log("htmlLitToDocLit"),'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Advertisement</title></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">'+b+"</body></html>"},wrapUnsafeHTML:function(b,c,d,e){return a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(a.HTMLAdGenerator.docLitToHTMLLit(a.HTMLAdGenerator.htmlLitToDocLit(b),c,d,e))},wrapJSCode:function(b,c,d,e){return a.HTMLAdGenerator.wrapUnsafeHTML('<script language="javascript" type="text/javascript">'+b+"</script>",c,d,e)},generateScriptHTML:function(b,c,d,e){return a.HTMLAdGenerator.log("generateScriptHTML"),a.HTMLAdGenerator.wrapUnsafeHTML('<script language="javascript" type="text/javascript" src="'+b+'"></script>',c,d,e)},htmlLitToHTMLDocLitMobile:function(b){return a.HTMLAdGenerator.log("htmlLitToHTMLDocLitMobile"),'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta name = "viewport" content = "initial-scale = 1.0, target-densitydpi = device-dpi" /><title>Advertisement</title><script type="text/javascript">window._fw_page_url = "";</script></head><body style="margin:0px;background-color:transparent;">'+b+"</body></html>"}},a.NullRenderer=function(){},a.NullRenderer.prototype={start:function(b){b.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF),b.handleStateTransition(a.RENDERER_STATE_STARTED),b.handleStateTransition(a.RENDERER_STATE_COMPLETED)},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return-1},getDuration:function(){return-1}},a.NullRenderer.prototype.constructor=a.NullRenderer,a.PageSlotScanner=function(){this._knownSlots=[],this._slots={},this._candidateAds=[]},a.PageSlotScanner.prototype={isSlotDuplicate:function(a){for(var b=0;b<this._knownSlots.length;++b)if(this._knownSlots[b].id===a)return!0;return!1},findPageSlotByScope:function(b){var c=b.document;if(c){var d,e=/(^|\s)_fwph(\s|$)/,f=c.getElementsByTagName("span");for(b._fw_admanager||(b._fw_admanager={}),b._fw_admanager.pageScanState=!0,b=0;b<f.length;++b){var g;if(d=f[b],e.test(d.className)&&(d=d.getAttribute("id"),(g=c.getElementById("_fw_input_"+d))&&!this.isSlotDuplicate(d))&&(g=g.getAttribute("value"))){";"!==g.charAt(g.length-1)&&(g+=";"),g=g.split(";");var h=g[g.length-2],i=!1;-1!==h.search("lo=i")&&(i=!0);var j=!1;-1!==h.search("prct=")&&(j=!0),0>h.search("flag=")&&(h+="&flag="),0>h.search("ptgt=")&&(h="ptgt=s&"+h),g=[];for(var k,l,m,h=h.split("&"),n=0;n<h.length;++n)if(k=h[n].split("="),2===k.length){if(k[1]=decodeURIComponent(k[1]),"ssct"===k[0]){if(j)continue;j=!0,k[0]="prct"}"flag"===k[0]?(-1===k[1].search(/[-\+]cmpn/)&&(k[1]+="+cmpn"),"+"!==k[1].charAt(0)&&"-"!==k[1].charAt(0)&&(k[1]="+"+k[1]),i&&-1===k[1].search("-init")&&(k[1]+="-init"),-1!==k[1].search("-nrpl")&&(k[1]=k[1].replace("-nrpl","+cmpn"))):"w"===k[0]?l=Number(k[1]):"h"===k[0]?m=Number(k[1]):"cana"===k[0]&&this._addCandidateAds(k[1]),k=encodeURIComponent(k[0])+"="+encodeURIComponent(k[1]),g.push(k)}j||g.push("prct="+encodeURIComponent("text/html_doc_lit_mobile,text/html_doc_ref")),(i=c.getElementById("_fw_container_"+d))?(this._slots[d]=g.join("&")+";",this._knownSlots.push({id:d,width:l,height:m,element:i})):a.warn("Failed to find container for slot "+d)}}}},scanPageSlots:function(){for(var b=0;b<window.frames.length;++b)try{a.debug("scanPageSlots in frame",b),this.findPageSlotByScope(window.frames[b])}catch(c){}try{window.parent&&window.parent!==window&&(a.debug("scanPageSlots in parent frame"),this.findPageSlotByScope(window.parent))}catch(d){}try{a.debug("scanPageSlots in current window"),this.findPageSlotByScope(window)}catch(e){}},slotsToTypeBStr:function(){var a,b="";for(a in this._slots)if(this._slots.hasOwnProperty(a)){var c=this._slots[a];-1===c.search("slid=")&&(c="slid="+encodeURIComponent(a)+"&"+c),b+=c,";"!==b.charAt(b.length-1)&&(b+=";")}return b&&(b=b.substring(0,b.length-1)),b},_addCandidateAds:function(a){for(var a=a.split(","),b=0;b<a.length;b++){var c=parseInt(a[b],10);c>0&&this._candidateAds.push(c)}}},a.PageSlotScanner.prototype.constructor=a.PageSlotScanner,a.RendererController=function(b,c){var d=null,e=null,f={},g=a.RendererInitState.instance,h={},i=[],j=0;return{getAdInstance:function(){return c},getContext:function(){return b},getRendererState:function(){return g},processEvent:function(b){var d=b.name;if(d===a.RENDERER_STATE_STARTED||d===a.RENDERER_STATE_COMPLETING||d===a.RENDERER_STATE_COMPLETED||d===a.RENDERER_STATE_FAILED)this.handleStateTransition(d,b.info);else{var e=this._inferEventType(d);e&&(e===a.EVENT_TYPE_CLICK&&b.info&&b.info[a.INFO_KEY_CUSTOM_EVENT_NAME]&&(d=b.info[a.INFO_KEY_CUSTOM_EVENT_NAME]),c.processEvent(d,e,b.info))}},handleStateTransition:function(b,d){switch(b){case a.RENDERER_STATE_STARTED:g.notifyStarted(this);break;case a.RENDERER_STATE_COMPLETING:g.complete(this);break;case a.RENDERER_STATE_COMPLETED:g.complete(this),g.notifyCompleted(this);break;case a.RENDERER_STATE_FAILED:c.getSlot()._clearScheduledAdInstance(),d||(d={}),a.warn("FAIL",d.errorModule,d.errorCode,d.errorInfo);var e=c.processEvent(a.EVENT_ERROR,a.EVENT_TYPE_ERROR,d);if(e||a.debug("No EVENT_ERROR callback found"),d)switch(d[a.INFO_KEY_ERROR_CODE]){case a.ERROR_NO_AD_AVAILABLE:case a.ERROR_3P_COMPONENT:case a.ERROR_PARSE:(e=c.processEvent(a.EVENT_RESELLER_NO_AD,a.EVENT_TYPE_IMPRESSION))||a.debug("No EVENT_RESELLER_NO_AD callback found.")}g.fail(this);break;default:a.debug("Unknown event received",b)}},setCapability:function(a,b){c.setMetr(a,b)},getVersion:function(){return b._adManager.getVersion()},getParameter:function(a){if(!a)return null;if(b._overrideLevelParameterDictionary.hasOwnProperty(a))return b._overrideLevelParameterDictionary[a];if(c.getActiveCreativeRendition()&&"undefined"!=typeof c.getActiveCreativeRendition().getParameter(a))return c.getActiveCreativeRendition().getParameter(a);var d=c._creative;return d&&"undefined"!=typeof d.getParameter(a)?d.getParameter(a):"undefined"!=typeof c.getSlot().getParameter(a)?c.getSlot().getParameter(a):b._adResponse._profileParameters.hasOwnProperty(a)?b._adResponse._profileParameters[a]:b._globalLevelParameterDictionary.hasOwnProperty(a)?b._globalLevelParameterDictionary[a]:f&&f.hasOwnProperty(a)?f[a]:null},getCompanionSlots:function(){for(var a=[],b=c._companionAdInstances,d=0;d<b.length;d++)b[d].isPlaceholder()&&a.push(b[d].getSlot());return a},createNullDrivingAdInstance:function(){var a=c.getSlot().scheduleAdInstance();return a.addCreativeRendition().setContentType("null/null"),a},scheduleAdInstances:function(a){var b,d=[],e=null,a=a||[];if(0===a.length)return d;for(b=0;b<a.length;b++)a[b].getCustomId()===c.getSlot().getCustomId()&&(e=c.getSlot().scheduleAdInstance());if(!e)if(this.isTranslator())e=this.createNullDrivingAdInstance();else{if(!this.isRenderer())return d;e=c}for(var f=0;f<a.length;f++){if(a[f].getCustomId()===c.getSlot().getCustomId())e!==c&&d.push(e);else for(var g=0,j=e._companionAdInstances;g<j.length;g++)if(b=j[g],a[f]===b.getSlot()){if(this.isTranslator())d.push(b);else if(this.isRenderer()&&b.isPlaceholder()){var k=b.cloneForTranslation();e===c&&(h[k]=b),j[g]=k,d.push(k),i.push(k)}break}d.length<=f&&d.push(null)}return d},commitAdInstance:function(){if(this.isRenderer()&&c.isStarted()){for(var b=0;b<i.length;b++){var d=i[b];d&&d.getSlot().playCompanionAds(d)}i=[]}else a.warn("Skipping RendererController.commitAdInstance when called with driving ad not started or completed.")},isRenderer:function(){return d&&a.MODULE_TYPE_RENDERER===d.info()[a.INFO_KEY_MODULE_TYPE]},isTranslator:function(){return d&&a.MODULE_TYPE_TRANSLATOR===d.info()[a.INFO_KEY_MODULE_TYPE]},playable:function(){return g===a.RendererInitState.instance},reset:function(){g=a.RendererInitState.instance},play:function(){for(var a=c.getAllCreativeRenditions()||[],b=null,d=0;d<a.length;d++)if(iter=a[d],b=this._matchRendererClassName(iter)){c.setActiveCreativeRendition(iter);break}0===j&&this._actualPlay(b)},_actualPlay:function(b){(e=a.Util.getObject(b)||a.Util.getObject(t+"."+b))&&(d=new e),d?g.start(this):this.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Renderer class <"+b+"> not found"})},dispatchEvent:function(a,c){b.dispatchEvent(a,c)},requestContentStateChange:function(b){this.dispatchEvent(b?a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST:a.EVENT_CONTENT_VIDEO_RESUME_REQUEST)},getRenderer:function(){return d},setRenderer:function(a){d=a},setRendererState:function(a){g=a},getContentVideoElement:function(){return b.getContentVideoElement()},_restorePlaceholdersForHybrid:function(){if(h&&this.isRenderer()){for(var a=[],b=0;b<c._companionAdInstances.length;b++){var d=c._companionAdInstances[b],e=h[d];a.push(e?e:d)}c._companionAdInstances=a}0<i.length&&this.isRenderer()&&(i=[])},rendererMatch:function(b){return e?e===a.Util.getObject(this._matchRendererClassName(b)):!0},_matchRendererClassName:function(d){function e(a,b,c){if(!b)return!0;if(b=b.split(","),b[b.length-1]||b.pop(),c){for(a=a.toLowerCase(),c=0;c<b.length;c++)if(a==b[c].toLowerCase())return!0;return!1}return 0<=b.indexOf(a)}var g=d.getPrimaryCreativeRenditionAsset().getContentType(),h=d.getContentType(),i=d.getWrapperType(),k=d.getCreativeApi(),d=d.getBaseUnit(),l=c.getSoAdUnit(),m=c.getSlot();if(m.getType(),m=m.getTimePositionClass(),a.Util.isBlank(h)&&a.Util.isBlank(i))return null;var n=b._rendererManifest["*"];if(n||(n=b._rendererManifest[i]),n||(n=b._rendererManifest[h]),!n)for(var o=b._overriddenAdRenderers.concat(b._adResponse._adRenderers),p=0;p<o.length;p++){var q=o[p],r=!q.contentType;r||(i?r=e(i,q.contentType,!0):(g&&(r=e(g,q.contentType,!0)),r||(r=e(h,q.contentType,!0))));var s=!q.creativeApi;if(s||(s=e(k,q.creativeApi)),!(q.baseUnit&&!e(d,q.baseUnit)||q.soAdUnit&&!e(l,q.soAdUnit)||q.slotType&&!e(m.toUpperCase(),q.slotType.toUpperCase()))&&r&&s&&q.url){n=q.url,g=n.indexOf("?"),-1!==g&&(n=n.substring(0,g)),g=n.lastIndexOf("/"),-1!==g&&(n=n.substring(g+1)),g=n.lastIndexOf(".js"),-1!==g&&(n=n.substring(0,g));var u={};if(q.parameter)for(g=[].concat(q.parameter),k=0;k<g.length;k++)if(g[k].hasOwnProperty("name"))u[g[k].name]=g[k].value;else for(var v in g[k])g[k].hasOwnProperty(v)&&(u[v]=g[k][v]);if(a.Util.getObject(t+"."+n)&&(n=t+"."+n),a.Util.getObject(n))f=u,j=0;else{if(j>0)break;var w=this;v=1*this.getContext().getParameter("moduleLoadTimeout")||6e4,j=window.setTimeout(function(){j=-1,w.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Load renderer timeout, URL:"+q.url})},v),a.Util.lazyJavaScriptLoad(q.url,function(){a.log("async load renderer successful, URL:"+q.url),-1===j?a.debug("renderer loaded after timeout. WILL NOT PLAY."):(window.clearTimeout(j),j=0,f=u,w._actualPlay(n))})}break}}return n?n:a.Util.isBlank(i)&&"null/null"===h?t+".NullRenderer":null},_inferEventType:function(b){return b===a.EVENT_ERROR?a.EVENT_TYPE_ERROR:b===a.EVENT_AD_CLICK?a.EVENT_TYPE_CLICK:b===a.EVENT_AD_IMPRESSION||b===a.EVENT_AD_FIRST_QUARTILE||b===a.EVENT_AD_MIDPOINT||b===a.EVENT_AD_THIRD_QUARTILE||b===a.EVENT_AD_COMPLETE||b===a.EVENT_RESELLER_NO_AD?a.EVENT_TYPE_IMPRESSION:b===a.EVENT_AD_PAUSE||b===a.EVENT_AD_RESUME||b===a.EVENT_AD_REWIND||b===a.EVENT_AD_MUTE||b===a.EVENT_AD_UNMUTE||b===a.EVENT_AD_COLLAPSE||b===a.EVENT_AD_EXPAND||b===a.EVENT_AD_MINIMIZE||b===a.EVENT_AD_CLOSE||b===a.EVENT_AD_ACCEPT_INVITATION?a.EVENT_TYPE_STANDARD:null},stop:function(){a.log("RendererController.stop"),j>0&&(j=-1),g.stop(this)}}},a.RenditionSelector=function(a,b,c,d){this._targetByterate=a,this._arWeight=b,this._pxWeight=c,this._conversionFactor=d},a.RenditionSelector.prototype={getBestFitRendition:function(b,c,d){var e=this;if(b.reverse(),b=b.filter(function(b){return b&&b.getPrimaryCreativeRenditionAsset()&&(b.getPrimaryCreativeRenditionAsset().getUrl()||b.getPrimaryCreativeRenditionAsset().getContent())&&a.Util.canPlayVideoType(b.getPrimaryCreativeRenditionAsset().getMimeType())}).sort(function(a,b){return e.getBitrate(a)-e.getBitrate(b)}),!b.length)return null;var f=Number.MAX_VALUE,g=b.filter(function(a){return a=e.getBitrate(a),f=f>a?a:f,a<=e._targetByterate});return g.length||(g=b.filter(function(a){return e.getBitrate(a)<=f})),g.sort(function(a,b){return e.compareVisualMetrics(a,b,c,d)}).pop()},compareVisualMetrics:function(a,b,c,d){var e=this.calculateVisualRatios(a.getWidth(),a.getHeight(),c,d),d=this.calculateVisualRatios(b.getWidth(),b.getHeight(),c,d);if(!e&&d)return-1;if(e&&!d)return 1;if(e&&d){var c=this._conversionFactor*this._arWeight*Math.log(e.arRatio),f=this._pxWeight*Math.log(e.pixelation),e=this._conversionFactor*this._arWeight*Math.log(d.arRatio),d=this._pxWeight*Math.log(d.pixelation),c=this.findDistance(c,f,0,0),e=this.findDistance(e,d,0,0);if(e!=c)return e-c}return a.getPreference()-b.getPreference()},calculateVisualRatios:function(a,b,c,d){if(a>0&&b>0&&c>0&&d>0){var e=a/b,f=c/d;return e>f?d=c/e:c=d*e,{arRatio:e/f,pixelation:a*b/(c*d)}}return null},findDistance:function(a,b,c,d){return isNaN(a)||isNaN(c)||isNaN(b)||isNaN(d)?0/0:Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))},getBitrate:function(a){var b=a.getDuration();return(a=a.getPrimaryCreativeRenditionAsset().getBytes())&&b&&!isNaN(a)&&!isNaN(b)&&a>0&&b>0?8*a/1e3/b:-1}},a.RenditionSelector.prototype.constructor=a.RenditionSelector,a.Slot=function(b){var c,d,e,f,g,h,i="",j=null,k=null,l=null,m=null,n=[],o=[],p={},q=null,r=a.MediaInitState.instance,s=0,t=null,u=!1,v=!1,w=!0,x=[];return{getSlotProfile:function(){return k},setSlotProfile:function(a){k=a},setMediaState:function(a){r=a},setParameter:function(a,b){null===b?delete p[a]:p[a]=b},getParameter:function(a){return a&&p.hasOwnProperty(a)?p[a]:void 0},getAdCount:function(){return n.length},setCustomId:function(a){i=a},getCustomId:function(){return i},setAdUnit:function(a){g=a},getAdUnit:function(){return g},setType:function(a){j=a},getType:function(){return j},setTimePosition:function(a){d=a},getTimePosition:function(){return d},setTimePositionClass:function(a){t=a&&a.toUpperCase()},getTimePositionClass:function(){return t},setWidth:function(a){e=a},getWidth:function(){return t!==a.TIME_POSITION_CLASS_DISPLAY?e?e:b.getVideoDisplaySize().width:e},setHeight:function(a){f=1*a},getHeight:function(){return t!==a.TIME_POSITION_CLASS_DISPLAY?f?f:b.getVideoDisplaySize().height:f},setBase:function(a){c=a},getBase:function(){return c},setCuepointSequence:function(a){h=1*a?1*a:0},getCuepointSequence:function(){return h},getVideoDisplaySize:function(){return b.getVideoDisplaySize()},parse:function(c){if(c){i=c.customId,d=1*c.timePosition,t=c.timePositionClass&&c.timePositionClass.toUpperCase()||t,g=c.adUnit;for(var e,f=0,h=c.eventCallbacks||[];f<h.length;f++){e=h[f];var j=a.EventCallback.newEventCallback(b,e.name,e.type);j&&(j._slot=this,j.parse(e),o.push(j))}for(f=0,h=c.selectedAds||[];f<h.length;f++)e=h[f],c=[],j=new a.AdInstance(b),c.push(j),j._slot=this,j._slotCustomId=i,j._parentAdInstancesGroup=c,j.parse(e),n.push(c)}},getCurrentAdInstance:function(){return l},isPauseSlot:function(){return t===a.TIME_POSITION_CLASS_PAUSE_MIDROLL},play:function(b){t!==a.TIME_POSITION_CLASS_DISPLAY||w?(a.log("Slot.play",t),u=!1,t===a.TIME_POSITION_CLASS_DISPLAY&&1<n.length&&n.splice(0,n.length-1),this._play(b)):(a.log("Slot is invisible. Push the play operation to the queue."),x.push({operation:this.play,argument:b}))},stop:function(){a.log("Slot.stop",t),t===a.TIME_POSITION_CLASS_DISPLAY&&(x=[]),r===a.MediaInitState.instance||r===a.MediaEndState.instance?a.log("Slot.stop, not start or already end, ignore"):(u=!0,l?l.stop():a.warn("Slot.stop, no _currentAdInstance, ignore"))},setVisible:function(b){if(!t===a.TIME_POSITION_CLASS_DISPLAY)a.log("Slot.setVisible is only for display ads.");else if(a.log("Slot.setVisible",b),w!=b&&(w=b))for(;0<x.length;)op=x.pop(),op.operation&&op.operation.call(this,op.argument)},_play:function(a){q=q||a,r.play(this)},onStartPlaying:function(){this._onStartPlaying()},onStartReplaying:function(){this._onStartPlaying()},onCompletePlaying:function(){this._onCompletePlaying()},onCompleteReplaying:function(){this._onCompletePlaying()},playNextAdInstance:function(){a.log("Slot.playNextAdInstance ",t),this._playNextAdInstance()||r.complete(this)},scheduleAdInstance:function(){return m=l.cloneForTranslation()},_clearScheduledAdInstance:function(){m=null},_onStartPlaying:function(){var b=a.EventCallback.getEventCallback(o,a.EVENT_SLOT_IMPRESSION,a.EVENT_TYPE_IMPRESSION);b&&b.process(),this.dispatchSlotEvent(a.EVENT_SLOT_STARTED),this.playNextAdInstance()},dispatchSlotEvent:function(a){v||b.dispatchEvent(a,{slot:this})},_onCompletePlaying:function(){q&&q(),q=null,x=[];var b=a.EventCallback.getEventCallback(o,a.EVENT_SLOT_END,a.EVENT_TYPE_IMPRESSION);b&&b.process(),l=null,this.dispatchSlotEvent(a.EVENT_SLOT_ENDED)},_playNextAdInstance:function(){return u||r!==a.MediaPlayingState.instance&&r!==a.MediaReplayingState.instance?!1:(this._commitScheduledAdInstance(),(l=this._nextPlayableAdInstance())?(l.reset(),l.getRendererController().play(),!0):!1)},_commitScheduledAdInstance:function(){if(m){var a=l._parentAdInstancesGroup.indexOf(l);a>=0&&(m._parentAdInstancesGroup=l._parentAdInstancesGroup,l._parentAdInstancesGroup.splice(a,1,m),m=null)}},_nextPlayableAdInstance:function(){var b=-1;if(l){var c=l._parentAdInstancesGroup,d=c.indexOf(l),b=n.indexOf(c);b>=0&&d>=0&&(l._isImpressionSent||d==c.length-1)&&b++}else b=0;if(0>b||b>=n.length)return null;if(r===a.MediaPlayingState.instance)for(c=n[b],d=0;d<c.length;d++){var e=c[d];if(e.getRendererController().playable())return e}else if(r===a.MediaReplayingState.instance)for(;b<n.length;b++){for(c=n[b],d=0;d<c.length;d++)if(e=c[d],e._isImpressionSent)return e;for(d=0;d<c.length;d++)if(e=c[d],e.getRendererController().getRendererState()!==a.RendererFailedState.instance&&!e._translated)return e}return null},toString:function(){return"[Slot "+i+"]"},getAdInstances:function(){for(var a=[],b=0;b<n.length;++b)for(var c=n[b],d=0;d<c.length;++d){var e=c[d];if(e.isPlayable()){a.push(e);break}}return a},getPlayheadTime:function(){for(var a=0,b=this.getAdInstances(),c=0;c<b.length;++c){if(b[c]===l){b=l.getPlayheadTime(),b>-1&&(a+=b);break}var d=b[c].getDuration();d>-1&&(a+=d)}return s&&a>s&&(a=s),a},getTotalDuration:function(){for(var a=0,b=this.getAdInstances(),c=0;c<b.length;++c){var d=b[c].getDuration();d>-1&&(a+=d)}return s=a},playCompanionAds:function(b){a.log("Slot.playCompanionAds");var c=[];b._parentAdInstancesGroup=c,c.push(b),n.push(c),v=!0,l&&this.stop(),this.play()}}},a.SurveyExtension=function(a){this._context=a,this._surveyPingedIds=[]},a.SurveyExtension.prototype={start:function(){a.log("SurveyExtension.start("+Array.prototype.slice.call(arguments).join(",")+")"),this._onAdStarted=a.Util.bind(this,function(b){if(this._parameters=this._getParameters(),this._parameters.enabled){a.log("SurveyExtension.onAdStarted()");var c=b.adInstance;if(-1<this._surveyPingedIds.indexOf(c.getAdId()))a.log("won't pingback survey since it has been pinged back");else{var d=c._creative.getParameter("_fw_survey_url");if(d)try{a.log("append"+d+" to head");var f=document.getElementsByTagName("head")[0],g=document.createElement("script");g.setAttribute("type","text/javascript"),g.setAttribute("src",d),f.appendChild(g),this._surveyPingedIds.push(c.getAdId())}catch(h){a.warn("Append survey to head",b.type,e)}}}}),this._context.addEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted)},dispose:function(){a.log("SurveyExtension.dispose()"),this._context.removeEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted),this._parameters=this._onAdStarted=null},_getParameters:function(){var b={};return b.enabled="false"!=this._context.getParameter(a.PARAMETER_EXTENSION_SURVEY_ENABLED),a.log(b),b}},a.SurveyExtension.prototype.constructor=a.SurveyExtension,a.Timer=function(a,b){this._lastTickDate=new Date,this._duration=a||-1,this._playheadTime=-1,this._callback=b,this._state=-1},a.Timer.prototype={},a.Timer.prototype.constructor=a.Timer,a.Util.mixin(a.Timer.prototype,{tick:function(){var a=new Date,b=Math.round((a.getTime()-this._lastTickDate.getTime())/1e3);return this._lastTickDate=a,b},start:function(){(2===this._state||-1===this._playheadTime)&&(this._playheadTime=0),this._state=0,this._timeStamp=new Date,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null);var a=this,b=1e3*(this._duration-this._playheadTime);0>b||(this._timeouter=window.setTimeout(function(){a.stop(),a._playheadTime=a._duration,a._callback&&a._callback()},b))},pause:function(){0===this._state&&(this._state=1,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime)},stop:function(){this._state=2,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime},getPlayheadTime:function(){return 0===this._state?(new Date-this._timeStamp)/1e3+this._playheadTime:this._playheadTime},getDuration:function(){return this._duration}}),a.Url=function(b){this._session=this._base="",this._parameters=new a.Hash,this.setString(b)},a.Url.prototype={},a.Url.prototype.constructor=a.Url,a.Util.mixin(a.Url.prototype,{setString:function(b){if(this._string!==b&&b&&(this._string=b,b=b.split("?"),this._base=b[0],this._parameters=new a.Hash,b[1])){var c=b[1].indexOf(";"),d="";for(c>0&&0===b[1].indexOf("session=")?(this._session=b[1].substring(0,c+1),d=b[1].substring(c+1)):d=b[1],b=d.split("&"),d=0;d<b.length;d++){var e=b[d],c=e.indexOf("=");if(!(0>c)){var f=decodeURIComponent(e.substring(0,c)),c=decodeURIComponent(e.substring(c+1));this._parameters.setKeyValue(f,c)}}}},setParameter:function(a,b){this._parameters.setKeyValue(a,b,0),this._string=null},getParameter:function(a){return this._parameters.getValue(a)},toString:function(){if(this._string)return this._string;this._parameters.move("cr",-1);for(var a=this._parameters._keys,b=[],c=0;c<a.length;c++){var d=a[c],e=this._parameters.getValue(d);b.push(encodeURIComponent(d)+"="+encodeURIComponent(e))}return this._string=this._base+"?"+this._session+b.join("&")}}),a.VastTranslator=function(){},a.VastTranslator.prototype={start:function(b){function c(b){a.log("VastTranslator	"+b)}function d(b){a.warn("VastTranslator	"+b)}function e(a,b){if(a)if(a.length&&"string"!=typeof a)for(var c=0;c<a.length;c++)b(a[c].value);else a.value&&b(a.value)}function f(a,b){e(b,function(b){a.push(b)})}function g(b){if(!b)return!1;for(var c=0;c<x.length;c++)if(a.Util.trim(x[c]).toLowerCase()===a.Util.trim(b).toLowerCase())return!0;return!1}function h(b){return b?("string"!=typeof b&&(b=b.toString()),b=a.Util.trim(b),-1<b.indexOf("://")?b:null):null}function i(a){this.code=this.url=null,this.height=this.width=0/0,this.resourceType=this.creativeType=null,this.bitrate=0/0,this.creativeApi=null,this.ad=a,this.clickThrough=null,this.clickTrackings=[],this.customClicks=[],this.creativeData=null}function j(){this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.mute=[],this.unmute=[],this.pause=[],this.rewind=[],this.resume=[],this.replay=[],this.fullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitation=[],this.stop=[]}function k(a){this._impressions=[],this.clickThrough=null,this.clickTrackings=[],this.customClicks=[],this.creativeData=null,this.sequence=-1,this.vastRenditions=[],this.duration=0/0,this.adp=a,this.isDrivingAd=!1}function l(a){k.call(this,a)}function m(a){k.call(this,a)}function n(a){k.call(this,a)}function o(){}function p(a,b,d,e){if(a&&e&&0<e.length){c("augmentCallbacks("+b+", "+d+", "+e+")");for(var f=a.getEventCallbackUrls(b,d),g=0;g<f.length;g++)-1<e.indexOf(f[g])&&(c("augmentCallbacks() url = "+f[g]),e.unshift(f[g]));a.addEventCallbackUrls(b,d,e)}else c("augmentCallbacks("+b+", "+d+", "+e+"), empty callbacks")}function q(b,d){if(c("initErrorTrackings()"),b&&d){for(var e=d.errorTrackings,f=0;f<e.length;f++)-1<e[f].search("[ERRORCODE]")&&(e[f]=e[f].replace("[ERRORCODE]","900"));p(b,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,d.errorTrackings)}}function r(b,d){c("initTrackingEvents()"),d&&b&&(p(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.creativeView),p(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.start),p(b,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.firstQuartile),p(b,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,d.midpoint),p(b,a.EVENT_AD_THIRD_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.thirdQuartile),p(b,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,d.complete),p(b,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,d.mute),p(b,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,d.unmute),p(b,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,d.pause),p(b,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,d.resume),p(b,a.EVENT_AD_REWIND,a.EVENT_TYPE_STANDARD,d.rewind),p(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.fullscreen),p(b,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,d.collapse),p(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.expand),p(b,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,d.stop),p(b,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,d.acceptInvitation))
}function s(b,d,e,f,g){if(c("initClickAndImpressionEvents"),b){if(d&&b.setClickThroughUrl(a.EVENT_AD_CLICK,d),e&&0<e.length&&p(b,a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK_TRACKING,e),f&&0<f.length)for(d=0;d<f.length;d++)f[d].url&&p(b,f[d].id,a.EVENT_TYPE_CLICK_TRACKING,[f[d].url]);g&&p(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,g)}}function t(a,b){if(c("initTemporalAdInstance"),a||d("initTemporalAdInstance: Invalid adInstance"),b.selectedDrivingAd){b.surveyUrl&&a._creative.setParameter("_fw_survey_url",b.surveyUrl);var e=b.selectedDrivingAd,f=b.selectedDrivingRenditions;c("vastRenditions:"+f);for(var h=B===y,i=0;i<f.length;i++){var j,k=f[i],l=a.addCreativeRendition(),m=l.addCreativeRenditionAsset("VAST_CRA",!0);a:switch(j=k.creativeType){case"video/mp4":j="video/mp4-h264";break a;case"video/3gp":j="video/3gpp"}c("initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  "+[k.creativeApi,e.duration,k.width,k.height,k.url,j,k.creativeType]),l.setCreativeApi(k.creativeApi),isNaN(e.duration)||l.setDuration(e.duration),k.width&&!isNaN(k.width)&&l.setWidth(k.width),k.height&&!isNaN(k.height)&&l.setHeight(k.height),k.url&&m.setUrl(k.url),k.code&&m.setContent(k.code),m.setMimeType(k.creativeType),"static"===k.resourceType&&"text/html"===k.creativeType?m.setContentType("text/html_doc_ref"):"application/x-javascript"===k.creativeType||"application/javascript"===k.creativeType?(m.setContentType("text/js_ref"),"VPAID"===k.creativeApi.toUpperCase()&&l.setCreativeApi("VPAID")):"iframe"===k.resourceType?m.setContentType("text/html_doc_ref"):"text/html"===k.creativeType||"text/html_doc_ref"===k.creativeType?m.setContentType("text/html_doc_ref"):"text/html_doc_lit_mobile"===k.creativeType?m.setContentType("text/html_doc_lit_mobile"):h||g(j)?(m.setContentType("text/html_doc_lit_mobile"),m.setUrl(null),m.setContent(u(a,A.getCustomId(),e,k,"text/html_doc_lit_mobile"))):m.setContentType(j),e.creativeData&&0!==e.creativeData.length&&(c("initTemporalAdInstance(), set asset parameter VPAID_creativeData:"+e.creativeData),l.setParameter("VPAID_creativeData",e.creativeData)),h||g(j)||(k=k.bitrate,!isNaN(k)&&k>0&&m.setBytes(1e3*k*e.duration/8))}r(a,e.trackingEvents),q(a,b),s(a,h?f[0].clickThrough:e.clickThrough,e.clickTrackings,e.customClicks,e.impressions)}else{var l=a.addCreativeRendition();l.setContentType("null/null");var m=l.addCreativeRenditionAsset("VAST_CRA",!0);m.setContentType("null/null")}}function u(b,d,e,f,g){return c("getCoadHTML, ad id = "+b.getAdId()),f.url&&0<f.url.length?((e=f.clickThrough)&&0<e.length&&b.setClickThroughUrl(a.EVENT_AD_CLICK,e),b=b.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],a.HTMLAdGenerator.generateAd(f.url,b,d,f.width,f.height,f.creativeType,g)):f.code&&0<f.code.length?"script"===f.resourceType||"text/javascript"===f.resourceType||"text/js_ref"===f.resourceType||"application/x-javascript"===f.resourceType?a.HTMLAdGenerator.wrapJSCode(f.code,d,f.width,f.height):a.HTMLAdGenerator.wrapUnsafeHTML(f.code,d,f.width,f.height):null}function v(b,d,e,f){c("initPageAdInstance ad:"+d.getAdId());var g=e.vastRenditions[0];if(g.url||g.code){var h=d.addCreativeRendition(),i=h.addCreativeRenditionAsset("VAST_CRA",!0);h.setCreativeApi(g.creativeApi),h.setWidth(g.width),h.setHeight(g.height),"static"===g.resourceType&&"text/html"===g.creativeType?(i.setContentType("text/html_doc_ref"),i.setUrl(g.url)):"iframe"===g.resourceType?(i.setContentType("text/html_doc_ref"),i.setUrl(g.url)):"HTML"===g.resourceType?(i.setContentType("text/html_doc_lit_mobile"),i.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(g.code,b.getCustomId(),g.width,g.height))):(i.setContentType("text/html_doc_lit_mobile"),i.setContent(u(d,b.getCustomId(),e,g,"text/html_doc_lit_mobile"))),i.setMimeType("text/html")}else c("initPageAdInstance will add a tracking only companion ad");r(d,e.trackingEvents),q(d,f),s(d,g.clickThrough,g.clickTrackings,g.customClicks,e.impressions)}function w(d){if(200==d.status)if(d.responseXML){var e=(new o).parseAdData(d.responseXML);if(e){if(c("scheduleVastAds"),e&&0!==e.length)if(d=e[0].selectedPackage,e=e[0].redirectPackage,d||e){if(!d&&e){c("scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server"),c("scheduleRedirect");var d=[],f=[];d.push(A),f.push({});for(var g=C,h=e.selectedCompanionAds,i=0;i<g.length;i++){var j=g[i];h&&h[j.getCustomId()]&&(d.push(j),f.push(h[j.getCustomId()]))}for((g=b.scheduleAdInstances(d))&&0<g.length&&(h=g[0],i=h.addCreativeRendition(),i.setWrapperUrl(e.tagUrl),i.setWrapperType(D),r(h,e.getTrackingEventsOfWrapper()),q(h,e),s(h,e.getClickThroughOfWrapper(),e.getClickTrackingsOfWrapper(),e.getCustomClicksOfWrapper(),e.getImpressionOfWrapper())),c("scheduleRedirect, schedule companion for redirect ad ",e),i=1;i<g.length;i++)(h=g[i])&&(j=f[i],j instanceof n&&v(d[i],h,j,e))}else if(d){for(c("scheduleVastAds(), ads returned from vast response, going to schedule them"),d.selectedDrivingAd?(c("scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad"),d.selectedDrivingAd.isDrivingAd=!0):c("scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad"),c("scheduleAdPackage()"),e=[],f=[],e.push(A),d.selectedDrivingAd&&f.push(d.selectedDrivingAd),g=C,h=d.selectedCompanionAds,i=0;i<g.length;i++)j=g[i],h&&h[j.getCustomId()]&&(e.push(j),f.push(h[j.getCustomId()]));if(h=b.scheduleAdInstances(e),0<h.length){for(c("scheduleAdPackage, scheduled "+h.length+" ads"+d.selectedDrivingAd?"":", 1 of it is nullAd for pure companion ad schedule"),d.selectedDrivingAd||c("Driving ad is not selected, will create a dummy null ad."),d.selectedDrivingAd||(e.shift(),t(h.shift(),d)),i=0;i<h.length;i++)if(j=h[i]){var k=f[i];k instanceof n?v(e[i],j,k,d):t(j,d)}!d.selectedDrivingAd&&0<g.length&&0<d.companionAds.length&&0===f.length&&(c("found empty companion slots and companion ads in package, but none of them matches slot size"),b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_UNMATCHED_SLOT_SIZE}))}else c("scheduleAdPackage, no ad scheduled.")}}else c("scheduleVastAds(), no ads from vast response!!!"),b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_NO_AD_AVAILABLE});else c("no ads for scheduleVastAds");b.handleStateTransition(a.TRANSLATOR_STATE_STARTED),b.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_PARSE,errorInfo:G});else 400<=d.status&&b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_IO,errorInfo:G})}var x="image/gif,image/jpeg,image/png,text/html,text/javascript,text/html_doc_ref,text/html_doc_lit_mobile,application/x-javascript,application/javascript".split(","),y=4,z=b.getAdInstance(),A=z.getSlot(),B=function(){if(!A)return 1;switch(A.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return 2;case a.TIME_POSITION_CLASS_OVERLAY:return y;case a.TIME_POSITION_CLASS_DISPLAY:return A&&!A.getBase()?8:1;default:return 1}}(),C=b.getCompanionSlots().filter(function(b){if(!b)return!1;switch(b.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return!1;default:return!0}});c("Checking CompanionSlots, length = "+C.length+", rendererController.getCompanionSlots().length = "+b.getCompanionSlots().length+", AdInstance.getCompanionSlots.length = "+z.getCompanionSlots().length);var D=z.getActiveCreativeRendition().getWrapperType();i.prototype={init:function(a,b,c,d,e,f,g,h){this.log("init("+[].slice.call(arguments,0).join(",")+")"),this.url=a,this.width=1*b,this.height=1*c,this.creativeType=d,this.resourceType=e,this.bitrate=f;var i;if(i=g,i&&0!==i.length){var j="";switch(i.toLowerCase()){case"flashvar":case"flashvars":j="clickTag";break;case"vpaid":j="VPAID";break;default:j=i}i=j}else i="None";this.creativeApi=i,this.code=h||null},log:function(b){a.log("VastTranslator.VastRendition	"+b)},toString:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&"function"!=typeof this[a]&&"ad"!==a&&b.push(a+":"+this[a]);return b.join(",")}},i.prototype.constructor=i,k.prototype={parse:function(b){if(this.log("parse()"),b.Duration)if(b.Duration.value){var c=/(\d+):(\d+):(\d+)/.exec(b.Duration.value);c?this.duration=3600*c[1]+60*c[2]+1*c[3]:this.warn("Failed to parse duration value for creative "+b)}else this.warn("No duration value set for creative "+b);b.VideoClicks&&(b.VideoClicks=[].concat(b.VideoClicks),a.Util.forEachOnArray(b.VideoClicks,function(a){if(a.ClickThrough&&a.ClickThrough.value&&(this.clickThrough=h(a.ClickThrough.value)),a.ClickTracking){a.ClickTracking=[].concat(a.ClickTracking);for(var b=0;b<a.ClickTracking.length;b++){var c=h(a.ClickTracking[b].value);c&&this.clickTrackings.push(c)}}if(a.CustomClick)for(a.CustomClick=[].concat(a.CustomClick),b=0;b<a.CustomClick.length;b++){var d=null;a.CustomClick[b]["@attributes"]&&(d=a.CustomClick[b]["@attributes"].id),(c=h(a.CustomClick[b].value))&&this.customClicks.push({id:d,url:c})}},this)),b.MediaFiles&&b.MediaFiles.MediaFile&&(b.MediaFiles.MediaFile=[].concat(b.MediaFiles.MediaFile),a.Util.forEachOnArray(b.MediaFiles.MediaFile,function(a){var b=h(a.value),c=0/0,d=0/0,e=null,f="None",g=0/0;a["@attributes"]&&(c=a["@attributes"].width||0/0,d=a["@attributes"].height||0/0,e=a["@attributes"].type,f=a["@attributes"].apiFramework||"None",g=a["@attributes"].bitrate||0/0),b&&-1!==b.indexOf(":")?(a=new i(this),a.init(b,c,d,e,"",g,f,null),a.clickThrough=this.clickThrough,this.vastRenditions.push(a),(isNaN(c)||isNaN(d))&&this.log("continue with missing [width,height]"+[c,d])):this.warn("will ignore this mediaFile because some required field is missing [url,width,height]:"+[b,c,d])},this)),b.TrackingEvents&&this.parseTrackingEvents(b.TrackingEvents,this.setTrackingEvents()),b.AdParameters&&(this.log("parse() get a AdParameters:"+b.AdParameters.value),this.creativeData=b.AdParameters.value),b.Companion&&(b.Companion=[].concat(b.Companion),a.Util.forEachOnArray(b.Companion,function(b){var c=null,d=null,e="",f="",j=null,k=null,l=!1;b.CompanionClickThrough&&(f=h(b.CompanionClickThrough.value)),b.StaticResource&&(c=h(b.StaticResource.value),b.StaticResource["@attributes"]&&(d=b.StaticResource["@attributes"].creativeType),e="static"),b.IFrameResource&&(c=h(b.IFrameResource.value))&&(d="text/html_doc_ref",e="iframe"),b.HTMLResource&&(j=b.HTMLResource["#cdata-section"]||"",j=a.Util.trim(j))&&(d="text/html_doc_lit_mobile",e="HTML"),b.TrackingEvents&&(k=b.TrackingEvents);var m=new n(this.adp);if(m.sequence=this.sequence,m.clickThrough=f,k&&m.parseTrackingEvents(k,m.setTrackingEvents()),b["@attributes"]){var k=b["@attributes"].width||0/0,o=b["@attributes"].height||0/0,b=b["@attributes"].apiFramework||"None";if((c&&-1!==c.indexOf(":")||j)&&!isNaN(k)&&!isNaN(o)&&g(d)||this.adp.isWrapper){var p=new i(m);p.init(c,k,o,d,e,0/0,b,j),p.clickThrough=f,m.vastRenditions.push(p)}else l=!0,this.warn("will ignore this rendition because some required fields is missing or incompatible [creativeType,url,code,width,height]:"+[d,c,j,k,o])}else this.adp.isWrapper||(l=!0,this.warn("for InLine ad package, No attributes found for the Companion ads:"+b));l?this.adp.isWrapper&&this.adp.companionAds.push(m):this.adp.companionAds.push(m)},this)),b.NonLinear&&(b.NonLinear=[].concat(b.NonLinear),a.Util.forEachOnArray(b.NonLinear,function(b){var c=null,d=null,e="",f="",j="",k=null,l=!1;b.AdParameters&&(j=b.AdParameters.value),b.NonLinearClickThrough&&(f=h(b.NonLinearClickThrough.value)),b.StaticResource&&(c=h(b.StaticResource.value),b.StaticResource["@attributes"]&&(d=b.StaticResource["@attributes"].creativeType),e="static"),b.IFrameResource&&(c=h(b.IFrameResource.value),d="text/html_doc_ref",e="iframe"),b.HTMLResource&&(k=b.HTMLResource["#cdata-section"]||"",k=a.Util.trim(k),d="text/html_doc_lit_mobile",e="HTML");var n=new m(this.adp);if(n.sequence=this.sequence,n.clickThrough=f,n._trackingEvents=this._trackingEvents,j&&(n.creativeData=j),b["@attributes"]){var j=b["@attributes"].width||0/0,o=b["@attributes"].height||0/0,b=b["@attributes"].apiFramework||"None";if(!c&&!k||isNaN(j)||isNaN(o)||!g(d))l=!0,this.warn("will ignore this rendition because some required fields is missing or incompatible:[creativeType,url,code,width,height]:"+[d,c,k,j,o]);else{var p=new i(n);p.init(c,j,o,d,e,0/0,b,k),p.clickThrough=f,n.vastRenditions.push(p)}}else this.adp.isWrapper||(l=!0,this.warn("for InLine ad package, No attributes found for the NonLinear ads:"+b));this.adp.nonLinearAds.push(n),l?this.adp.isWrapper&&this.adp.nonLinearAds.push(n):this.adp.nonLinearAds.push(n)},this))},parseLinears:function(a){2!=B?this.log("TargetAdType != TARGET_LINEAR, skipping parse"):this.parse(a)},parseNonLinears:function(a){B!==y?this.log("TargetAdType != TARGET_NONLINEAR, skipping parse"):this.parse(a)},parseCompanionAds:function(a){this.parse(a)},setTrackingEvents:function(){return this._trackingEvents||(this._trackingEvents=new j),this._trackingEvents},parseTrackingEvents:function(b,c){this.log("parseTrackingEvents"),b.Tracking&&(b.Tracking=[].concat(b.Tracking),a.Util.forEachOnArray(b.Tracking,function(a){var b=a["@attributes"].event;if(a=h(a.value))switch(b){case"creativeView":case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":case"mute":case"unmute":case"pause":case"resume":case"rewind":case"replay":case"fullscreen":case"expand":case"collapse":case"acceptInvitation":case"stop":c[b].push(a);break;case"close":c.stop.push(a)}},this))},toString:function(){return this.constructor.name+", renditions:"+this.vastRenditions},log:function(b){a.log("VastTranslator."+this.constructor.name+"	"+b)},warn:function(b){a.warn("VastTranslator."+this.constructor.name+"	"+b)}};var E=Object.defineProperty||function(a,b,c){c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)};E(k.prototype,"trackingEvents",{get:function(){return this.log("get trackingEvents()"),this._trackingEvents?this._trackingEvents:this.isDrivingAd?this.adp.trackingEvents:null}}),E(k.prototype,"impressions",{set:function(a){this._impressions=a},get:function(){return this.isDrivingAd?this._impressions.concat(this.adp.impressions):this._impressions}}),k.prototype.constructor=k,l.prototype=new k,l.prototype.constructor=l,m.prototype=new k,m.prototype.constructor=m,n.prototype=new k,n.prototype.getPrimaryRendition=function(){return this.vastRenditions[0]||null},E(n.prototype,"impressions",{get:function(){return 8===B?this._impressions.concat(this.adp.impressions):this._impressions}}),n.prototype.constructor=n;var F=function(){this.impressions=[],this.errorTrackings=[],this.linearAds=[],this.nonLinearAds=[],this.companionAds=[],this.extensions=[],this.tagUrl="",this.isWrapper=!1,this.surveyUrl=null,this.selectedDrivingRenditions=[],this.selectedDrivingAd=null,this.selectedCompanionAds={}};F.prototype={parse:function(a){if(this.log("parse("+a+")"),a)if(a.Creatives&&(this.isWrapper||a.Creatives.Creative)){f(this.impressions,a.Impression),f(this.extensions,a.Extensions),f(this.errorTrackings,a.Error),this.isWrapper&&a.VASTAdTagURI&&(this.tagUrl=a.VASTAdTagURI.value||""),a.Survey&&a.Survey.value&&0<a.Survey.value.length&&(this.surveyUrl=a.Survey.value),a.Creatives.Creative=a.Creatives.Creative?[].concat(a.Creatives.Creative):[];for(var b=0;b<a.Creatives.Creative.length;b++){var c,d=a.Creatives.Creative[b],e=-1;d["@attributes"]&&(e=d["@attributes"].sequence||-1,e*=1),d.Linear?(c=new l(this),c.sequence=e,c.parseLinears(d.Linear),this.linearAds.push(c)):d.NonLinearAds?(c=new m(this),c.sequence=e,c.parseNonLinears(d.NonLinearAds)):d.CompanionAds&&(c=new n(this),c.sequence=e,c.parseCompanionAds(d.CompanionAds))}}else this.warn("parse(): no creative found");else this.warn("parse(): empty adpackage")},testAndUpdatePackageForTemporalSlot:function(a){if(this.log("testAndUpdatePackageForTemporalSlot("+a+")"),a=a?this.linearAds:this.nonLinearAds,1>a.length)return!1;this.log("testAndUpdatePackageForTemporalSlot(), ads.length = "+a.length);var b=!1;if(!b)for(var c=0;c<a.length;c++){var d=this.findRenditionGroupByContentType(a[c]);if(0<d.length){this.log("testAndUpdatePackageForTemporalSlot() : found driving ad and renditions group: "+d),this.selectedDrivingRenditions=d,this.selectedDrivingAd=a[c],b=!0;break}}return b},testAndUpdatePackageForPageSlots:function(a){var b=!1,c=this.companionAds,d=C.slice(0),e=null;if(this.log("testAndUpdatePackageForPageSlots("+a+"), ads are "+c.join(",")+", slots are "+d.join(",")),a){if(e=this.matchAdsToSlots(c,d),0<e.length)for(b=!0,a=0;a<e.length;a++)c=e[a],d=c.ad,this.selectedCompanionAds[c.slot.getCustomId()]=d}else e=this.matchAdsToSlots(c,[A]),1===e.length?(b=!0,this.selectedDrivingAd=e[0].ad):this.selectedDrivingAd=null;return b},renditionFitsInSlot:function(a,b){return a?a.width<=b.getWidth()&&a.height<=b.getHeight():!1},calcDeadSpaceRatio:function(a,b){var c=a.getPrimaryRendition();return c?(this.log("ad w,h  slot w,h"+[c.width,c.height,b.getWidth(),b.getHeight()]),this.renditionFitsInSlot(c,b)?1-c.width*c.height/b.getWidth()*b.getHeight():1):!1},matchAdsToSlots:function(a,b){this.log("matchAdsToSlots(ads="+a.join(",")+", slots="+b.join(",")+")");for(var c=[],d=null,e=null,f=1,g=0;g<a.length;g++)for(var h=a[g],i=0;i<b.length;i++){var j=b[i],k=this.calcDeadSpaceRatio(h,j);f>k&&(d=h,e=j,f=k)}return null!==d&&(c.push({ad:d,slot:e}),a.splice(a.indexOf(d),1),b.splice(b.indexOf(e),1),c=c.concat(this.matchAdsToSlots(a,b))),this.log("matchAdsToSlots: winningAd:"+d+" winningSlot:"+e+" ratio:"+f),c},getAllRenditions:function(a){return a.vastRenditions},findRenditionGroupByContentType:function(b){this.log("findRenditionGroupByContentType:"+b);var c=[];if(b instanceof l&&isNaN(b.duration))return this.warn("findRenditionGroupByContentType(), duration of linear ad is NaN, will not used for scheduling"),c;for(var d=this.getAllRenditions(b),e=0;e<d.length;e++){var f=d[e];if(b instanceof l){if(null==f.creativeType||""==a.Util.trim(f.creativeType)){this.warn("findRenditionGroupByContentType, the contentType "+f.creativeType+" not supported for linearAd");continue}}else if(!g(f.creativeType)){this.warn("findRenditionGroupByContentType, the contentType "+f.creativeType+" not supported for non-linearAd");continue}c.push(f)}return c},formalizeString:function(b){return b?a.Util.trim(b).toLowerCase():""},getAdsByTargetType:function(){this.log("getAdsByTargetType");var a=[];switch(B){case 8:a=this.companionAds;break;case 2:a=this.linearAds;break;case y:a=this.nonLinearAds}for(var b=0;b<a.length;b++)a[b].isDrivingAd=!0;return a},getImpressionOfWrapper:function(){this.log("getImpressionOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d&&d._impressions&&0<d._impressions.length){b=d._impressions;break}}return b||(b=this.impressions),b},getTrackingEventsOfWrapper:function(){this.log("getTrackingEventsOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d&&d._trackingEvents){b=d._trackingEvents;break}}return b},getClickThroughOfWrapper:function(){this.log("getClickThroughOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickThrough&&(b=d.clickThrough);for(var d=d.vastRenditions,e=0;e<d.length;e++){var f=d[e];if(f.clickThrough){b=f.clickThrough;break}}if(b)break}}return b},getClickTrackingsOfWrapper:function(){this.log("getClickTrackingsOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickTrackings&&0<d.clickTrackings.length&&(b=d.clickTrackings);for(var d=d.vastRenditions,e=0;e<d.length;e++){var f=d[e];if(f.clickTrackings&&0<f.clickTrackings.length){b=f.clickTrackings;break}}if(b)break}}return b},getCustomClicksOfWrapper:function(){this.log("getCustomClicksOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.customClicks&&0<d.customClicks.length&&(b=d.customClicks);for(var d=d.vastRenditions,e=0;e<d.length;e++){var f=d[e];if(f.customClicks&&0<f.customClicks.length){b=f.customClicks;break}}if(b)break}}return b},testWrapperForRedirect:function(){return this.log("testAndUpdateWrapperForRedirect()"),this.tagUrl&&0<this.tagUrl.length},log:function(b){a.log("VastTranslator.VastAdPackage	"+b)},warn:function(b){a.warn("VastTranslator.VastAdPackage	"+b)}},F.prototype.constructor=F,o.prototype={getVastVersion:function(a){return this.log("getVastVersion("+a+")"),a?0===a.indexOf("3.")?3:0===a.indexOf("2.")?2:0===a.indexOf("1.")?1:-1:-1},parseAdData:function(c){this.log("parseAdData()");var d,e={};e.selectedPackage=null,e.redirectPackage=null;var f=a.Util.xmlToJson(c);if(f&&f.VAST&&f.VAST.Ad&&f.VAST["@attributes"]&&2===this.getVastVersion(f.VAST["@attributes"].version)){f.VAST.Ad=[].concat(f.VAST.Ad);var g,h=[],c=[];for(d=0;d<f.VAST.Ad.length;d++)g=new F,g.isWrapper=!!f.VAST.Ad[d].Wrapper,g.isWrapper?(g.parse(f.VAST.Ad[d].Wrapper),c.push(g)):(g.parse(f.VAST.Ad[d].InLine),h.push(g));if(f=!1,0===h.length&&0===c.length)return this.log("parseAdData(): no ads from vast response!!!"),[e];for(this.log("parseAdData(): "+h.length+"inline ads, "+c.length+" wrapper ads."),g=null,d=0;d<h.length;d++)if(this.selectUsableAdsForDrivingSlot(h[d])){this.log("parseAdData(): package for driving slot is found!!!"),g=h[d];break}if(d=0<C.length&&z.getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY,g)d&&this.selectUsableAdsCompanionSlots(g)&&this.log("parseAdData(): companion ads are found for companion slots, with driving slot"),e.selectedPackage=g;else if(d){d=!1;for(var i=0;i<h.length;i++)g=h[i],this.selectUsableAdsCompanionSlots(g)&&(this.log("parseAdData(): companion ads are found for companion slots,without driving slot"),e.selectedPackage=g,d=!0);d||(this.log("parseAdData(): companion ads are not found for companion slots,without driving slot"),f=!0)}else this.log("parseAdData(): no usable ads found in vast response!!!"),f=!0;if(f&&0<c.length)for(h=0;h<c.length;h++)if(this.testWrapperForRedirect(c[h])){e.redirectPackage=c[h],this.selectUsableAdsCompanionSlots(c[h])&&this.log("parseAdData(): companion ads are found for wrapper ad");break}return[e]}b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_PARSE})},selectUsableAdsForDrivingSlot:function(a){this.log("selectUsableAdsForDrivingSlot()");var b=!0;switch(B){case 2:b=this.testAndUpdatePackageForTemporalSlot(a,!0);break;case y:b=this.testAndUpdatePackageForTemporalSlot(a,!1);break;case 8:b=this.testAndUpdatePackageForPageSlots(a,!1);break;default:b=!1}return b},selectUsableAdsCompanionSlots:function(a){return this.log("selectUsableAdsCompanionSlots(pk)"),this.testAndUpdatePackageForPageSlots(a,!0)},testAndUpdatePackageForTemporalSlot:function(a,b){return this.log("testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = "+b),a.testAndUpdatePackageForTemporalSlot(b)},testAndUpdatePackageForPageSlots:function(a,b){return this.log("testAndUpdatePackageForPageSlots(pk,isCompanion) isCompanion = "+b),a.testAndUpdatePackageForPageSlots(b)},testWrapperForRedirect:function(a){return this.log("testWrapperForRedirect(pk)"),a.testWrapperForRedirect()},log:function(b){a.log("VastTranslator.VastParser	"+b)},warn:function(b){a.warn("VastTranslator.VastParser	"+b)}};var G=z.getActiveCreativeRendition().getWrapperUrl(),E=z.getActiveCreativeRendition().getWrapperType();if(c("AdInstance.getActiveCreativeRendition().getWrapperUrl()="+G+", getWrapperType()="+E),"external/vast-2"!==E)b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_NO_RENDERER,errorInfo:"wrapperType="+E});else if(G&&0!==G.length){E=b.getParameter("translator.vast.asyncLoad"),E=!0===a.Util.str2bool(E),c("will load vast xml, asyncAjax:"+E);try{var H=new XMLHttpRequest;E?(H.open("GET",G),H.onreadystatechange=function(){4==H.readyState&&w(H)},H.onerror=function(){0==H.status?(d("CORS error"),b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_SECURITY,errorInfo:G})):(d("exception:"+H.statusText),b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorInfo:H.statusText}))},H.send()):(H.open("GET",G,!1),H.send(),w(H))}catch(I){if(E=!1,window.XMLHttpRequestException){if(I instanceof XMLHttpRequestException)switch(I.code){case XMLHttpRequestException.NETWORK_ERR:E=!0}}else I.code===DOMException.NETWORK_ERR&&(d("CORS in IE10"),E=!0);E?(d("CORS error:"+I),b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_SECURITY,errorInfo:G})):(d("exception:"+I),b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorInfo:I}))}}else b.handleStateTransition(a.TRANSLATOR_STATE_FAILED,{errorModule:"VastTranslator",errorCode:a.ERROR_NULL_ASSET,errorInfo:"wrapperUrl="+G})},info:function(){return{moduleType:a.MODULE_TYPE_TRANSLATOR}},log:function(b){a.log("VastTranslator	"+b)},warn:function(b){a.warn("VastTranslator	"+b)},getPlayheadTime:function(){return-1},getDuration:function(){return-1}},a.VastTranslator.prototype.constructor=a.VastTranslator,a.VideoAsset=function(b){this._defaultTimeouts=[5,10,15,30,60,120,180,300],this._context=b,this._internalState=a.MediaInitState.instance,this._eventCallback=this._state="",this._callbackTimer=null,this._requestedVideoViewUrl=this._videoPlayPending=!1,this._dummyInstanceId="",this._delay=0,this._location=this._networkId=this._duration=this._customId=this._id="",this._autoPlayType=a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED,this._viewRandom=this._fallbackId=0},a.VideoAsset.prototype={setVideoAsset:function(b,c,d,e,f,g,h,i){if(b){var j=!1;switch(h){case a.ID_TYPE_FW:j=this._id!=b,this._id=b;break;case a.ID_TYPE_GROUP:j=this._id!="g"+b,this._id="g"+b;break;default:j=this._customId!=b,this._customId=b}j&&(this._eventCallback=""),"number"==typeof c&&(this._duration=Math.round(10*c)/10),1*d>0&&(this._networkId=1*d),"string"==typeof e&&(this._location=e),"number"==typeof f&&(this._autoPlayType=f),1*g>0&&(this._viewRandom=1*g),1*i>0&&(this._fallbackId=1*i),this._videoPlayPending&&this.play()}else a.warn("AdRequest.setVideoAsset","id is required.")},setVideoState:function(b){b===a.VIDEO_STATE_PLAYING?this.play():b===a.VIDEO_STATE_PAUSED||b===a.VIDEO_STATE_STOPPED?this.pause():b===a.VIDEO_STATE_COMPLETED&&this.complete(),this._state=b},callback:function(b){this._eventCallback?this._eventCallback.process():b=!0,b||((b=this._defaultTimeouts.shift())||(b=300),this._callbackTimer=new a.Timer(b,a.Util.bind(this,this.callback)),this._callbackTimer.start())},getPlayheadTime:function(){var a=this._delay;return this._delay=0,a+=this._callbackTimer?this._callbackTimer.getPlayheadTime():0,Math.floor(a)},play:function(){this._context._adManager._serverURL&&this._context._adManager._networkId&&(this._id||this._customId)?this._eventCallback?(this._videoPlayPending=!1,this._internalState.play(this)):this._requestedVideoViewUrl||(this._requestedVideoViewUrl=!0,this.requestForVideoViewCallback(),this._callbackTimer)||(this._callbackTimer=new a.Timer,this._callbackTimer.tick()):(a.warn("Server URL or Network ID or Video Asset id/customId is not set, pend video asset play request."),this._videoPlayPending=!0,this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick()))},pause:function(){this._internalState.pause(this)},complete:function(){this._internalState.complete(this)},onStartPlaying:function(){this.callback()},onStartReplaying:function(){this.callback()},onPausePlaying:function(){this.callback(!0),this._callbackTimer.pause()},onResumePlaying:function(){this._callbackTimer.start()},onCompletePlaying:function(){this.callback(!0),this._callbackTimer.stop(),this._callbackTimer=null,this._eventCallback="",this._requestedVideoViewUrl=!1},onCompleteReplaying:function(){this.onCompletePlaying()},setMediaState:function(a){this._internalState=a},requestForVideoViewCallback:function(){var b=new a.Context(this._context._adManager);b._videoAsset=this,this._dummyInstanceId=b._instanceId;var b=this._context._adRequest.generateVideoViewRequestUrlWithDummyContextInstanceId(b._instanceId),c=this;a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(b,this._dummyInstanceId,!0),c._onMessagePosted=function(a){"object"==typeof a.data&&a.data.hasOwnProperty("cbfn")&&-1<a.data.cbfn.indexOf("['Context_"+this._dummyInstanceId+"']")&&c.requestComplete(a.data.response)},window.addEventListener("message",c._onMessagePosted,!1)):a.Util.pingURLWithScript(b)},requestComplete:function(b){if(this._delay=this._callbackTimer.tick(),this._callbackTimer=null,a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var c=document.getElementById("_fw_request_iframe_"+this._dummyInstanceId);document.body.removeChild(c)}null!==b?(a._instanceQueue["Context_"+this._dummyInstanceId]=null,this.parse(a.Util.getObject("siteSection.videoPlayer.videoAsset",b)||{}),this.play()):a.warn("Failed to get video view callback url.")},parse:function(b){if(b){this._customId=b.customId,this._networkId=parseInt(b.networkId);for(var c=0,d=b.eventCallbacks||[];c<d.length;c++){var b=d[c],e=a.EventCallback.newEventCallback(this._context,b.name,b.type);if(e&&b.name===a.EVENT_VIDEO_VIEW){e.parse(b),this._eventCallback=e,a.debug("Parsed video view url: "+this._eventCallback._url);break}}}}},a.VideoRenderer=function(){this._adVideo=null,this._duration=this._playheadTime=-1,this._dragging=this._stopInvoked=this._isEnded=!1},a.VideoRenderer.prototype={start:function(b){var c=b.getAdInstance(),d=c.getSlot(),e=this,f=!1;if(a.PLATFORM_NOT_SUPPORT_VIDEO_AD)b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"VideoRenderer",errorCode:a.ERROR_DEVICE_LIMIT,errorInfo:d.getTimePositionClass()});else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&d.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"VideoRenderer",errorCode:a.ERROR_DEVICE_LIMIT,errorInfo:"midroll"});else{a.log("VideoRenderer.start",d.getTimePositionClass());var g=d.getBase()._fw_contentVideo,h=d.getVideoDisplaySize().width,i=d.getVideoDisplaySize().height,j=c.getRenderableCreativeRenditions(),k=(h=new a.RenditionSelector(b.getParameter(a.PARAMETER_DESIRED_BITRATE)||1e3,b.getParameter("arWeight")||1,b.getParameter("pxWeight")||1,.2).getBestFitRendition(j,h,i))?h.getPrimaryCreativeRenditionAsset():null;if(!k&&j.length)b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"VideoRenderer",errorCode:a.ERROR_DEVICE_LIMIT,errorInfo:"no compatible asset"});else if(k&&k.getUrl()){c.setActiveCreativeRendition(h),a.log("VideoRenderer.start selected rendition is:",k.getUrl()),b.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);var l=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;l||b.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);var m=a.PLATFORM_EVENT_CLICK,n=a.MOBILE_EVENT_DRAG;a.debug("VideoRenderer","use content video element"),g.controls=!1,this._adVideo=g;var o,p,q=null,r=null,s=null,t=function(b){a.debug("VideoRenderer.checkTimeUpdate timeout"),C(b)},u=function(){r&&(clearTimeout(r),r=null)},v=a.Util.bind(this,function(c){a.debug("onAdVideoBufferEmpty(): Ad video event "+c.type),c=b.getParameter(a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED),null==c||"undefined"==typeof c||!1===a.Util.str2bool(c)||(a.debug("play the ad immediately after the stalled event"),g&&g._fw_videoAdPlaying&&g.play())}),w=a.Util.bind(this,function(c){if(g.paused&&a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED)g.play();else if(!b.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT)){var d=b.getParameter(a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION);null==d&&(d="true"),!1!==a.Util.str2bool(d)&&(a.debug("Ad video event "+c.type),this._dragging?this._dragging=!1:b.processEvent({name:a.EVENT_AD_CLICK}))
}}),x=a.Util.bind(this,function(b){a.debug("Ad video event "+b.type),this._dragging=!0}),y=function(c){if(a.debug("Ad video event "+c.type+" ended: "+g.ended+" playing:"+g._fw_videoAdPlaying),g.ended&&.2>Math.abs(g.duration-g.currentTime)||!g._fw_videoAdPlaying)o=setTimeout(function(){a.warn("Force ad video end bc ad paused with ended = true"),c.type="ended",p(c)},200);else{var d=b.getParameter(a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE);null==d&&(d="true"),!1===a.Util.str2bool(d)?a.debug("Pause controls disabled"):g.controls=!0,u()}},z=function(b){a.debug("Ad video event "+b.type),g.controls=!1},A=!1,B=function(){if(u(),!g.paused){var c=b.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8e3;r=setTimeout(t,c,c+"ms timeout when playing")}A||(A=!0,e._playheadTime=g.currentTime,0>e._playheadTime&&(e._playheadTime=0),q&&(clearTimeout(q),q=null),e._quartileTimerId=setInterval(function(){var c=g.currentTime,d=g.duration;c>0&&(e._playheadTime=c),d>0&&(e._duration=d),"number"!=typeof c||"number"!=typeof d||s||(c>=.25*d&&b.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),c>=.5*d&&b.processEvent({name:a.EVENT_AD_MIDPOINT}),c>=.75*d&&(clearInterval(e._quartileTimerId),e._quartileTimerId=null,b.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})))},1e3),b.handleStateTransition(a.RENDERER_STATE_STARTED))};p=function(c){var d=s;c&&c.type&&(a.debug("Ad video event "+c.type),"error"===c.type&&(a.warn(c.target.src),a.warn(c.target.currentSrc))),u(),q&&(clearTimeout(q),q=null),l&&(g.removeEventListener(m,w,!1),g.removeEventListener(n,x,!1)),o&&(clearTimeout(o),o=null),g.removeEventListener("ended",p,!1),g.removeEventListener("error",p,!0),g.removeEventListener("pause",y,!1),g.removeEventListener("playing",z,!1),g.removeEventListener("timeupdate",B,!1),g.removeEventListener("stalled",v,!1),g.paused||(a.debug("try pausing video before complete"),g.pause()),c&&"error"===c.type&&(d="video error",(c=g.error||c.target.error)&&(d="error:"+c+",code:"+c.code)),d||(e._isEnded=!0),a.log("VideoRenderer.complete"),f||(f=!0,delete g._fw_videoAdPlaying,e._adVideo=null,e._quartileTimerId&&(clearInterval(e._quartileTimerId),e._quartileTimerId=null),d?b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"VideoRenderer",errorInfo:d}):(e._stopInvoked||(b.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),b.processEvent({name:a.EVENT_AD_MIDPOINT}),b.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),b.processEvent({name:a.EVENT_AD_COMPLETE})),e._stopInvoked=!1,b.handleStateTransition(a.RENDERER_STATE_COMPLETED)))};var C=function(b){s=b,a.warn(s),a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT||p()};g._fw_videoAdPlaying=!0;var D=!1,E=function(){if(!D){if(D=!0,l&&(g.addEventListener(m,w,!1),g.addEventListener(n,x,!1)),g.addEventListener("ended",p,!1),g.addEventListener("error",p,!0),g.addEventListener("pause",y,!1),g.addEventListener("playing",z,!1),g.addEventListener("timeupdate",B,!1),g.addEventListener("stalled",v,!1),g.src=k.getUrl(),a.log("VideoRenderer play video ad "+g.src),g.load(),g._fw_fromVideoPool||a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT){var c=b.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3;q=setTimeout(C,c,c+"ms timeout before playing")}a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE&&b.handleStateTransition(a.RENDERER_STATE_STARTED),0<a.PLATFORM_ANDROID_VERSION?(c=b.getParameter(a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY)||100,setTimeout(function(){g.play()},c)):setTimeout(function(){g.play()},100)}};a.VideoRenderer._fw_playedDummyVideo||d.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||/\.webm$/.test(k.getUrl())?E():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug("play dummy video for iOS 3.2-4.1"),g.src="http://127.0.0.1:1/404.mp4",g.load(),g.play(),g._fw_videoAdPlaying=!0,g.addEventListener("error",function(){event.target.removeEventListener("error",arguments.callee,!0),E()},!0),setTimeout(E,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL?500:5e3))}else b.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"VideoRenderer",errorCode:a.ERROR_NULL_ASSET})}},stop:function(){a.debug("VideoRenderer stop"),this._stopInvoked=!0,this._adVideo&&(this._adVideo._fw_videoAdPlaying=!1,this._adVideo.pause())},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){if(this._isEnded&&0<this._duration)return this._duration;if(this._adVideo){var a=this._adVideo.currentTime;if(a>0)return a}return this._playheadTime},getDuration:function(){return this._duration}},a.VideoRenderer.prototype.constructor=a.VideoRenderer,a.VideoStateExtension=function(a){this._context=a},a.VideoStateExtension.prototype={_enabled:function(){var b=this._context.getParameter(a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED);return null==b&&(b="false"),!0===a.Util.str2bool(b)},start:function(){this._enabled()?this._context.setVideoState(a.VIDEO_STATE_PLAYING):a.log("VideoStateExtension is disabled.")},dispose:function(){this._context=null}},a.VideoStateExtension.prototype.constructor=a.VideoStateExtension,a.VPAIDWrapper=function(){this._creative=null,this._timeoutInMs=0,this._eventHandlers={},this._loadIntervalTimer=this._timeoutTimer=null,this._timeoutOperation="",this.timeoutReached=!1},a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable:function(a){return this._creative&&(a=this._creative[a])&&"function"==typeof a?!0:!1},checkVPAIDInterface:function(a){for(var b={passed:!0,missingInterfaces:""},c=a.length-1;c>=0;c--)this._isCreativeFunctionInvokable(a[c])||(b.passed=!1,b.missingInterfaces+=a[c]+" ");return b},loadCreativeAsset:function(b){a.log("loadCreativeAsset("+b+")");var c=document.getElementById("vpaidFrame"),d=document.createElement("iframe");d.id="vpaidFrame",null==c?document.body.appendChild(d):document.body.replaceChild(d,c),d.width=0,d.height=0,d.style.display="none",d.contentWindow.document.write('<script type="text/javascript" src="'+b+'"> </script>'),this._timeoutOperation="loadCreativeAsset",this._waitForTimeout();var e=this;this._loadIntervalTimer=setInterval(function(){var b=document.getElementById("vpaidFrame").contentWindow.getVPAIDAd;b&&"function"==typeof b&&(clearInterval(e._loadIntervalTimer),b=b(),"undefined"==typeof b?a.debug("getVPAIDAd() returns undefined value"):null===b?a.debug("getVPAIDAd() returns null"):(e._creative=b,e._eventHandlers.CreativeAssetLoaded()))},200)},setCallbacksForCreative:function(a,b){for(var c in a)a.hasOwnProperty(c)&&this._creative.subscribe(a[c],c,b)},removeCallbacksForCreative:function(a){for(var b in a)a.hasOwnProperty(b)&&this._creative.unsubscribe(a[b],b)},handshakeVersion:function(b){return a.log("VPAID Creative: handshakeVersion("+b+")"),this._creative.handshakeVersion(b)},initAd:function(b,c,d,e,f,g){a.log("VPAID Creative: initAd()"),this._timeoutOperation="initAd",this._waitForTimeout(),this._creative.initAd(b,c,d,e,f,g)},startAd:function(){a.log("VPAID Creative: startAd()"),this._timeoutOperation="startAd",this._waitForTimeout(),this._creative.startAd()},stopAd:function(){a.log("VPAID Creative: stopAd()"),"startAd"===this._timeoutOperation?(clearTimeout(this._timeoutTimer),this._timeoutOperation="startAd and stopAd"):this._timeoutOperation+="stopAd",this._waitForTimeout(),this._creative.stopAd()},canPauseAd:function(){return this._isCreativeFunctionInvokable("pauseAd")},canResumeAd:function(){return this._isCreativeFunctionInvokable("resumeAd")},pauseAd:function(){this.canPauseAd()&&(a.log("VPAID Creative: pauseAd()"),this._creative.pauseAd())},resumeAd:function(){this.canResumeAd()&&(a.log("VPAID Creative: resumeAd()"),this._creative.resumeAd())},getAdVolume:function(){return this._isCreativeFunctionInvokable("getAdVolume")?this._creative.getAdVolume():-1},getAdExpanded:function(){return this._isCreativeFunctionInvokable("getAdExpanded")?this._creative.getAdExpanded():!1},getAdRemainingTime:function(){return this._isCreativeFunctionInvokable("getAdRemainingTime")?this._creative.getAdRemainingTime():-1},getAdDuration:function(){return this._isCreativeFunctionInvokable("getAdDuration")?this._creative.getAdDuration():-1},getAdLinear:function(){return this._creative.getAdLinear()},getAdCompanions:function(){return this._isCreativeFunctionInvokable("getAdCompanions")?this._creative.getAdCompanions():""},setTimeoutValueInMs:function(a){this._timeoutInMs=a},cancelTimeoutEvent:function(){var a="startAd and stopAd"!==this._timeoutOperation;if(clearTimeout(this._timeoutTimer),!a){this._timeoutOperation="startAd";var b=this;setTimeout(function(){b._eventHandlers.timeout.call()},500)}},addEventListener:function(a,b){this._eventHandlers[a]=b},removeEventListener:function(a){this._eventHandlers[a]=null},_waitForTimeout:function(){if(a.log("Wait for "+this._timeoutOperation+" for "+this._timeoutInMs+"ms"),this._eventHandlers.timeout){var b=this;this._timeoutTimer=setTimeout(function(){b.timeoutReached||(b.timeoutReached=!0),"startAd"===b._timeoutOperation?b.stopAd():("loadCreativeAsset"===b._timeoutOperation&&clearInterval(b._loadIntervalTimer),b._eventHandlers.timeout.call())},this._timeoutInMs)}},getTimeoutOperation:function(){return this._timeoutOperation}},a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper,a.VPAIDRenderer=function(){this.vpaidCreative=this.rendererController=null,this.vpaidVolume=this.vpaidDuration=-1,this.creativeEventCallbacks={},this.isMuted=!1,this.adPlaybackState="",this.creativeTimeoutDelayInMs=1e4,this.vpaidDesiredBitrate=268,this.vpaidViewmode="normal",this.playheadTime=0,this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=this.PLAYER_VPAID_VERSION=2},a.VPAIDRenderer.prototype={},a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer,a.VPAIDRenderer.VastCompanion=function(a,b,c,d){this._width=a,this._height=b,this._apiFramework=c,this._xmlNode=d},a.VPAIDRenderer.VastCompanion.prototype={getWidth:function(){return this._width},getHeight:function(){return this._height},_isValidResource:function(a,b){return"StaticResource"===a&&b["@attributes"].creativeType||"IFrameResource"===a&&b.value||"HTMLResource"===a&&b.value},hasValidRendtions:function(){for(var a in this._xmlNode)if(this._xmlNode.hasOwnProperty(a)&&("StaticResource"===a||"IFrameResource"===a||"HTMLResource"===a))for(var b=[].concat(this._xmlNode[a]),c=b.length-1;c>=0;c--)if(this._isValidResource(a,b[c]))return!0;return!1},translateToAdInstance:function(b){if(this._xmlNode.CompanionClickThrough&&b.setClickThroughUrl(a.EVENT_AD_CLICK,this._xmlNode.CompanionClickThrough.value),this._xmlNode.TrackingEvents){var c=this._xmlNode.TrackingEvents;if(c.Tracking){for(var c=[].concat(c.Tracking),d=[],e=c.length-1;e>=0;e--)"creativeView"===c[e]["@attributes"].event&&d.push(c[e].value);0<d.length&&b.addEventCallbackUrls(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d)}}for(var f in this._xmlNode)if(this._xmlNode.hasOwnProperty(f)&&("StaticResource"===f||"IFrameResource"===f||"HTMLResource"===f))for(c=[].concat(this._xmlNode[f]),e=c.length-1;e>=0;e--)if(this._isValidResource(f,c[e])){var d=c[e],g=b.addCreativeRendition();g.setWidth(this._width),g.setHeight(this._height),g.setCreativeApi("None");var h=g.addCreativeRenditionAsset("VPAIDAsset"+e,!0);h.setContentType("text/html_doc_lit_mobile"),h.setMimeType("text/html");var i=b.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],j=f;"HTMLResource"===j?h.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(d.value,b.getSlot().getCustomId(),this._width,this._height)):("IFrameResource"===j?creativeType="iframe":"StaticResource"===j&&(creativeType=this._xmlNode.creativeType),h.setContent(a.HTMLAdGenerator.generateAd(d.value,i,b.getSlot().getCustomId(),this._width,this._height,creativeType,h.getContentType()))),a.debug("rendtion width: "+g.getWidth()+" height:"+g.getHeight()+" asset content:"+h.getContent())}}},a.VPAIDRenderer.VastCompanion.prototype.constructor=a.VPAIDRenderer.VastCompanion,a.VPAIDRenderer.VastAdSelect=function(){},a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio:function(b,c){var d=b.getWidth(),e=b.getHeight(),f=c.getWidth(),g=c.getHeight(),h=1;return f>=d&&g>=e&&(h=1-d*e/(f*g)),a.debug("computing dead space ratio ("+h+") for slot "+f+"x"+g+" and ad "+d+"x"+e),h},matchAdsWithSlots:function(b,c){a.log("VPAIDRenderer: Matching ads with slots");for(var d=0;d<c.length;++d)c[d].matched=!1;for(var e=[],f=[],d=0;d<b.length;d++)for(var g=0;g<c.length;g++)f.push({ratio:this._getDeadSpaceRatio(b[d],c[g]),adIndex:d,slotIndex:g});for(f.sort(function(a,b){return a.ratio-b.ratio}),d=0;d<f.length&&1!=f[d].ratio;d++){var g=f[d],h=b[g.adIndex],i=c[g.slotIndex];h.matched||i.matched||(a.log("Winning ratio:"+g.ratio+" Winning ad:"+h.getWidth()+"x"+h.getHeight()+" for slot:"+i.getWidth()+"x"+i.getHeight()),e.push({ad:h,slot:i}),h.matched=!0,i.matched=!0)}return e}},a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect,a.Util.mixin(a.VPAIDRenderer.prototype,{_failWithError:function(b,c){this.rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,{errorModule:"VPAIDRenderer",errorCode:b,errorInfo:c}),this.dispose()},onCreativeTimeout:function(){a.log("VPAIDRenderer: onCreativeTimeout()");var b=this.vpaidCreative.getTimeoutOperation();this._failWithError(a.ERROR_TIMEOUT,"loadCreativeAsset"!==b?"Creative function "+b+" timeout":"load creative asset timeout")},onAdVolumeChange:function(){a.log("VPAIDRenderer: onAdVolumeChange()");var b=this.vpaidCreative.getAdVolume();0>b||b>1?a.log("Invalid ad volume value"):this.isMuted&&100*b>2?(this.isMuted=!1,this.rendererController.processEvent({name:a.EVENT_AD_UNMUTE})):!this.isMuted&&2>100*b&&(this.isMuted=!0,this.rendererController.processEvent({name:a.EVENT_AD_MUTE}))},onAdExpandedChange:function(){a.log("VPAIDRenderer: onAdExpandedChange()"),this.rendererController.processEvent(this.vpaidCreative.getAdExpanded()?{name:a.EVENT_AD_EXPAND}:{name:a.EVENT_AD_COLLAPSE})},onAdDurationChange:function(){a.log("VPAIDRenderer: onAdDurationChange(): duration changed to "+this.vpaidCreative.getAdDuration())},onAdClickThru:function(b,c,d){a.log("VPAIDRenderer: onAdClickThru() with url:"+b+" id:"+c+" playerHandles:"+d);var e={name:tv.freewheel.SDK.EVENT_AD_CLICK,info:{}};e.info[a.INFO_KEY_CUSTOM_EVENT_NAME]=c||"",e.info[a.INFO_KEY_SHOW_BROWSER]=!0===d,!0===d?b?(a.log("onAdClickThru(): open window with overrided url"),e.info[a.INFO_KEY_URL]=b):a.log("onAdClickThru(): open window with url booked in MRM UI or VAST clickthru url"):a.log("onAdClickThru(): send click tracking"),this.rendererController.processEvent(e)},onCreativeAssetLoaded:function(){a.log("VPAIDRenderer: onCreativeAssetLoaded()"),this.vpaidCreative.cancelTimeoutEvent();var b=this,c=function(){var c=b.vpaidCreative.handshakeVersion(b.PLAYER_VPAID_VERSION.toFixed(1));return c?parseFloat(c)<b.SUPPORTED_CREATIVE_VPAID_VERSION_MIN?(b._failWithError(a.ERROR_INVALID_VALUE,"Only support creatives with VPAID version >= "+b.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1)),!1):!0:(b._failWithError(a.ERROR_3P_COMPONENT,"Cannot get VPAID version from the creative"),!1)};if(function(){var c=b.vpaidCreative.checkVPAIDInterface("handshakeVersion,initAd,startAd,stopAd,subscribe,unsubscribe,getAdLinear".split(","));return c.passed||b._failWithError(a.ERROR_3P_COMPONENT,"Missing interfaces in the VPAID creative: "+c.missingInterfaces),c.passed}()&&c()){!function(){(param=b.rendererController.getParameter(a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY))&&0<Number(param)&&(b.creativeTimeoutDelayInMs=Number(param)),a.log("initParams(), creative timeout delay in miliseconds:"+b.creativeTimeoutDelayInMs);var c=parseFloat(b.rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE));b.vpaidDesiredBitrate=c>0?c:b.vpaidDesiredBitrate,a.log("initParams(), desired bitrate: "+b.vpaidDesiredBitrate)}(),b.creativeEventCallbacks={AdStarted:b.onAdStarted,AdStopped:b.onAdStopped,AdSkipped:b.onAdSkipped,AdLoaded:b.onAdLoaded,AdLinearChange:b.onAdLinearChange,AdExpandedChange:b.onAdExpandedChange,AdDurationChange:b.onAdDurationChange,AdVolumeChange:b.onAdVolumeChange,AdImpression:b.onAdImpression,AdClickThru:b.onAdClickThru,AdVideoFirstQuartile:b.onAdVideoFirstQuartile,AdVideoMidpoint:b.onAdVideoMidpoint,AdVideoThirdQuartile:b.onAdVideoThirdQuartile,AdVideoComplete:b.onAdVideoComplete,AdUserAcceptInvitation:b.onAdUserAcceptInvitation,AdUserMinimize:b.onAdUserMinimize,AdUserClose:b.onAdUserClose,AdPaused:b.onAdPaused,AdPlaying:b.onAdResumed,AdError:b.onAdError,AdLog:b.onAdLog},b.vpaidCreative.setCallbacksForCreative(b.creativeEventCallbacks,b),this.rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON),this.rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON),this.rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON),this.rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON),this.rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this.rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON),this.rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),(c=this.rendition?this.rendition.getParameter("VPAID_creativeData"):null)&&(c=a.Util.trim(c));var c={AdParameters:c},d=this.rendererController.getAdInstance().getSlot(),e={slot:d.getBase(),videoSlot:this.rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0},f=d.getWidth(),d=d.getHeight();f&&d||!this.rendition||(f=this.rendition.getWidth,d=this.rendition.getHeight),this.vpaidCreative.initAd(f,d,this.vpaidViewmode,this.vpaidDesiredBitrate,c,e)}},onAdLoaded:function(){a.log("VPAIDRenderer: onAdLoaded()"),this.vpaidCreative.cancelTimeoutEvent(),a.log("Ad duration:"+this.getDuration());var b=this,c=function(c,d){if(a.debug(d.length+" companion slots to fill."),0!==d.length&&0!==c.length){var e=(new a.VPAIDRenderer.VastAdSelect).matchAdsWithSlots(c,d);if(0!==e.length){for(var c=[],d=[],f=e.length-1;f>=0;f--)c.push(e[f].ad),d.push(e[f].slot);for(e=b.rendererController.scheduleAdInstances(d),f=e.length-1;f>=0;f--)c[f].translateToAdInstance(e[f])}}},d=function(b){if(!b)return a.log("The adCompanions property is empty."),null;if(a.log("parsing adCompanions: "+b),xmlDoc=null,window.DOMParser?xmlDoc=(new DOMParser).parseFromString(b,"text/xml"):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async=!1,xmlDoc.loadXML(b)),b=a.Util.xmlToJson(xmlDoc),!b||!b.CompanionAds||!b.CompanionAds.Companion)return a.log("No companion ads found in parsed xml"),[];for(var b=[].concat(b.CompanionAds.Companion),c=[],d=b.length-1;d>=0;d--){var e=b[d];if(e["@attributes"]){var f=e["@attributes"].width,g=e["@attributes"].height;if(!f||!g||0>f||0>g)a.log("Missing width/height for companion.");else{var h=e["@attributes"].apiFramework||"";a.debug("Companion "+f+"x"+g+" api:"+h),e=new a.VPAIDRenderer.VastCompanion(f,g,h,e),e.hasValidRendtions()&&c.push(e)}}}return c}(b.vpaidCreative.getAdCompanions());d&&0<d.length?c(d,this.rendererController.getCompanionSlots()):a.log("VPAIDAdRenderer: No companions from VPAID creative."),this.vpaidCreative.startAd()},onAdStarted:function(){a.log("VPAIDRenderer: onAdStarted()"),this.vpaidCreative.timeoutReached?a.log("VPAID ad has already failed due to timeout. The AdStarted event will not be handled."):this.vpaidCreative.cancelTimeoutEvent()},onAdStopped:function(){a.log("VPAIDRenderer: onAdStopped()"),this.vpaidCreative.cancelTimeoutEvent(),this.timePositionClass===a.TIME_POSITION_CLASS_OVERLAY&&this.vpaidCreative.getAdLinear()&&this.rendererController.requestContentStateChange(!1),this.vpaidCreative&&!this.vpaidCreative.timeoutReached&&(this.rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED),this.dispose())},onAdImpression:function(){if(a.log("VPAIDRenderer: onAdImpression()"),this.vpaidCreative.timeoutReached)a.log("VPAID ad has already failed due to timeout. The AdImpression event will not be handled.");else{var b=this.vpaidCreative.getAdVolume();this.isMuted=b>0&&2>=100*b,this.adPlaybackState="playing",this.rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)}},onAdLinearChange:function(){a.log("VPAIDRenderer: onAdLinearChange()");var b=this.vpaidCreative.getAdLinear();a.log(b?"onAdLinearChange(): non-linear click to linear -> request content video to pause":"onAdLinearChange(): linear back to non-linear -> request content video to resume"),this.rendererController.requestContentStateChange(b)},onAdPaused:function(){a.log("VPAIDRenderer: onAdPaused()"),"playing"===this.adPlaybackState&&this.rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this.adPlaybackState="paused"},onAdResumed:function(){a.log("VPAIDRenderer: onAdResumed()"),"paused"===this.adPlaybackState&&this.rendererController.processEvent({name:a.EVENT_AD_RESUME}),this.adPlaybackState="playing"},onAdSkipped:function(){a.log("VPAIDRenderer: onAdSkipped()"),this.dispose(),this.rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},onAdVideoFirstQuartile:function(){a.log("VPAIDRenderer: onAdVideoFirstQuartile()"),this.rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint:function(){a.log("VPAIDRenderer: onAdVideoMidpoint()"),this.rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},onAdVideoThirdQuartile:function(){a.log("VPAIDRenderer: onAdVideoThirdQuartile()"),this.rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},onAdVideoComplete:function(){a.log("VPAIDRenderer: onAdVideoComplete"),this.rendererController.processEvent({name:a.EVENT_AD_COMPLETE})},onAdUserAcceptInvitation:function(){a.log("VPAIDRenderer: onAdUserAcceptInvitation()"),this.rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose:function(){a.log("VPAIDRenderer: onAdUserClose()"),this.rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize:function(){a.log("VPAIDRenderer: onAdUserMinimize()"),this.rendererController.processEvent({name:a.EVENT_AD_MINIMIZE})},onAdLog:function(b){a.log("VPAIDRenderer: onAdLog: "+b)},onAdError:function(b){a.log("VPAIDRenderer: onAdError(): "+b),this._failWithError(a.ERROR_3P_COMPONENT,"AdError event:"+b)},start:function(b){var c;a.log("VPAIDRenderer start()"),this.rendererController=b,this.timePositionClass=b.getAdInstance().getSlot().getTimePositionClass(),c=(this.rendition=b.getAdInstance().getActiveCreativeRendition())?this.rendition.getPrimaryCreativeRenditionAsset():null,(b=(b=c)?b.getUrl():null)?(this.vpaidCreative=new a.VPAIDWrapper,this.vpaidCreative.setTimeoutValueInMs(this.creativeTimeoutDelayInMs),this.vpaidCreative.addEventListener("timeout",this.onCreativeTimeout.bind(this)),this.vpaidCreative.addEventListener("CreativeAssetLoaded",this.onCreativeAssetLoaded.bind(this)),this.vpaidCreative.loadCreativeAsset(b)):this._failWithError(a.ERROR_NULL_ASSET,"Creative asset url cannot be null")},stop:function(){a.log("VPAIDRenderer stop()"),this.vpaidCreative.stopAd()},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){var a=this.vpaidCreative.getAdDuration(),b=this.vpaidCreative.getAdRemainingTime();return a>=0&&b>=0&&(this.playheadTime=a-b),0>this.playheadTime&&(this.playheadTime=-1),this.playheadTime},getDuration:function(){var a=this.vpaidCreative.getAdDuration();return a>=0?a:-1},pause:function(){a.log("VPAIDRenderer pause()"),this.rendererController.processEvent({name:a.EVENT_AD_PAUSE}),this.vpaidCreative.canPauseAd()?"playing"==this.vpaidCreative.adPlaybackState&&(this.adPlaybackState="pausing",this.vpaidCreative.pauseAd()):a.log("The creative is not able to pause")},resume:function(){a.log("VPAIDRenderer resume()"),this.rendererController.processEvent({name:a.EVENT_AD_RESUME}),this.vpaidCreative.canResumeAd()?"paused"==this.vpaidCreative.adPlaybackState&&(this.adPlaybackState="resuming",this.vpaidCreative.resumeAd()):a.log("The creative is not able to resume")},dispose:function(){a.log("VPAIDRenderer dispose()"),this.vpaidCreative&&(this.vpaidCreative.removeCallbacksForCreative(this.creativeEventCallbacks),this.vpaidCreative.removeEventListener("timeout"),this.vpaidCreative=null)}}),a},t.tv.freewheel.SDK||(t.tv.freewheel.SDK=t.tv.freewheel[O]("tv.freewheel.SDK")),t}(),function(){function a(){q=!0;for(var a=0;a<w.length;a++)w[a].ggJsLoaded()}function b(){function a(a){mb.CS[a]=0,mb.PA[a]=0,mb.PL[a]=0,mb.SA[a]=0,mb.FA[a]=0,mb.FP[a]=0,mb.SI[a]=0,mb.MI[a]=0,mb.SR[a]=0,mb.SK[a]=0,mb.CI[a]=0,mb.DI[a]=0,mb.ER[a]=0,mb.SV[a]=0,mb.SH[a]=0,mb.PB[a]=0,mb.II[a]=0,mb.VL[a]=0,mb.PM[a]=0}function b(a,b){var c=Number(a),d=Number(b);return d>c?-1:c==d?0:1}function c(){bX=P.split(",");var a=0;for(a=0;a<bX.length;a++)if(isNaN(bX[a])){var c=bX[a].split("%");bX[a]=isNaN(c[0])?0:Number(c[0])*mb.VL[bb]/100}for(bX.sort(b),a=bX.length;--a>0;)for(;bX[a]==bX[a-1];)bX.splice(a-1,1);0==bX[0]&&bX.splice(0,1)}function d(a,b){var c;c=1==b?G:F;var d=-1,e=-1;return d=c.indexOf("<"+a+">"),d>=0&&(d+=a.length+2,e=c.indexOf("</"+a+">",d)),d>=0&&e>d?c.substring(d,e):null}function f(a){var b;if(1==s);else{if(b="",db.prod.indexOf("iag")>=0&&(b=cb?U:T,2==a?b+="&pr=iag.cp,cep":1==a?b="":b+="&pr=iag.cp,soc"),db.prod.indexOf("vc")>=0)if(1==a)b="&ig=1";else{var c=d("censuscategory",cb);null!=c&&""!=c&&(b+="&cg="+escape(c)),cb&&(b+="&c3=st,a"),b+="&tl="+escape("dav"+a+"-"+mb.Title[cb].substr(0,128))}else if(db.prod.indexOf("sc")>=0){var c=d("censuscategory",cb);if(null!=c&&""!=c&&(b+="&cg="+escape(c)),cb&&(b+="&c3=st,a"),b+="&ou="+escape(Y.substr(0,128)),0==a)mb.VL[cb]>0&&(b+="&sd="+Math.round(mb.VL[cb]));else{var e=Math.round(mb.PM[cb]);b+="&du="+e}1!=a&&(b+=cb?W:V),b+="&tl="+escape("dav"+a+"-"+mb.Title[cb].substr(0,128))}b+="&tp=gg"}return b}function g(a,b,c){var e=d("iag_"+a,c);return null!=e&&""!=e?"&pr=iag."+a+","+escape(e):null==b?"":b}function i(a,b,c,e,f){var h;if(db.prod.indexOf("iag")>=0){h="";var i,j,k,l,m,n,o,p,q,r,s;if(a){if(U="",2==db.iagads)return}else if(T="",2==db.iagcontent)return;if(void 0!=db.sid&&(i="&pr=iag.sid,"+db.sid),void 0!=db.tfid&&(j="&pr=iag.tfid,"+db.tfid),k="&pr=iag.bcr,"+db.clientid,0==a||"preroll"!=c){var t=d("iagcategory",0);(null==t||""==t)&&(t=d("category",0)),l=null!=t&&""!=t?"&pr=iag.pgm,"+escape(t):"&pr=iag.pgm,general",t=d("title",0),m=null!=t&&""!=t?"&pr=iag.epi,"+escape(t):"&pr=iag.epi,"+escape(mb.Title[0].substr(0,255)),n="&pr=iag.seg,",n+=f>1?escape(f):"1",t=d("pd",0),null==t&&(t=db.pd),o=null!=t&&""!=t?"&pr=iag.pd,"+escape(t):"",t=d("oad",0),p=null!=t&&""!=t?"&pr=iag.oad,"+escape(t):"",l=g("pgm",l,0),m=g("epi",m,0)}a?(q="&pr=iag.brn,"+db.clientid,r="&pr=iag.cte,"+escape(b),s="midroll"==c?"&pr=iag.ap,mid":"postroll"==c?"&pr=iag.ap,post":"&pr=iag.ap,pre",k=g("bcr",k,a),q=g("brn",q,a),l=g("pgm",l,a),m=g("epi",m,a),n=g("seg",n,a),o=g("pd",o,a),p=g("oad",p,a),U=i+j+k+l+m+n+o+q+s+r):T=i+j+k+l+m+n+o+p}}function k(a){var b;if(db.prod.indexOf("sc")>=0){b="",a?W="":V="";var c;c=1==a?G:F;for(var d,e,f,g,h=0,i=!1;0==i;){if(h=c.indexOf("<ggxp_",h),0>h){i=!0;break}if(d=c.indexOf(">",h),0>d){i=!0;break}if(f=c.substring(h+6,d),e=c.indexOf("</",d+1),0>e){i=!0;break}g=c.substring(d+1,e),h=e+7;var j=escape(f);j.indexOf("%")<0&&(f.length>32&&(f=f.substring(0,31)),g.length>128&&(g=g.substring(0,127)),b+="&"+f+"="+escape(g))}a?W=b:V=b}}function l(a){var b=f(a);y.report(u(),a,b),J=0,nb=a}function m(){if(2!=nb){var a=f(2);y.bp(a)}}function n(){var a=!1;try{{window.top.document.hasFocus()}}catch(b){a=!0}return a&&(window.top.addEventListener?window.top.addEventListener("focus",o,!1):window.top.attachEvent&&window.top.attachEvent("onfocus",o),window.top.addEventListener?window.top.addEventListener("blur",p,!1):window.top.attachEvent&&window.top.attachEvent("onblur",p)),a}function o(){z=!0}function p(){z=!1}function q(){L=!1,mb.FA[0]=mb.FA[1]=0,mb.FP[0]=mb.FP[1]=0}function r(a){var b,c="",d=bb;return b=mb.FP[d]>0&&1==L?Math.round(100*mb.FA[d]/mb.FP[d]):100,c=null!=a&&""!=a?a:mb.PL[d],c+=","+b,Number(mb.PM[d])<a&&(mb.PM[d]=a),c}function u(){var a="NA";return(M>0||N>0)&&(a=Math.round(100*M/(M+N))+"%",K&&(a="u"+a)),a}function v(a){try{return xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="false",xmlDoc.loadXML(a),xmlDoc}catch(b){try{return bv=new DOMParser,xmlDoc=bv.parseFromString(a,"text/xml")}catch(b){alert(b.message)}}return null}var w,x,y,z,A,B,C,D,E,F,G,H,I="3.53",J=0,K=!1,L=!1,M=0,N=0,O=5,P="",Q=1300,R=0,S=0,T="",U="",V="",W="",X="",Y="",Z=0,$=!1,_=10,ab="0",bb=0,cb=0,db=new Array,eb=0,fb=-1,gb=0,hb=0,ib=0,jb=0,kb=0,lb=0,mb=new Object,nb=2;mb.CS=new Array(2),mb.PA=new Array(2),mb.PL=new Array(2),mb.SA=new Array(2),mb.FA=new Array(2),mb.SI=new Array(2),mb.SR=new Array(2),mb.SK=new Array(2),mb.CI=new Array(2),mb.DI=new Array(2),mb.ER=new Array(2),mb.SV=new Array(2),mb.SH=new Array(2),mb.PB=new Array(2),mb.II=new Array(2),mb.VL=new Array(2),mb.PM=new Array(2),mb.FP=new Array(2),mb.MI=new Array(2),mb.Title=new Array(2);var ob=this;this.bT=function(){return mb},this.getgp=function(){return db},this.bL=function(){return Y},this.dk=function(){return cb},this.bC=function(){var a;try{a=window.top.document.hasFocus()}catch(b){a=z}1==a&&(L=!0),1==eb&&(1==a&&(mb.FA[bb]+=1),mb.FP[bb]+=1)},this.init=function(a,b,c,d){ab=b;for(var f=v("<vi>"+d+"</vi>"),g=f.firstChild.firstChild,i=0;void 0!=g&&20>i;)null!=g.firstChild&&(db[g.nodeName]=g.firstChild.nodeValue),g=g.nextSibling,i++;1!=s&&(c=void 0==db.sfcode||2!=db.sfcode.length?"//secure-us.imrworldwide.com/cgi-bin/m?":"//secure-"+db.sfcode+".imrworldwide.com/cgi-bin/m?",c+="ci="+db.clientid,void 0!=db.cisuffix&&""!=db.cisuffix&&(c+=db.cisuffix),void 0!=db.vcid&&""!=db.vcid&&(c+="&c6=vc,"+db.vcid),void 0!=db.aJ&&""!=db.aJ&&(c+="&c4=mn,"+escape(db.aJ)),c+="&cc=1"),w=c,void 0==db.prod&&(db.prod="vc"),this._ggtrackid=db.clientid,null!=db.vcid&&(this._ggtrackid+="."+db.vcid),x="genjsplayer"==a?new j:new h,this._ggplayername="gj3",null!=db.msgmax&&db.msgmax>0&&(Q=db.msgmax),null!=db.msgint&&""!=db.msgint&&(P=db.msgint),null!=db.focusint&&db.focusint>=0&&(O=db.focusint),t&&(window.addEventListener?window.addEventListener("unload",m,!1):window.attachEvent&&window.attachEvent("onbeforeunload",m)),y=new e(I,b,w,!0,!0,ob),0!=O&&(K=n(),A=setInterval(this.bC,1e3*O)),this.C("1",(new Date).getTime(),window.location.href,document.referrer)},this.aD=function(a,b){var c="",d=0,e=1,a=bb;return 0!=mb.CS[a]&&mb.PA[a]>0&&mb.VL[a]>0&&(d=mb.PA[a]>=mb.VL[a]?99:mb.VL[a]>0?Math.round(100*mb.PA[a]/mb.VL[a]):66,mb.FP[a]>0&&1==L&&(e=mb.FA[a]/mb.FP[a],d=Math.round(.8*d+d*e*.2)),mb.MI[a]>0&&mb.SI[a]<=0?d-=10:mb.SI[a]>0&&(d+=5),mb.SR[a]>0,d+=10,(mb.SH[a]>0||mb.SV[a]>0||mb.PB[a]>0||mb.CI[a]>0)&&(d=99),mb.II[a]>0&&(d+=10),mb.ER[a]>0&&mb.ER[a]<=5&&(d=20*mb.ER[a]),d>99&&(d=99),c=b+",50,"+d+","+Math.round(100*e)+"|||",mb.CS[a]=0),gb>0&&(c=b+",25,"+gb+","+hb+","+ib+"|||"+c,gb=0,hb=0,ib=0),c},this.C=function(b,e,f,g,h,j){var m,n,o,p,s,t,v=null,w=0,z=b;if((R!=z||B!=f||C!=g||D!=h||E!=j)&&(R=z,B=f,C=g,D=h,E=j,$=!1,v=0==b.indexOf("cust:")?x.genericEvent(b,e,f,g,h,j):x.cs(b,e,f,g,h,j),null!=v&&""!=v)){var A=v.split(",");switch(z=Number(A[1]),f=A[2],g=A[3],cb=bb,z){case 1:return X=v,void(null!=B&&(Y=B));case 51:if(null!=X)return X=e+",1,"+B,null!=C&&""!=C&&(X+=","+C),void(null!=B&&(Y=B));v=e+",51,"+B,null!=C&&(v+=","+C),Y=B;break;case 2:break;case 3:case 15:Z=0,S=0,"preroll"==g||"postroll"==g||"midroll"==g||"ad"==g?(n=1,G=v):(n=0,F=v),H=g,bb=n,cb=n,a(n),15==z&&(mb.CS[n]=1,eb=1);var I=unescape(d("length",bb));I=null==I||isNaN(I)?30:Number(I),mb.VL[bb]=I;var K=d("title",bb);mb.Title[bb]=null!=K&&""!=K?K:f,0==bb&&c(),lb=0,i(n,f,g,h,j),k(n,f,g,h,j);break;case 4:Z=0,o=f,o=isNaN(o)||0==o?mb.PL[bb]:Number(f),n=o-mb.PL[bb],mb.PA[bb]+=n,mb.PL[bb]=o,Number(mb.PM[bb])<o&&(mb.PM[bb]=o),m=this.aD(bb,e),bb=0,eb=0,lb=0;break;case 5:if(Z++,o=f,lb=0,isNaN(o)){m=genError("InvPlayParam",f);break}o=Number(f),(0!=o||0==mb.PA[bb])&&(mb.PL[bb]=o),mb.CS[bb]=1,eb=1,y.af(r(o));break;case 6:if(Z++,o=f,isNaN(o)){m=genError("InvPauseParam",f);break}o=Number(f),n=o-mb.PL[bb],n>0&&(mb.PA[bb]+=n),mb.PL[bb]=o,mb.CS[bb]=1,eb=0,y.af(r(o));break;case 7:if(mb.CS[bb]=1,S++,1==lb&&S>5)return;if(o=f,isNaN(o)){m=genError("InvStopParam",f);break}o=Number(f),n=Number(o)-mb.PL[bb],n>0&&(mb.PA[bb]+=n),mb.PL[bb]=o,Number(mb.PM[bb])<o&&(mb.PM[bb]=o),mb.PA[bb]>0&&(m=this.aD(bb,e)),eb=0,lb=1,mb.PA[bb]=0,mb.FA[bb]=0,mb.FP[bb]=0,0==bb&&c();
break;case 8:if(Z++,o=f,isNaN(o)){m=genError("InvSeekParam1",f);break}if(o=Number(f),p=g,isNaN(p)){m=genError("InvSeekParam",g);break}p=Number(g),n=o-mb.PL[bb],n>0&&(mb.PA[bb]+=n),mb.PL[bb]=p,mb.CS[bb]=1,y.af(r(p));break;case 9:f||f.toLowerCase().indexOf("on")||1==f?mb.MI[bb]+=1:mb.MI[bb]-=1;break;case 10:(f||f.toLowerCase().indexOf("on")||1==f)&&(mb.SR[bb]+=1),q();break;case 11:isNaN(f)||(0>fb?fb=f:(f>fb&&(mb.SI[bb]+=1),fb=f));break;case 12:mb.DI[bb]+=1;break;case 13:case 14:break;case 16:case 22:mb.CI[bb]+=1;break;case 17:mb.SH[bb]+=1;break;case 18:mb.SV[bb]+=1;break;case 19:case 20:mb.PB[bb]+=1;break;case 21:mb.II[bb]+=1;break;case 23:mb.ER[bb]+=1;break;case 24:break;case 25:return gb+=1,hb+=Number(f),void(ib<Number(f)&&(ib=f));case 49:if(isNaN(f))return;if(o=Number(f),1>=o||1!=eb)return;if(y.af(r(o)),0!=bb||0==bX.length)return;var L=mb.PA[bb]+(o-mb.PL[bb]);if(L<bX[0])return;mb.PA[bb]+=o-mb.PL[bb],mb.PL[bb]=f,m=this.aD(bb,e),bX.splice(0,1)}var M=10;if(M=isNaN(mb.VL[bb])?10:mb.VL[bb]/60*_,M>100&&(M=100),20>M&&(M=20),1!=$&&!(Z>M&&3!=z&&15!=z&&4!=z&&7!=z||Z>5e3)){switch(null!=m&&(v=m+v),""!=X&&(v=X+"|||"+v,X=""),s=Number(1!=cb?db.trackcontent:db.trackads)){case 0:return;case 2:case 3:if(t=d("ggignr",cb),null!=t&&"1"==t)return}w=y.ct(v,u()),J+=w;var N=jb;7==z?(0==bb&&(kb=1),l(2),N=0):49==z?(l(1),N=0):15==z?(l(0),N=0,kb=0):3==z?5==jb?(l(0),N=0,kb=0):N=3:4==z?(0==kb&&l(1),kb=0,N=0):5==z?3==jb?(l(0),N=0):0==f?1==kb&&0==bb?(mb.PM[bb]=0,l(0),N=0,kb=0):N=5:N=0:6==z&&0!=f?N=0:8==z&&0!=g&&(N=0),jb=N,Number(J)>=Number(Q)&&l(1)}}},this.bS=function(a,b,c,d,e,f){this.C("cust:"+a,b,c,d,e,f)}}function c(){function a(a){for(var b="",c="",d=0;a>d;d++)c=Math.floor(36*Math.random()).toString(36),b+=Math.floor(2*Math.random())?c.toUpperCase():c.toLowerCase();return b}var b=null,c=0;this.bw=function(){return b=a(32)},this.bz=function(){},this.clearMessageCookie=function(){},this.bE=function(){return c++,c},this.aR=function(){return b}}function d(a,b,c,d,e){var f='END"/></GGC>',g="|||",h="",i=Math.floor(1e5*Math.random())+1,j='<GGC><H value="'+a+","+(new Date).getTimezoneOffset()/-60+","+b+"."+i+","+d+","+e+'"/><L value="';this.bA=function(a){return""==h?h=j+a+g:h+=a+g,h},this.bg=function(){if(""==h)return h;var a=h+f;return h="",a},this.bx=function(a){return""==h&&(h=j),""!=a&&(h+=(new Date).getTime()+",49,"+a+g),h+(new Date).getTime()+",2"+g+f}}function e(a,b,e,h,i,j){var k,l="logthisjs.php",m="postjs.php",n=new c,o=null,p="NA",q=!1,s=n.bE(),u="GET",v=j;k=new f(e,e+l,e+m,u),null!=h&&(q=h),q=!1,n.bw(b),n.bz(),null==b&&(b="0"),o=new d(a,b,s,v._ggtrackid,v._ggplayername);var w,x,y,z=new g,A='END"/></GGC>',B=0;x=0==r?0:2;var C="",w=String.fromCharCode(56)+String.fromCharCode(103)+String.fromCharCode(36)+String.fromCharCode(15)+String.fromCharCode(126)+String.fromCharCode(3)+String.fromCharCode(71)+String.fromCharCode(91)+String.fromCharCode(100)+String.fromCharCode(7)+String.fromCharCode(17)+String.fromCharCode(31)+String.fromCharCode(95)+String.fromCharCode(28)+String.fromCharCode(64)+String.fromCharCode(14);y=z.aw(w,A),this.report=function(a,b,c){p=a;var d=o.bg(a);d="<m v="+x+" c="+n.aR()+">"+z.aw(w,d)+"<%2Fm>",k.report(d,c),0==b&&(B=1)},this.bp=function(a){var b=o.bx(C);b="<m v="+x+" c="+n.aR()+">"+z.aw(w,b)+"<%2Fm>",k.report(b,a)},this.ct=function(a,b){p=b;var c=o.bA(a),d=c.length;return d},this.af=function(a){t&&(C=a)}}function f(a,b,c,d){function e(a,b){f=a,h=!0,"GET"==i&&(j=new Image(1,1)),j.src=1==s?g+b+"?HEX40="+a:g+b+"HEX40%3D"+a}var f,g=a,h=!1,i="GET-CONFIRM",j=new Image(1,1);null!=d&&(i=d),"GET-CONFIRM"==i&&(window.addEventListener?(j.addEventListener("load",loadSuccess,!1),j.addEventListener("error",bn,!1)):window.attachEvent&&(j.attachEvent("onload",loadSuccess),j.attachEvent("onerror",bn))),this.report=function(a,b){null!=a&&""!=a&&"POST"!=i&&e(a,b)}}function g(){function a(a,b){var c="";if(null==a||null==b)return b;for(var d=a.split(""),e=d.length,f=b.split(""),g=f.length,h=0;g>h;h++){var i=f[h].charCodeAt(0)^(g%10|d[h%e].charCodeAt(0));c+=0==i?f[h]:String.fromCharCode(i)}return c}function b(a){var b,c,d,e;for(e="",d=a.length,b=0;d>b;b++)c=a.charCodeAt(b),128>c?e+=String.fromCharCode(c):c>127&&2048>c?(e+=String.fromCharCode(c>>6|192),e+=String.fromCharCode(63&c|128)):65536>c?(e+=String.fromCharCode(c>>12|224),e+=String.fromCharCode(c>>6&63|128),e+=String.fromCharCode(63&c|128)):(e+=String.fromCharCode(c>>18|240),e+=String.fromCharCode(c>>12&63|128),e+=String.fromCharCode(c>>6&63|128),e+=String.fromCharCode(63&c|128));return e}this.urlencode=function(a){var b={},c=a.toString(),d=function(a,b,c){var d=[];return d=c.split(a),d.join(b)};b["'"]="%27",b["("]="%28",b[")"]="%29",b["*"]="%2A",b["~"]="%7E",b["!"]="%21",b["%20"]="+",c=encodeURIComponent(c);for(search in b)replace=b[search],c=d(search,replace,c);return c.replace(/(\%([a-z0-9]{2}))/g,function(a,b,c){return"%"+c.toUpperCase()})},this.aw=function(c,d){return this.urlencode(a(c,b(d)))}}function h(){function a(a,b,c,d,e,f){if(null==a||a.length<=5)return null;var g=b+","+a;return null!=c&&(g+=","+c),null!=d&&(g+=","+d),null!=e&&(g+=","+e),null!=f&&(g+=","+f),g}function b(a){e=a}this.bW=-1,this.cx="NA";var c=-1,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null;this.getCurrentEvent=function(){return this.bW},this.genericEvent=function(b,c,d,e,k,l){if(f==b&&g==d&&h==e&&i==k&&j==l)return null;var m=a(b,c,d,e,k,l);return null!=m&&(f=b,g=d,h=e,i=k,j=l),m},this.cs=function(a,e,f,g,h,i){if(k==a&&l==f&&m==g&&n==h&&o==i)return null;var j=null;return 1==a?(this.bW=a,d=f,j=e+","+this.bW+","+d,null!=g&&(j+=","+g)):10==a||9==a?(this.bW=a,j=0==f?e+","+this.bW+",0":1==f?e+","+this.bW+",1":e+","+this.bW+","+f):12==a?(this.bW=a,j=e+","+this.bW):49==a?(this.bW=a,c=f,j=e+","+this.bW+","+f):11==a?(this.bW=a,j=e+","+this.bW+","+f):"videoInfo"==a?b(f):j=this.C(a,e,f,g,h,i),null!=j&&(k=a,l=f,m=g,n=h,o=i),j},this.C=function(){},this.getVideoInfo=function(a,b){var c="";return null!=a&&(c="<length>"+a+"</length>"),null!=b&&(c+="<uurl>"+b+"</uurl>"),null!=e&&(c+=e,e=null),c}}function i(a,b){var c=a.indexOf("<"+b+">")+b.length+2,d=a.indexOf("</"+b+">",c);return c>=0&&d>c?a.substring(c,d):null}function j(){this.inheritFrom=h,this.inheritFrom();var a=null,b=null;this.C=function(c,d,e,f,g,h){var j="";if(3==c&&3!=this.bW||15==c&&15!=this.bW){var k=i(g,"censuscategory"),l=i(g,"category");null==l&&null!=k&&""!=k&&(g+="<category>"+k+"</category>"),this.cx=i(g,"length"),j+=","+e+","+f+","+g,h||""==h||isNaN(h)||(j+=","+h)}else 1==c||51==c||8==c?(j+=","+e,null!=f&&(j+=","+f)):6==c&&1!=a&&"00:00"!=e?(a=!0,b=e,j+=","+b):5==c&&0!=a?(a=!1,j+=","+e):7==c?(a=!0,b="0",j+=","+e):9==c?j+=0==e?",Off":",On":(j+=","+e,null!=f&&(j+=","+f));return""==j?null:(this.bW=c,d+","+this.bW+j)}}var k={},l=!0,m="",n="",o="//www.glanceguide.com/conerror.php",p=6e4,q=!1,r=1,s=2,t=!1,u=navigator.userAgent,v=u.indexOf("Firefox");null!=u&&v>=0&&(bJ=!0,bVer=u.substring(v+8,v+9),Number(bVer)>=3&&(t=!0)),v=u.indexOf("MSIE"),null!=u&&v>=0&&(bVer=u.substring(v+5,v+6),Number(bVer)>=6&&(t=!0)),window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a);var w=[];BTG.gg=function(){function a(){if(null==d&&!f){var a=new Image(1,1);a.src=o+"?CONERROR=GGLOADFAIL,"+(new Date).getTimezoneOffset()/-60+","+(new Date).getTime()+",gg.js timed out waiting to load gg.swf"}}var c,d=null,e=null,f=!1,g=null,h=[];this.ggInitialize=function(e,f,i){var j,o="";k=e,l=i;for(j in k)o+="<"+j+">"+k[j]+"</"+j+">";if(l&&FlashDetect.versionAtLeast(8)){c="gen3flvplayer",g=(new Date).getTime()+1e3*(Math.random()*Math.random()*1e4|0);var q="_flash_proxy_"+g,r=document.createElement("div");r.id=q,document.body.appendChild(r),n=void 0==e.sfcode||2!=e.sfcode.length?"//secure-us.imrworldwide.com/novms/gn/3/ggce302.swf":"//secure-"+e.sfcode+".imrworldwide.com/novms/gn/3/ggce302.swf";var s=new SWFObject(n,"ggSwfId"+g,1,1,"8");s.addParam("allowscriptaccess","always"),s.addVariable("width",1),s.addVariable("height",1),s.addVariable("ggSwfId",g),w[g]=this,h.push(c),h.push(f),h.push(o),s.write(q),setTimeout(a,p)}else try{c="genjsplayer",d=new b,d.init(c,f,m,o)}catch(t){}},this.ggPM=function(a,b,c,g,i){a=String(a),b=String(b),c=String(c),g=String(g),i=String(i);try{null!=d&&q?d.C(a,(new Date).getTime(),b,c,g,i):f?e.ggProcessMetric(a,(new Date).getTime(),b,c,g,i):(h.push(a),h.push((new Date).getTime()),h.push(b),h.push(c),h.push(g),h.push(i))}catch(j){}},this.ggJsLoaded=function(){if(null!=d){for(var a=0;a<h.length;a+=6)d.C(h[a],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]);h=[]}},this.ggSwfLoaded=function(){if(e=-1!=navigator.appName.indexOf("Microsoft")?window["ggSwfId"+g]:document["ggSwfId"+g],e.ggInitialize(h[0],h[1],h[2]),h.length>3)for(var a=3;a<h.length;a+=6)e.ggProcessMetric(h[a],h[a+1],h[a+2],h[a+3],h[a+4],h[a+5]);h=[],f=!0}},a()}(),function(a){a.Log=function(){var a=!1,b="object"==typeof console&&"function"==typeof console.log,c=function(c){var c="["+c+"] ";return{debug:function(){if(b&&a){for(var d=[],e=0,f=arguments.length;f>e;e++){var g=arguments[e];if("string"==typeof g)d.push(c+g);else if("object"==typeof g){var h=[];for(var i in g)g.hasOwnProperty(i)&&h.push(i+":"+g[i]);d.push("{"+h.join(",")+"}")}else d.push(g)}console.log(d.join(" "))}}}};return{getLogger:function(a){return new c(a)},isDebug:function(){return a},enableLogging:function(){a=!0},disableLogging:function(){a=!1}}}()}(BTG),function(a){a.Event=function(){var b=[];return{add:function(c,d){"function"==typeof c&&b.push(new a.Listener(c,d))},remove:function(a){for(var c=b.length,d=0;c>d;d++){var e=b[d];e.getCallback()===a&&e.remove()}},dispatch:function(){for(var a=b.length,c=0;a>c;c++){var d=b[c];d.dispatch(arguments)}}}}}(BTG),function(a){a.Listener=function(a,b){var c=a,d=b;return{dispatch:function(){void 0!==arguments[0]?c.apply(d,arguments[0]):c.apply(d)},remove:function(){c=function(){}},getCallback:function(){return c}}}}(BTG),function(a){a.BeaconsVO=function(){var b=function(){return{elapsedAfterAd:!1,elapsedAlways:!1,elapsed:null,startTime:null,url:null,method:"GET",type:null,fromEnd:!1,atEnd:!1,postVars:[],toMilliSeconds:!1}};return{fromJSON:function(c){if(a.Object.isArray(c)){for(var d=[],e=c.length,f=0;e>f;f++)if("object"==typeof c[f]){var g=c[f],h=new b;if(g.hasOwnProperty("startTime")){var i=g.startTime.toLowerCase().replace(/\s/g,"");h.fromEnd=-1!=i.indexOf("end-"),h.atEnd="end"===i,h.startTime=h.fromEnd?parseInt(i.split("end-")[1]):isNaN(g.startTime)?null:parseInt(g.startTime)}g.hasOwnProperty("elapsed")&&(h.elapsed=parseInt(g.elapsed)),g.hasOwnProperty("elapsedAfterAd")&&(h.elapsedAfterAd=g.elapsedAfterAd===!0||"true"===g.elapsedAfterAd,h.elapsedAlways=void 0===g.elapsedAfterAd||0===g.elapsedAfterAd.length),g.hasOwnProperty("method")&&(h.method="post"===g.method.toLowerCase()?"POST":"GET"),g.hasOwnProperty("type")&&(h.type=g.type),g.hasOwnProperty("prop")&&a.Object.isArray(g.prop)&&(h.postVars=g.prop),g.hasOwnProperty("url")&&(h.url=g.url),d.push(h)}return d}}}}()}(BTG),function(a){a.ConfigSettings=function(){return{applicationOrigin:"ORIGIN_UNSET",applicationContext:"CONTEXT_UNSET",countryCode:"COUNTRY_XX",omnitureCharSet:"ISO-8859-1",omnitureEnabled:!1,omnitureMediaTrackingEnabled:!1,omnitureEndslateTracking:!1,omnitureHeartbeatsDisabled:!1,omnitureVisitorNamespace:!1,omnitureVisitorMigrationKey:null,omnitureVisitorMigrationServer:null,omnitureLiveEventHeartbeatsDisabled:!1,omnitureLiveEventTrackingEnabled:!1,omnitureCustomFields:{},omnitureSuite:null,omniturePathContext:null,omnitureDataCenter:null,omnitureLiveEventData:[],omnitureLiveEventBeaconFreq:180,omnitureFirstPartyServer:null,demdexEnabled:!1,demdexEndCallEnabled:!1,nielsenClientID:null,nielsenEnabled:!1,nielsenVideoCensusID:null,comScoreEnabled:!1,comScorePrimaryID:null,comScoreProducerID:null,comScoreLocationID:null,comScoreGenreID:2e4,comScoreAdTracking:!0,referrer:null,playerURL:null,geo:null,group:null,device:null,applicationName:null,applicationType:null,applicationContext:null,applicationOrigin:null,freewheelEnabled:!1,freewheelIsTest:!1,freewheelIsDomestic:!0,freewheelSiteSection:null,freewheelNetworkId:null,freewheelProfileId:null,freewheelDisplayBase:null,freewheelAssetId:null,freewheelDuration:null,freewheelTimeSinceLastAd:null,freewheelUseActualDuration:!1,freewheelSiteSectionPathParsing:!1}}}(BTG),function(a){a.CustomFieldVO=function(a,b,c){return{name:a,value:b,override:c===!0||"true"===c}}}(BTG),function(a){a.CustomFields=function(){var b=[];return{add:function(c,d,e){b.push(new a.CustomFieldVO(c,d,e))},getItems:function(){return b}}}}(BTG),function(a){a.FreewheelVO=function(){return{currentItem:0,hasContentEnd:!1,x:0,y:0,width:0,height:0,currentAdIndex:0,totalAdCount:0}}}(BTG),function(a){a.Metadata=function(){return{videoId:"NO_VID",videoUrl:"NO_VID_URL",videoTitle:"NO_VID_TITLE",artistId:"NO_ARTIST_ID",label:"NO_LABEL",mediaCategory:"NO_MEDIA_CATEGORY",mtvnOwner:"OWNER_UNSET",playlistTitle:"PLAYLIST_TITLE_UNSET",playlistRepTitle:null,pageName:"NO_PAGE_NAME",guid:"NO_GUID",playerMode:"normal",isAd:!1,reportable:!1,isLiveEvent:!1,isFullEpisode:!1,hasPlayList:!1,artistName:null,franchise:null,uriNamespace:null,thumbnailUrl:null,contentType:null,businessUnit:null,description:null,lineupId:null,playlistType:null,showTitle:null,playerSize:null,adUrl:null,adUrlRedirect:null,playerUrl:null,clipType:null,segmentName:null,mediaTitle:null,events:null,products:null,duration:null,itemDuration:null,itemIndex:null,mediaDescription:null,playlistLength:null,playlistDuration:null,playlistMetadataItems:[],beacons:[],playlistURI:null,playlistId:"NO_PLAYLIST_ID",eventType:null,bandwidth:null,location:null,subBrand:null,userSegment:null}}}(BTG),function(a){a.StreamSenseVO={fromMetadata:function(b){var c="*null",d=(a.String.toString,a.String.isDefined,b.hasPlayList?b.playlistTitle:b.videoTitle),e=1e3*(b.isAd?b.adDuration:b.duration),f=b.isAd?b.adId:b.videoId;0>e&&(e=0);var g={ns_st_cn:b.partIndex,ns_st_ci:f,ns_st_pn:isNaN(b.itemIndex)?c:b.itemIndex+1,ns_st_tp:b.playlistLength>0?b.playlistLength:0,ns_st_cu:b.playerUrl?b.playerUrl:c,ns_st_cl:e,ns_st_pu:b.mtvnOwner?b.mtvnOwner:c,ns_st_pr:b.franchise?b.franchise:c,ns_st_ep:d?d:c,ns_st_ad:b.isAd?"1":"0",ns_st_ct:b.clipTypeId};return g.C3=g.ns_st_ep,g.C4=g.ns_st_pu,g.C6=g.ns_st_pr,g}}}(BTG),function(a){a.AppMeasure=function(){var b="AppMeasure",c=":",d="=",e=",",f="|",g=a.Log.getLogger(b),h=a.Log.isDebug,i=a.AppMeasureVars,j=a.Events,k=s_code,l={},m={},n={},o={},p=[],q=[],r=!1,s=!1,t=!1,u=!1,v="",w=!1,x=!1,y=0,z=0,A=0,B=0,C="",D=null,E=null,F=0,G="",H="",I=null,J={},K=function(a,b){a.dispatch(b?b:{})},L=function(){return A!=m.itemIndex&&C},M=function(){return 0==m.itemIndex},N=function(){return A==m.playlistLength-1},O=function(a,b){return a+d+b},P=function(a,b){return a.length>0?a+e+b:b},Q=function(a,b,c){m.reportable&&k.Media.open(a,b,c)},R=function(a,b){n.reportable&&(w||(h()&&g.debug("trackMediaPlay playhead: "+b),w=!0,k.Media.play(a,b)))},S=function(a,b){n.reportable&&w&&(h()&&g.debug("trackMediaStop playhead: "+b),w=!1,k.Media.stop(a,b))},T=function(a){m.reportable&&(h()&&g.debug("trackMediaClose title: "+a),k.Media.close(a))},U=function(){for(var a=i.TRAFFIC_VAR_LIMIT,b=0;a>=b;b++)k["prop"+b]="",k["eVar"+b]="";k.Media.trackVars="None",k.Media.trackEvents="None",k.linkTrackVars="",k.linkTrackEvents="",k.products="",k.events=""},V=function(b,c){var d=new a.AppMeasureMapper(b,l),e=d.getMappedObject(c);k.Media.trackVars=e.trackVars,k.Media.trackEvents=P(b.events,k.events);for(var f in e)e.hasOwnProperty(f)&&(k[f]=e[f])},W=function(a){U(),k.debugTracking=h(),k.trackLocal=!0,k.un=l.omnitureSuite,D&&(k.trackingServer=D),k.trackingServer&&l.omnitureVisitorMigrationKey&&l.omnitureVisitorMigrationServer&&(k.visitorMigrationKey=l.omnitureVisitorMigrationKey,k.visitorMigrationServer=l.omnitureVisitorMigrationServer),l.omnitureCharSet&&(k.charSet=l.omnitureCharSet),l.omnitureDataCenter&&(k.dc=l.omnitureDataCenter),l.omnitureVisitorNamespace&&(k.visitorNamespace=i.VISITOR_NAMESPACE),I&&(k.visitorID=I),l.omnitureMediaTrackingEnabled&&(k.Media.autoTrack=!1,k.Media.trackWhilePlaying=!0,k.Media.trackUsingContextData=!0,k.Media.contextDataMapping=a?{"a.media.ad.name":i.AD_CREATIVE_ID,"a.media.ad.timePlayed":i.AD_TIME_SPENT,"a.media.ad.view":i.AD_START_EVENT,"a.media.ad.complete":i.AD_END_EVENT,"a.media.ad.pod":i.AD_POD_ID,"a.media.ad.podPosition":i.AD_POD_ITEMS}:{"a.media.name":i.MEDIA_NAME,"a.media.timePlayed":i.MEDIA_TIMEPLAYED,"a.media.segmentView":i.MEDIA_SEGMENTVIEW,"a.media.segment":i.MEDIA_SEGMENTEVAR,"a.media.view":n.isAd?i.ADITEM_EVENT:i.VIDEOITEM_EVENT})},X=function(){h()&&g.debug("setDefaultData hasPlaylist: "+s+" videodata.isLive="+n.isLive);var b=_(a.UserSegments.getFormattedUserSegment(H));n.itemIndex=isNaN(n.itemIndex)?i.DEFAULT_ITEM_INDEX:n.itemIndex,n.itemDuration=n.isLive?i.LIVE_DURATION:n.duration,n.pageName=l.omniturePathContext+n.videoTitle,n.clipType=s?i.PLAYLIST_EVENT:i.SINGLECLIP_EVENT,n.segmentName=[n.itemIndex+1,n.videoTitle].join(c),n.applicationName=l.applicationName,n.applicationContext=l.applicationContext,n.applicationOrigin=l.applicationOrigin,n.vmnUUID=G,n.userSegment=H,n.playlistDuration=n.isLive?i.LIVE_DURATION:n.playlistDuration,n.playlistTitle=n.playlistRepTitle?n.playlistRepTitle:n.playlistTitle,n.mediaTitle=[n.videoId,n.franchise,s?i.PLAYLIST_ITEM:i.SINGLECLIP_ITEM].join(c),s&&!t&&M()?(t=!0,n.events=[i.PLAYLIST_START,i.BUFFER_EVENT,i.PLAYLIST_DURATION,i.PLAYLIST_LENGTH,i.PLAYLIST_EVENT].join(e),n.products=b+i.SEMICOLONS+[O(i.BUFFER_EVENT,B),O(i.PLAYLIST_DURATION,n.playlistDuration),O(i.PLAYLIST_LENGTH,n.playlistLength)].join(f)):(n.events=[i.BUFFER_EVENT,n.clipType].join(e),n.products=b+i.SEMICOLONS+O(i.BUFFER_EVENT,B),s||(n.events=P(n.events,i.DURATION_EVENT),n.products+=f+O(i.DURATION_EVENT,Math.floor(n.itemDuration)))),V(n,!0),n.isLive&&cb(),o.vmnUUID=n.vmnUUID,o.segmentName=n.segmentName},Y=function(){!n.isAd&&s&&(q[A]=!0)},Z=function(){var a=0;if(s)for(var b=0,c=q.length;c>b;b++)q[b]&&a++;return a===m.playlistLength},$=function(a,b,c){p.push({type:a,min:b,max:c})},_=function(a){return""!=a?a+e:a},ab=function(a){if(p=[],n.itemDuration>=i.MIN_DURATION&&n.itemDuration<=i.MAX_DURATION)$("tracked50",50,75);else if(n.itemDuration>=i.MAX_DURATION){var b=25;a>=900&&1800>=a?b=10:a>1800&&3600>=a?b=5:a>3600&&7200>=a?b=3:a>7200&&10800>=a?b=2:a>10800&&(b=1);for(var c=100/b,d=1;c>d;d++){var e=d*b,f=e+b,j="tracked"+e;100==f&&(f=98),$(j,e,f),h()&&g.debug("setMilestones added: "+j+"=>"+e+"-"+f)}}$("tracked98",98,100)},bb=function(a,b,c){b=Math.floor(b),n.reportable&&0!=b&&!u&&(o.events="",o.products="",c&&(o.events=P(o.events,i.MEDIA_COMPLETE),s&&N()&&Z()&&(o.events=P(o.events,i.MEDIA_PLAYLIST_COMPLETE))),U(),V(o,!1),k.Media.track(a))},cb=function(){var b=l.hasOwnProperty("omnitureLiveEventData")&&a.Object.isArray(l.omnitureLiveEventData)?l.omnitureLiveEventData:[],c=b.length,d=isNaN(l.omnitureLiveEventBeaconFreq)?i.LIVE_BEACON_FREQ:l.omnitureLiveEventBeaconFreq;h()&&g.debug("setLiveEventBeaconFreq beaconFreq: "+d);for(var e=0;c>e;e++){var f="object"==typeof b[e]?b[e]:{};if(f.hasOwnProperty("guid")&&f.guid===n.guid&&!isNaN(f.beaconFreq)){E=f.beaconFreq,h()&&g.debug("setLiveEventBeaconFreq guid match: "+f.guid+" beaconFreq:"+f.beaconFreq);break}}E=E>=i.LIVE_FREQ_MAX?i.LIVE_FREQ_MAX:null!=E&&E<=i.LIVE_FREQ_MIN?i.LIVE_FREQ_MIN:d,h()&&g.debug("setLiveEventBeaconFreq liveEventBeaconFreq: "+E)},db=function(a,b){!l.omnitureLiveEventHeartbeatsDisabled&&Math.floor(b/E)>F&&(F++,bb(a,b))},eb=function(c,d,e){for(var f=a.Bento.retrieveSubscriber(b),i=p.length,j=0;i>j;j++){var k=p[j];if(!k.fired&&e>=k.min&&e<=k.max){"tracked98"===k.type?(h()&&g.debug("sendHeartBeat milestone tracked98 reached. Invoke onPlayEnd."),f.onPlayEnd(z)):!l.omnitureHeartbeatsDisabled&&w&&(h()&&g.debug("sendHeartBeat trackEvents time: "+d),bb(c,d)),h()&&g.debug("sendHeartBeat fired milestone: "+k.type),p=p.slice(j+1);break}}},fb=function(a){h()&&g.debug("startMediaMonitor duration: "+a.duration),k.Media.monitor=function(b,c){switch(y=c.timePlayed,c.event){case"CLOSE":h()&&g.debug("Media Monitor CLOSE videoTitle:"+a.videoTitle),bb(a.videoTitle,c.timePlayed,!0);break;case"MONITOR":y=c.timePlayed,a.isLive?db(a.videoTitle,c.timePlayed):eb(a.videoTitle,c.timePlayed,c.percent)}}},gb=function(){return"true"===l.omnitureAdTracking||l.omnitureAdTracking===!0};return{NAME:b,eventList:function(){return{CONFIG:this.onConfig,METADATA:this.onMetadata,PLAY:this.onPlay,RESUMEPLAY:this.onResumePlay,PAUSE:this.onPause,SEEKING:this.onSeeking,BUFFERING:this.onBuffering,PLAYEND:this.onPlayEnd,PLAYLIST_ENDED:this.onPlaylistEnded,PLAYHEADUPDATE:this.onPlayheadUpdate,VMN_UUID:this.onVmnUuid,USER_SEGMENT:this.onUserSegment,OMT_TRACKING_SERVER:this.onTrackingServer,OMT_VISITOR_ID:this.onVisitorId,FW_AD_METADATA:this.onFWAdMetadata,FW_AD_CREATIVE_PLAY:this.onAdPlay,FW_AD_CREATIVE_PLAYEND:this.onAdPlayEnd}},onConfig:function(a){l=a},onMetadata:function(a){m=a},onPlay:function(a){if(h()&&g.debug("onPlay playhead:",a,y),m.reportable){var b=0;L()?(h()&&g.debug("onPlay firing trackMediaClose for previous item: "+C),S(C,y),T(C),r=!1,b=a,x=!0):x=!1,m.isAd||(n=m,r=!0,s=n.hasPlayList,C=n.videoTitle,s||(n.playlistId=null),W(),X(),n.isLive||ab(n.itemDuration),fb(n),n.isLive?(S(C,0),Q(C,n.itemDuration,n.applicationName),R(C,i.LIVE_EVENT_START_PLAYHEAD)):(Q(C,n.itemDuration,n.applicationName),R(C,b)),A=n.itemIndex,Y(),K(j.OMT_START,k))}},onResumePlay:function(a){if(h()&&g.debug("onResumePlay"),gb()&&u)h()&&g.debug("onResumePlay and it is an Ad"),k.Media.play(v,0);else{if(!r)return;a.elapsed>0&&(B=a.elapsed),R(C,a.playhead)}},onPause:function(a){if(h()&&g.debug("onPause",a),gb()&&u)h()&&g.debug("onPause and it is an Ad"),k.Media.stop(v,-1);else{if(!r)return;S(C,a)}},onSeeking:function(a){h()&&g.debug("onSeeking",a),r&&S(C,a)},onBuffering:function(a){h()&&g.debug("onBuffering",a),r&&S(C,a)},onPlayEnd:function(a){r&&(h()&&(g.debug("onPlayEnd playhead: "+a,"mediaTimePlayhead: "+y),g.debug("currentItemIndex: "+A,"videodata.itemIndex: "+n.itemIndex)),a=x?y:a,S(C,a),T(C),r=!1,C=null,w=!1,x=!1,K(j.OMT_END,k))},onPlaylistEnded:function(){t=!1,q=[]},onPlayheadUpdate:function(a){z=a},onFWAdMetadata:function(a){J=a},onAdPlay:function(){gb()&&(h()&&g.debug("onAdPlay : "),W(!0),u=!0,v=i.AD_VIDEO_TITLE+"_"+J.creativeId+"_"+J.currentAdIndex+"_"+Math.floor(1e4*Math.random()),k.Media.completeByCloseOffset=!1,k.Media.openAd(v,-1,l.applicationName,m.videoTitle,J.podId,J.currentAdIndex),k.Media.play(v,0))},onAdPlayEnd:function(){gb()&&(h()&&g.debug("onAdPlayEnd : "),u=!1,k.Media.complete(v,z),v="")},onVmnUuid:function(a){h()&&g.debug("onVmnUuid : "+a),G=a},onUserSegment:function(a){H=a},onTrackingServer:function(a){h()&&g.debug("onTrackingServer : "+a),D=a},onVisitorId:function(a){h()&&g.debug("onVisitorId : "+a),I=a}}}}(BTG),function(a){a.Beacons=function(){var b="Beacons",c={},d={},e=0,f=!1,g=a.BeaconVars,h=!0,i=!1,j=a.Log.getLogger(b),k=a.Log.isDebug,l=function(a,b){var c=-1;return a.hasOwnProperty(b)&&(c=a[b]||0===a[b]?a[b]:c),c};return{NAME:b,onPlayBeacons:[],onPlayEndBeacons:[],prevIsAd:!1,hasResumePlay:!1,beaconTimer:a.TimerUtil.getTimer(b),eventList:function(){return{CONFIG:this.onConfig,METADATA:this.onMetadata,PLAY:this.onPlay,PAUSE:this.onPause,RESUMEPLAY:this.onResumePlay,SEEKING:this.onSeeking,BUFFERING:this.onBuffering,PLAYEND:this.onPlayEnd,PLAYHEADUPDATE:this.onPlayHeadUpdate,FW_AD_PLAY:this.onAdPlay}},onConfig:function(a){c=a},onMetadata:function(a){d=a},onPlayHeadUpdate:function(a){f||this.beaconTimer.running()||i||(this.beaconTimer.start(),h=!1),e=a},onBeaconStart:function(){var a=d.beacons?d.beacons:[],b=!1,c=function(a){return 0>a?1e3*d.duration-Math.abs(a):1e3*a};if(a.length>0){b=!0;for(var e=a.length,f=0;e>f;f++){var h=a[f];"object"==typeof h&&(h.hasOwnProperty("startTime")&&h.startTime===g.MAX_VALUE||h.hasOwnProperty("atEnd")&&h.atEnd?this.onPlayEndBeacons.push(h):(h.toMilliSeconds||(h.startTime=c(h.startTime),h.elapsed=c(h.elapsed),h.toMilliSeconds=!0),this.onPlayBeacons.push(h)))}}return b},getPropsData:function(a){for(var b=a.length,c={},d=0;b>d;d++){var e=a[d];for(var f in e)e.hasOwnProperty(f)&&(c[e.name]=e.value)}return c},sendBeacon:function(b){b.url=a.String.replaceTokens(b.url,{ref:c.referrer});var e=a.String.replaceTokens(b.url,d),f={};b.postVars&&b.postVars.length>0&&(f=this.getPropsData(b.postVars)),k()&&j.debug("sendBeacon url: ",e),a.Beacon.send({url:e,params:f})},checkBeacons:function(){for(var c=a.Bento.retrieveSubscriber(b),d=function(a){return isNaN(a)?0:a},f=function(a,b){return a=d(a),b=d(b),a>b?a:b},h=0;h<c.onPlayBeacons.length;h++)if("object"==typeof c.onPlayBeacons[h]){var i=c.onPlayBeacons[h],j=!1,k=null,m=null,n=null,o=null,p=!1,q=!1,r=l(i,"startTime"),s=l(i,"elapsed"),t=i.hasOwnProperty("elapsedAfterAd")?i.elapsedAfterAd:!1,u=i.hasOwnProperty("elapsedAfterAd")===!1;if(c.hasResumePlay){var v=Math.round(1e3*e);p=j&&v>n}else t&&c.prevIsAd?(n=f(i.elapsed,i.startTime),o=Math.round(c.beaconTimer.currentCount()),q=!0):((r>=0||s>=0)&&!t&&!c.prevIsAd||u)&&(n=f(i.startTime,i.elapsed),o=Math.round(1e3*e),j=!0,q=!0),m=o+g.DEFAULT_RANGE,k=o-g.DEFAULT_RANGE,q&&(p=n>=k&&m>=n||0===n);p&&(c.sendBeacon(i),c.onPlayBeacons.splice(h,1))}c.hasResumePlay=!1,0===c.onPlayBeacons.length&&(c.beaconTimer.removeListener(c.checkBeacons),c.beaconTimer.stop(),c.stopped=!0)},onPlay:function(){f=d.isAd,f||this.onBeaconStart()&&(h=!1,this.beaconTimer.addListener(this.checkBeacons),this.beaconTimer.start())},onBuffering:function(){f||h||(this.beaconTimer.stop(),h=!0)},onSeeking:function(){f||h||(this.beaconTimer.stop(),h=!0)},onResumePlay:function(c){a.Bento.retrieveSubscriber(b);i=!1,c=Math.round(1e3*c),f||h||(h=!1,this.hasResumePlay=!0,this.beaconTimer.start())},onPause:function(){i=!0,f||h||(this.beaconTimer.stop(),h=!0)},onPlayEnd:function(){if(!f){for(var a=this.onPlayEndBeacons.length,b=0;a>b;b++)this.sendBeacon(this.onPlayEndBeacons[b]);this.prevIsAd=!1,this.beaconTimer.reset(),k()&&j.debug("calling reset  "+this.beaconTimer.currentCount()),this.onPlayEndBeacons=[],this.onPlayBeacons=[],this.hasResumePlay=!1,i=!1}h=!0},onAdPlay:function(){this.prevIsAd=!0}}}}(BTG),function(a){a.Comscore=function(){var b="Comscore",c={},d={},e={},f=a.ComscoreVars,g=a.Log.getLogger(b),h=a.Log.isDebug;return{NAME:b,eventList:function(){return{CONFIG:this.onConfig,METADATA:this.onMetadata,PLAY:this.onPlay,FW_AD_PLAY:this.onAdPlay}},onConfig:function(b){c=b,d={url:f.BEACON_URL,maxLength:f.URL_LIMIT,rndKey:f.RND_KEY,params:{C1:f.BEACON_TYPEID,C2:c.comScorePrimaryID,C3:c.comScoreProducerID,C4:c.comScoreLocationID,C6:"",C7:escape(a.String.lengthLimiter(c.playerURL,f.PARAM_LIMIT)),C9:escape(c.referrer?a.String.lengthLimiter(c.referrer,f.PARAM_LIMIT):"NO_REF")}}},onMetadata:function(a){e=a},onPlay:function(){return!e.reportable||e.isAd?void(h&&g.debug("Do not report this item.")):(d.params.C5=f.CONTENT_GENREID,d.params.C8=escape(e.videoTitle),void a.Beacon.send(d))},onAdPlay:function(){return c.comscoreAdTracking?(d.params.C5=f.VIDEOAD_GENREID,d.params.C8=f.VIDEOAD_TITLE,void a.Beacon.send(d)):void(h&&g.debug("Do not report this item."))}}}}(BTG),function(a){a.DataJanitor=function(){var b=a.DataJanitorVars,c=a.Events.CONFIG,d=new RegExp(/^\s+$/),e=new RegExp(/^undefined/i),f=new RegExp(/^null/i),g=null,h=a.Object.replaceWith,i=function(a){return""===a||d.test(a)||e.test(a)||f.test(a)};return{NAME:"DataJanitor",onRegister:function(){c.add(this.onConfig,this)},onRemove:function(){c.remove(this.onConfig),c.dispatch(g)},onConfig:function(c){var d=b.DEFAULT_VALUES;for(var e in d)if(d.hasOwnProperty(e)&&c.hasOwnProperty(e)){var f=d[e],j=new RegExp("^"+f.matchOn,"i");j.test(c[e])&&(c[e]=f.value)}g=h(c,b.UNDEFINED_VALUES,i),a.Bento.removeSubscriber(this)}}}}(BTG),function(a){a.Demdex=function(){var b="Demdex",c=a.Log.getLogger(b),d=a.Log.isDebug,e=/^((prop\d{1,2}|evar\d{1,2}|products|events|pagename|hier\d{1,2}))$/gi,f=a.AppMeasureVars,g={},h=a.MessageUtil.postMessage,i=a.MessageVars.DEMDEX;return{NAME:b,eventList:function(){return{CONFIG:this.onConfig,OMT_START:this.onOmtStart,OMT_END:this.onOmtEnd}},onConfig:function(a){g=a},onOmtStart:function(a){if(g.demdexEnabled){d()&&c.debug("onOmtStart",a);var b=[];for(var f in a)f&&a.hasOwnProperty(f)&&-1!==f.toString().search(e)&&a[f]&&b.push(f+"="+a[f]);h(i,b)}},onOmtEnd:function(a){if(g.demdexEnabled&&g.demdexEndCallEnabled){d()&&c.debug("onOmtEnd",a);var b=[],j=f.MEDIA_NAME+f.MEDIA_SEGMENTEVAR+f.MEDIA_SEGMENTEVAR_DEMDEX;for(var k in a)k&&a.hasOwnProperty(k)&&-1!==k.toString().search(e)&&a[k]&&-1!==j.toLowerCase().indexOf(k.toLowerCase())&&b.push(k+"="+a[k]);h(i,b)}}}}}(BTG),function(a){a.Freewheel=function(){var b,c="Freewheel",d=a.Log.getLogger("Freewheel"),e=a.Log.isDebug,f=a.Events,g=(a.MessageVars,!1),h=!1,i=!1,j=!1,k=a.FreewheelVars,l={},m={},n=tv.freewheel.SDK,o=n.TIME_POSITION_CLASS_PREROLL,p=n.TIME_POSITION_CLASS_MIDROLL,q=n.TIME_POSITION_CLASS_POSTROLL,r=n.TIME_POSITION_CLASS_DISPLAY,s=n.TIME_POSITION_CLASS_OVERLAY,t=[],u=[],v=[],w=[],x=!1,y=!1,z=0,A=0,B=0,C=!1,D=!1,E=!1,F="",G=k.FW_URL,H=k.FW_INTL_DEFAULT_ASSET_ID,I={overlayWidth:0,overlayHeight:0},J=0,K=!1,L=function(a,b){return a.getTimePosition()>b.getTimePosition()?1:a.getTimePosition()>b.getTimePosition()?0:-1},M=function(a,b){try{window.localStorage.setItem(a,b)}catch(c){e()&&d.debug("Storage error: "+c)}},N=function(a){try{return window.localStorage.getItem(a)}catch(b){e()&&d.debug("Retrieve error: "+b)}},O=function(){var a=N(k.FW_DEMDEX_FW_SEGMENT);return a?a.split(","):null},P=function(a){M(k.FW_VMN_UUID,a)},Q=function(a){M(k.FW_DEMDEX_FW_SEGMENT,a)},R=function(a,c){var g=!1,a=a||0,c="true"==c||1==c;if(A=a,e()&&d.debug("isAdAvailable() currentItem: "+a+"  isContentEnd:"+c+" midRolls.length: "+u.length+"   midRolls.length > 0 && !isContentEnd:"+(u.length>0&&!c)),S())if(0!=a||c){if(a+1==z&&c)v.length>0&&(e()&&d.debug("isAdAvailable() isPostRollAvailable"),b=v[0],v.shift(),g=!0);else if(y&&u.length>0&&!c){e()&&d.debug("isAdAvailable() isMidroll available?");var h=X();e()&&d.debug("isAdAvailable() mRoll:"+h),h&&(e()&&d.debug("isAdAvailable() MidRoll is available "),b=h,g=!0)}}else e()&&d.debug("isAdAvailable() preRolls.length: "+t.length),t.length>0&&(e()&&d.debug("isAdAvailable() preRoll is available "),b=t[0],t.shift(),g=!0);return e()&&d.debug("isAdAvailable() hasAd:"+g),g&&f.FW_SLOTS_READY.dispatch(),g},S=function(){var a=N(k.FW_VIDEO_PLAYED_TIME);return a=1e3*(null!==a?parseInt(a,10):a),e()&&d.debug("isItTimeForAnAd() playHeadTime:"+a+"  constants.FW_MINTIME_BTW_ADS: "+l.freewheelTimeSinceLastAd+"   isFWReady: "+g),l.freewheelTimeSinceLastAd<=0||null===a||0===a||isNaN(a)||a>l.freewheelTimeSinceLastAd?!0:!1},T=function(b){z=b.playlistMetadataItems.length,y=b.isFullEpisode,F=l.group,j="intl"===F,_(),l.freewheelDisplayBase||(l.freewheelDisplayBase="playerView"),l.freewheelTimeSinceLastAd||0==l.freewheelTimeSinceLastAd||(l.freewheelTimeSinceLastAd=k.FW_DEF_MIN_TIME_FOR_ADS),e()&&d.debug("loadConfig:  totalItem="+z+"  isFullEpisode="+y+"   mData.playlistURI="+b.playlistURI),l.freewheelAssetId||(l.freewheelAssetId=y?b.playlistURI:b.guid),l.freewheelSiteSection||(l.freewheelSiteSection=k.FW_DEF_SITE_SECTION),"undefined"!=typeof l.freewheelAppendSIDSuffix&&l.freewheelAppendSIDSuffix&&(a.Environment.isMobile()?l.freewheelSiteSection+=k.FW_MOB_SID_SUFFIX:a.Environment.isTablet()&&(l.freewheelSiteSection+=k.FW_TAB_SID_SUFFIX))},U=function(a){h=!1,g=!1,l.freewheelAssetId=m.playlistMetadataItems[a].rss.guid},V=function(){e()&&d.debug("playAd: slotToBePlayed: "+b),b&&b.play()},W=function(){w.length>0&&(w[0].play(),E=!0)},X=function(){var a=null,b=u.length;if(e()&&d.debug("getMidroll: "+u.length),b>0)for(var c=0;b>c;c++)if(A>c&&u[c]){a=u[c],u[c]=!1;break}return a},Y=function(a){if(K){var b=document.getElementById("sauron_stage");b&&(b="undefined"!=typeof b.length?b[0]:b,b.style.display=a?"none":"block")}},Z=function(b,f){var g=a.Bento.retrieveSubscriber(c),h=a.Events,i=null,j={adId:0,duration:-1,adType:null,isClickable:!1,creativeDuration:-1,creativeId:0,podId:"",isVpaid:!1};if("object"==typeof b){if(e()&&d.debug("setAdMetadata: AdInstance available: "+b),i=b.getSlot(),j.adId=b.getAdId(),j.podId=i.getCustomId(),j.creativeId=b._creativeId,j.duration=g.adInstanceCount>1?-1:b.getActiveCreativeRendition().getDuration(),j.adType=i.getTimePositionClass(),j.isClickable=f,j.adCount=g.adInstanceCount,j.currentAdIndex=J++,j.creativeDuration=j.duration,j.isVpaid=K=b.getActiveCreativeRendition().getCreativeApi()===k.FW_VPAID_AD,j.adType===r||j.adType===s)return;
C=!0,Y(),g.currentAdInstance=b,e()&&d.debug("setAdMetadata: adMData details. adId: "+j.adId+";  adType: "+j.adType+"; isClickable:"+j.isClickable+";  duration:"+j.duration+"; adCount:"+j.adCount+"; currentAdIndex:"+j.currentAdIndex+"; adMData.isVpaid:"+j.isVpaid),h.FW_AD_METADATA.dispatch(j),D||(D=!0,h.FW_AD_PLAY.dispatch())}else e()&&d.debug("setAdMetadata: AdInstance not available"),j.duration=g.adInstanceCount>1||!g.currentAdInstance?-1:g.currentAdInstance.getActiveCreativeRendition().getDuration(),h.FW_AD_METADATA.dispatch(j)},$=function(a){var b=a.adInstance.getSlot().getTimePositionClass();return b===r||b===s},_=function(){j?(G=l.freewheelNetworkId==k.FW_NETWORK_ID_INTL_TEST?k.FW_URL_INT_TEST:k.FW_URL_INT,l.freewheelNetworkId=l.freewheelNetworkId?l.freewheelNetworkId:k.FW_NETWORK_ID_INTL,l.freewheelProfileId=l.freewheelProfileId?l.freewheelProfileId:l.freewheelNetworkId+":"+k.FW_PROFILE_ID,l.freewheelDuration=0):(l.freewheelNetworkId=l.freewheelNetworkId?l.freewheelNetworkId:k.FW_NETWORK_ID,l.freewheelProfileId=l.freewheelProfileId?l.freewheelProfileId:l.freewheelNetworkId+":"+k.FW_PROFILE_ID,l.freewheelDuration=y?k.FW_DEF_CLIP_TIME*z:k.FW_DEF_CLIP_TIME,H=0),l.freewheelUseActualDuration&&(l.freewheelDuration=y?ab(m.playlistDuration)?m.playlistDuration:k.FW_DEF_CLIP_TIME*z:ab(m.duration)?m.duration:k.FW_DEF_CLIP_TIME)},ab=function(a){return!isNaN(a)&&a>0},bb=[],cb=function(){for(var a=m.playlistMetadataItems,b=0,c=a.length;c>b;b++){var d=a[b].duration;bb[b]=ab(d)?d:k.FW_DEF_CLIP_TIME}},db=null,eb=null,fb=null,gb=0,hb=0,ib=0,jb=function(){db=document.getElementById("_fw_ad_container_html_"+ib+"_"),eb=db?db.getElementsByTagName("iframe")[0]:null,fb=document.getElementById("bigPlayPause"),db&&gb&&(db.style.height=eb.style.height,db.style.width=eb.style.width,eb.style.top="0px",eb.style.left="0px",db.style.left=(hb-eb.offsetWidth)/2+"px",db.style.top=gb-eb.offsetHeight+"px",setTimeout(function(){fb&&(fb.style.visibility="hidden",fb.style.display="")},50),setTimeout(function(){fb&&(fb.style.visibility="visible",fb.style.display="none")},55))};return{NAME:c,currentAdInstance:null,adInstanceCount:1,eventList:function(){return{CONFIG:this.onConfig,METADATA:this.onMetadata,MEDIASTART:this.onMediaStart,PLAY:this.onPlay,RESUMEPLAY:this.onResumePlay,PAUSE:this.onPause,PLAYHEADUPDATE:this.onPlayheadUpdate,FW_TIME_FOR_AD:this.isItTimeForAnAd,PLAY_INDEX_CHANGED:this.onPlayIndexChanged,VMN_UUID:this.onVmnUUID,DEMDEX_SEGMENT:this.onDemdexSegment,FW_AD_CLICK:this.onAdClick,FW_AD_RESIZE:this.resizeAd,PLAYLIST_ENDED:this.onPlaylistEnded,OVERLAY_RESIZE:this.onOverlayResize}},onConfig:function(a){l=a},onMetadata:function(a){m=a,y=m.isFullEpisode,T(m),!x&&l.freewheelEnabled&&1!=a.isAd&&this.initFreewheel()},onMediaStart:function(){m.guid&&M(k.FW_LAST_GUID_PLAYED,m.guid),m.playlistURI&&M(k.FW_LAST_PLAYLIST_URI_PLAYED,m.playlistURI)},onPlay:function(a){e()&&d.debug("onPlay",a),C&&Y()},onResumePlay:function(a){e()&&d.debug("onResumePlay",a),C&&Y()},onPause:function(a){e()&&d.debug("onPause",a),C&&Y(!0)},onPlayIndexChanged:function(a){e()&&d.debug("onPlayIndexChanged index: "+a+"   isFullEpisode:"+y),A=a,y||(isPlayIndexAdTime=!0,U(a),this.initFreewheel())},onPlayheadUpdate:function(){if(!C){var a,b=new Date,c=0,f=Math.round(b.getTime()/1e3)-N(k.FW_LAST_PLAYTIME_CODE);if(1===f&&(B++,a=parseInt(N(k.FW_VIDEO_PLAYED_TIME))+1,M(k.FW_VIDEO_PLAYED_TIME,a)),M(k.FW_LAST_PLAYTIME_CODE,Math.round(b.getTime()/1e3)),w.length>0&&!E){if(l.freewheelUseActualDuration){var g=0;for(bb.length;A>g;g++)c+=bb[g]}else c=A*k.FW_DEF_CLIP_TIME;c+=Math.floor(B),c>=w[0].getTimePosition()&&(e()&&d.debug("onPlayheadUpdate playedTime="+B+"  overlays[0].getTimePosition()="+w[0].getTimePosition()+"  actualPlayHeadTime:"+c),W())}}},onDemdexSegment:function(a){Q(a)},onVmnUUID:function(a){P(a)},onPlaylistEnded:function(){x=!1},initFreewheel:function(){e()&&d.debug("initFreewheel"),x=!0;var b=O(),c=this,f=0,g=G.replace(/\{0\}/g,l.freewheelNetworkId).replace(/\{1\}/g,l.freewheelProfileId),i=document.createElement("div");i.setAttribute("width",1),i.setAttribute("height",1),i.setAttribute("id","fwAdClickDiv"),document.body.appendChild(i),B=0;var j=N(k.FW_VIDEO_PLAYED_TIME);null===j&&M(k.FW_VIDEO_PLAYED_TIME,0);try{var o=new n.AdManager;if(o.setNetwork(l.freewheelNetworkId),o.setServer(g),theContext=o.newContext(),theContext.registerVideoDisplayBase(l.freewheelDisplayBase),theContext.setProfile(l.freewheelProfileId),l.freewheelSiteSectionPathParsing&&(l.freewheelSiteSection=a.String.trimSlashes(l.freewheelSiteSection),theContext.addKeyValue(k.FW_FSS_KEY,k.FW_FSS_VALUE)),theContext.setSiteSection(l.freewheelSiteSection,l.freewheelNetworkId),H?theContext.setVideoAsset(l.freewheelAssetId,parseInt(l.freewheelDuration,10),l.freewheelNetworkId,null,null,null,null,k.FW_INTL_DEFAULT_ASSET_ID):theContext.setVideoAsset(l.freewheelAssetId,parseInt(l.freewheelDuration,10),l.freewheelNetworkId),theContext.setParameter(n.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,n.PARAMETER_LEVEL_GLOBAL),theContext.setParameter(n.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT,"fwAdClickDiv",n.PARAMETER_LEVEL_GLOBAL),theContext.setParameter(n.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT,!0,n.PARAMETER_LEVEL_GLOBAL),theContext.setParameter(n.PARAMETER_DISABLE_SAFARI_TRANSPORT,!0,n.PARAMETER_LEVEL_GLOBAL),theContext.setParameter(n.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION,!1,n.PARAMETER_LEVEL_GLOBAL),theContext.addEventListener(n.EVENT_REQUEST_COMPLETE,function(a){c.onRequestComplete(a)}),theContext.addEventListener(n.EVENT_SLOT_ENDED,function(a){c.onSlotEnded(a)}),theContext.addEventListener(n.EVENT_SLOT_STARTED,function(a){c.onSlotStarted(a)}),theContext.addEventListener(n.EVENT_AD_IMPRESSION,function(a){c.onAdInstancePlayEvent(a)}),theContext.addEventListener(n.EVENT_AD_IMPRESSION_END,function(a){c.onAdInstancePlayEvent(a)}),b&&b.length){for(var p=0,q=b.length;q>p;p++){var r=b[p].split("=");r[0]&&r[1]&&theContext.addKeyValue(r[0],r[1])}var s=N(k.FW_VMN_UUID);s&&theContext.addKeyValue("customVisitorId",s)}if(m.hasPlayList&&theContext.addKeyValue(k.FW_PLAYLIST_KEY,m.playlistId),y){cb();for(var p=1;z>p;p++)l.freewheelUseActualDuration?f+=bb[p]:f=p*k.FW_DEF_CLIP_TIME,theContext.addTemporalSlot("Midroll_"+p,n.ADUNIT_MIDROLL,f)}if("kids"===F)if(y){var t=N(k.FW_LAST_PLAYLIST_URI_PLAYED);t&&"undefined"!=t&&theContext.addKeyValue(k.FW_ARA_KEY,t)}else{var u=N(k.FW_LAST_GUID_PLAYED);u&&"undefined"!=u&&theContext.addKeyValue(k.FW_ARA_KEY,u)}m.bandwidth&&e()&&d.debug("metadata.bandwidth: "+m.bandwidth),theContext.setParameter(n.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,n.PARAMETER_LEVEL_GLOBAL),n.setLogLevel(n.LOG_LEVEL_DEBUG),theContext.submitRequest(6),h=!0}catch(v){e()&&d.debug("init() e:"+v)}},onRequestComplete:function(a){e()&&d.debug("onRequestComplete: ");var b,c,j,k;if(a.success){try{b=theContext.getTemporalSlots()}catch(l){return e()&&d.debug("Error happened in getting TemporalSlots theContext.getTemporalSlots(). Details: "+l),void(h=!1)}for(f.FW_READY.dispatch(),j=0,k=b.length;k>j;j++)switch(c=b[j],c.getTimePositionClass()){case o:t.push(c);break;case p:u.push(c);break;case s:w.push(c);break;case q:v.push(c)}e()&&d.debug("Midroll count: "+u.length),u.length&&u.sort(L),w.length&&w.sort(L),e()&&d.debug("onRequestComplete fwTemporalSlots.length="+b.length+"; preRolls.length="+t.length+"; midRolls.length="+u.length+"; postRolls.length="+v.length+"; overLays.length="+w.length),g=!0,h=!1,i&&(e()&&d.debug("onRequestComplete this.playAd()"),R()?(e()&&d.debug("Playing Ad now..."),V()):(e()&&d.debug("No Ad available...Moving to content"),f.FW_AD_PLAYEND.dispatch()))}else e()&&d.debug("event failure."),h=!1,f.FW_AD_PLAYEND.dispatch()},onSlotStarted:function(a){var b=a.slot.getTimePositionClass(),c=a.slot.getAdInstances();if(J=k.FW_INIT_AD_INDEX,ib=a.slot.getCustomId(),b===s){setTimeout(jb,300);for(var g=0,h=c.length;h>g;g++){var i=c[g];i.getSlot().getCustomId()===ib&&(I.overlayWidth=i.getActiveCreativeRendition().getWidth(),I.overlayHeight=i.getActiveCreativeRendition().getHeight(),f.FW_AD_OVERLAY_START.dispatch(I))}}else b!==r&&(e()&&d.debug("onSlotStarted: adInstances.length= "+c.length),this.adInstanceCount=c.length,this.currentAdInstance=c.length>0?c[0]:null,Z())},onSlotEnded:function(a){var c=a.slot.getTimePositionClass();return c===r||c===s?void(c===s&&(f.FW_AD_OVERLAY_END.dispatch(I),w.shift(),eb=null,db=null,fb=null,gb=0,ib=0,E=!1)):(e()&&d.debug("onSlotEnded"),M(k.FW_VIDEO_PLAYED_TIME,"1"),b=null,C=!1,D=!1,void f.FW_AD_PLAYEND.dispatch())},isItTimeForAnAd:function(a){return e()&&d.debug("isItTimeForAnAd: freewheelVO.currentItem="+a.currentItem+"  freewheelVO.hasContentEnd="+a.hasContentEnd),l.freewheelEnabled?void(g?(e()&&d.debug("Checking for Ad now..."),R(a.currentItem,a.hasContentEnd)?(e()&&d.debug("Playing Ad now..."),V()):f.FW_AD_PLAYEND.dispatch()):i=!0):(f.FW_AD_PLAYEND.dispatch(),!1)},resizeAd:function(a){e()&&d.debug("freewheelVO.x= "+a.x+" freewheelVO.y="+a+" freewheelVO.width="+a.width+" freewheelVO.height="+a.height)},onAdClick:function(){e()&&d.debug("onAdClick: currentAdInstance="+this.currentAdInstance),this.currentAdInstance&&this.currentAdInstance.getRendererController().processEvent({name:n.EVENT_AD_CLICK})},onAdInstancePlayEvent:function(a){switch(a.type){case n.EVENT_AD_IMPRESSION:if(e()&&d.debug("onAdInstancePlayEvent: EVENT_AD_IMPRESSION"),$(a))return;a.adInstance.getEventCallbackUrls(n.EVENT_AD_CLICK,n.EVENT_TYPE_CLICK).length>0?(e()&&d.debug("onAdInstancePlayEvent: EVENT_AD_IMPRESSION. Clickable Ad."),Z(a.adInstance,!0),f.FW_AD_CREATIVE_PLAY.dispatch()):(e()&&d.debug("onAdInstancePlayEvent: EVENT_AD_IMPRESSION. Non Clickable Ad."),Z(a.adInstance,!1),f.FW_AD_CREATIVE_PLAY.dispatch());break;case n.EVENT_AD_IMPRESSION_END:if($(a))return;e()&&d.debug("onAdInstancePlayEvent: EVENT_AD_IMPRESSION_END."),K=!1,f.FW_AD_CREATIVE_PLAYEND.dispatch(),this.currentAdInstance=null}},onOverlayResize:function(a){gb=a.height,hb=a.width,gb&&isNaN(gb)&&(gb=gb.replace(/px$/gi,""),gb=isNaN(gb)?null:gb),hb&&isNaN(hb)&&(hb=hb.replace(/px$/gi,""),hb=isNaN(hb)?null:hb),gb&&hb&&setTimeout(jb,300)}}}}(BTG),function(a){a.Nielsen=function(){var b="Nielsen",c=a.NielsenVars,d=a.Log.getLogger(b),e=a.Log.isDebug,f=null,g=null,h=0,i=0,j=0,k=!1,l=!1,m=!1,n=!1,o={},p={},q={},r={},s={},t=function(a){k&&(a.id=a.title),a.isAd=k,q[a.id]=a,p=a},u=function(){q={}},v=function(){return!q[o.id]||p.isAd?!0:!1},w=function(a){n&&(m&&(a=i),l=!1,m=!1,s.ggPM(c.STOP,Math.floor(a)))},x=function(){e()&&d.debug("trackOnPlay playhead:"+h+" isAd:"+k),l&&w(h),v()&&(e()&&d.debug("trackOnPlay",o),s.ggPM(c.LOAD,o.id,o.vidtype,o.xml,j),s.ggPM(c.PLAY,h),l=!0,n=!0,t(o))},y=function(){var a=g,b={};if(k){e()&&d.debug("getMediaVO says this item is an ad.");var f=r,h=f.adId?f.adId:c.VIDEOAD_TITLE;b={id:h,uurl:h,category:h,length:Math.floor(f.duration),vidtype:j>0?c.MIDROLL_VIDEO:c.PREROLL_VIDEO}}else b={id:a.videoId,vidtype:c.CONTENT_VIDEO,itemIndex:j,censuscategory:a.franchise},a.hasPlayList?(b.uurl=a.playlistTitle,b.category=a.franchise):(b.uurl=a.title,b.category=c.CLIP_TITLE),b.length=Math.floor(a.duration);b.uurl&&(b.uurl=b.uurl.replace(/\s/g,"")),b.title=b.uurl,b.xml="";for(var i in b)b.hasOwnProperty(i)&&b[i]&&"itemIndex"!=i&&"videoId"!=i&&(b.xml+="<"+i+">"+b[i]+"</"+i+">");return e()&&d.debug("Nielsen.getMediaVO",b),b};return{NAME:b,eventList:function(){return{CONFIG:this.onConfig,METADATA:this.onMetadata,MEDIASTART:this.onMediaStart,PLAY:this.onPlay,FW_AD_PLAY:this.onAdPlay,RESUMEPLAY:this.onResumePlay,PAUSE:this.onPause,SEEKING:this.onSeeking,PLAYEND:this.onPlayEnd,PLAYLIST_ENDED:this.onPlaylistEnded,PLAYHEADUPDATE:this.onPlayheadUpdate,FW_AD_METADATA:this.onFWAdMetadata}},onConfig:function(b){f=b,s=new a.gg;var d={clientid:f.nielsenClientID,vcid:f.nielsenVideoCensusID,prod:c.CLIENT_PROD,sfcode:"us"};s.ggInitialize(d,0,!1)},onMetadata:function(a){g=a},onMediaStart:function(){e()&&d.debug("onMediaStart"),n=!1},onPlay:function(){e()&&d.debug("onPlay"),g.reportable&&!g.isAd&&(k=g.isAd=!1,j=g.itemIndex,o=y(),x())},onAdPlay:function(){k=g.isAd=!0,j=g.itemIndex,o=y(),x()},onPause:function(a){n&&s.ggPM(c.PAUSE,a)},onSeeking:function(a){n&&(m=!0,i=a)},onResumePlay:function(a){n&&(m?(m=!1,s.ggPM(c.SEEK,i,a.playhead)):s.ggPM(c.PLAY,a.playhead))},onPlaylistEnded:function(){u()},onPlayEnd:function(a){n&&(w(a),n=!1)},onPlayheadUpdate:function(a){a=a},onFWAdMetadata:function(a){e()&&d.debug("onFWAdMetadata adId: "+a.adId),r=a}}}}(BTG),function(a){a.PostMessage=function(){var b=a.MessageUtil.postMessage,c=a.MessageVars;return{NAME:"PostMessage",onRegister:function(){b(c.VMN_UUID),b(c.DEMDEX_SEGMENT),b(c.OMT_TRACKING_SERVER),b(c.USER_SEGMENT)}}}}(BTG),function(a){a.Registrar=function(){try{a.JSInjector.loadScript(a.AriaVars.BENTO_MODULES_URL)}catch(b){}return{NAME:"Registrar",eventList:function(){return{CONFIG:this.onConfig}},onConfig:function(b){var c=a.Bento.registerSubscriber;c(new a.Freewheel),c(new a.Beacons),b.omnitureEnabled&&b.omnitureSuite&&c(new a.AppMeasure),b.nielsenEnabled&&c(new a.Nielsen),b.comScoreEnabled&&(c(new a.Comscore),c(new a.StreamSense)),b.demdexEnabled&&c(new a.Demdex),c(new a.PostMessage),c(new a.DataJanitor);var d=a.Events.CONFIG;d.remove(this.onConfig),d.dispatch(b),this.onConfig=function(){}}}}}(BTG),function(a){a.StreamSense=function(){var b="StreamSense",c=a.Log.getLogger(b),d=a.Log.isDebug,e=a.StreamSenseVars,f={},g={},h={},i=0,j=0,k="",l=!0,m={},n=0,o={},p={},q=function(){},r=a.StreamSenseVO.fromMetadata,s=!1,t=!1,u=!1,v=1,w=function(){return Math.floor(1e3*i)},x=!1,y=!1,z=function(){y="object"==typeof ns_&&"function"==typeof ns_.StreamSense,!x&&y&&(o=new ns_.StreamSense({},e.BASE_URL+"?"+a.Object.toString({C1:e.TYPEID,C2:f.comScorePrimaryID})),p=ns_.StreamSense.PlayerEvents,q=function(a,b){o.notify(a,{},n=b?b:w())},x=!0)};return{NAME:b,eventList:function(){return{CONFIG:this.onConfig,METADATA:this.onMetadata,PLAY:this.onPlay,RESUMEPLAY:this.onResumePlay,PAUSE:this.onPause,SEEKING:this.onSeeking,BUFFERING:this.onBuffering,PLAYEND:this.onPlayEnd,PLAYHEADUPDATE:this.onPlayheadUpdate,PLAYLIST_ENDED:this.onPlaylistEnded,FW_AD_METADATA:this.onFWAdMetadata,FW_AD_CREATIVE_PLAY:this.onAdPlayStart,FW_AD_CREATIVE_PLAYEND:this.onAdPlayEnd,FW_AD_PLAYEND:this.onAdSlotPlayEnd}},onConfig:function(a){f=a,s=f.comScoreAdTracking||f.comscoreAdTracking},onMetadata:function(a){g=a},onPlay:function(){return!g.reportable||g.isAd?void(d()&&c.debug("onPlay reportable is false or isAd is true")):void(t||(d()&&c.debug("onPlay"),j=g.itemIndex,z(),g.clipTypeId=g.isLive?e.CLIP_LIVE:g.itemDuration>=e.MAX_DURATION?e.CLIP_LONG:e.CLIP_SHORT,g.hasPlayList&&l&&o.setPlaylist(),m.hasOwnProperty(g.videoId)?g.partIndex=m[g.videoId]:(g.partIndex=v++,m[g.videoId]=g.partIndex),o.setClip(r(g)),setTimeout(function(){q(p.PLAY)},250),t=!0,l=!1,k=g.videoTitle))},onResumePlay:function(){d()&&c.debug("onResumePlay"),q(p.PLAY)},onPause:function(a){(t||u)&&0!==a&&q(p.PAUSE)},onSeeking:function(){t&&q(p.PAUSE)},onBuffering:function(){(t||u)&&q(p.BUFFER)},onPlayEnd:function(){d()&&c.debug("onPlayEnd"),q(p.END),t=!1},onPlayheadUpdate:function(a){i=a},onPlaylistEnded:function(){l=!0},onFWAdPlayhead:function(a){adPlayhead=a},onFWAdMetadata:function(a){h=a},onAdPlayStart:function(){if(d()&&c.debug("onAdPlayStart ad starts to play"),s){if(z(),i=0,g.adDuration=h.duration,g.adId=h.adId,g.isAd=!0,g.isLiveEvent)g.clipTypeId=e.AD_LIVE;else{var a="AD_"+h.adType.toUpperCase();g.clipTypeId=e[a]?e[a]:e.AD_OTHER}g.partIndex=v,q(p.END,n),o.setClip(r(g)),q(p.PLAY),u=!0,v++}},onAdPlayEnd:function(){d()&&c.debug("onAdPlayEnd ad play ends"),s&&q(p.END)},onAdSlotPlayEnd:function(){u&&(t=!1),u=!1}}}}(BTG),function(a){a.Events={CONFIG:new a.Event,MEDIASTART:new a.Event,METADATA:new a.Event,PLAY:new a.Event,PLAYHEADUPDATE:new a.Event,PAUSE:new a.Event,SEEKING:new a.Event,BUFFERING:new a.Event,RESUMEPLAY:new a.Event,PLAYEND:new a.Event,PLAY_INDEX_CHANGED:new a.Event,FULLSCREEN:new a.Event,PLAYLIST_ENDED:new a.Event,FW_TIME_FOR_AD:new a.Event,FW_READY:new a.Event,FW_SLOTS_READY:new a.Event,FW_AD_PLAY:new a.Event,FW_AD_PLAYEND:new a.Event,FW_AD_CREATIVE_PLAY:new a.Event,FW_AD_CREATIVE_PLAYEND:new a.Event,FW_AD_METADATA:new a.Event,FW_AD_VOLUME:new a.Event,FW_AD_UNPAUSE:new a.Event,FW_AD_PAUSE:new a.Event,FW_AD_CLICK:new a.Event,FW_AD_PLAYHEAD:new a.Event,FW_AD_OVERLAY_START:new a.Event,FW_AD_OVERLAY_END:new a.Event,FW_AD_RESIZE:new a.Event,OMT_START:new a.Event,OMT_END:new a.Event,VMN_UUID:new a.Event,DEMDEX_SEGMENT:new a.Event,USER_SEGMENT:new a.Event,OVERLAY_RESIZE:new a.Event,OMT_TRACKING_SERVER:new a.Event,OMT_VISITOR_ID:new a.Event}}(BTG),function(a){a.Bento=function(){var b="Bento",c=a.Events,d=a.Log.getLogger(b),e=a.Log.isDebug,f={},g=!1,h=!1;return{registerSubscriber:function(a){if("string"==typeof a.NAME&&!f[a.NAME]){if(e()&&d.debug("registerSubscriber "+a.NAME),"function"==typeof a.eventList){var b=a.eventList();if("object"==typeof b)for(var g in b)b.hasOwnProperty(g)&&"object"==typeof c[g]&&c[g].add(b[g],a)}"function"==typeof a.onRegister&&a.onRegister(),f[a.NAME]=a}},removeSubscriber:function(a){"string"==typeof a.NAME&&f[a.NAME]&&(e()&&d.debug("removeSubscriber "+a.NAME),delete f[a.NAME],"function"==typeof a.onRemove&&a.onRemove())},retrieveSubscriber:function(a){return f[a]},bufferingTimer:a.TimerUtil.getTimer(b),onConfig:function(a){"object"==typeof a&&(e()&&d.debug("onConfig",a),c.CONFIG.dispatch(a))},onMetadata:function(a){"object"==typeof a&&(e()&&d.debug("onMetadata",a),c.METADATA.dispatch(a))},onMediaStart:function(){e()&&d.debug("onMediaStart"),c.MEDIASTART.dispatch()},onPlay:function(a){void 0!==typeof a&&(e()&&d.debug("onPlay"),g=!0,c.PLAY.dispatch(a))},onPlayheadUpdate:function(a){void 0!==typeof a&&g&&c.PLAYHEADUPDATE.dispatch(a)},onPause:function(a){void 0!==typeof a&&(e()&&d.debug("onPause playhead: "+a),c.PAUSE.dispatch(a))},onSeeking:function(a){void 0!==typeof a&&(e()&&d.debug("onSeeking playhead: "+a),c.SEEKING.dispatch(a))},onBuffering:function(a){void 0!==typeof a&&(this.bufferingTimer.running()&&(this.bufferingTimer.stop(),this.bufferingTimer.reset()),this.bufferingTimer.start(),h=!0,c.BUFFERING.dispatch(a))},onResumePlay:function(a){if(void 0!==typeof a&&g){e()&&d.debug("onResumePlay playhead: "+a);var b=0;h&&(h=!1,b=this.getBufferingTime()),c.RESUMEPLAY.dispatch({playhead:a,elapsed:b})}},onPlayEnd:function(a){void 0!==typeof a&&(e()&&d.debug("onPlayEnd playhead: "+a),c.PLAYEND.dispatch(a))},onFullScreen:function(){c.FULLSCREEN.dispatch()},resizeAd:function(a){"object"==typeof a&&c.FW_AD_RESIZE.dispatch(a)},getBufferingTime:function(){this.bufferingTimer.running()&&this.bufferingTimer.stop();var a=this.bufferingTimer.currentCount()/1e3;return this.bufferingTimer.reset(),a},onPlayListEnded:function(){c.PLAYLIST_ENDED.dispatch()},isItTimeForAnAd:function(a){"object"==typeof a&&c.FW_TIME_FOR_AD.dispatch(a)},onVolumeChange:function(a){void 0!==typeof a&&c.FW_AD_VOLUME.dispatch(a)},onPlayIndexChanged:function(a){e()&&d.debug("onPlayIndexChanged index: "+a),c.PLAY_INDEX_CHANGED.dispatch(a)},onAdClick:function(){c.FW_AD_CLICK.dispatch()},onOverlayResize:function(a){c.OVERLAY_RESIZE.dispatch(a)},initialize:function(){return e()&&d.debug("Bento Starts Up"),this.registerSubscriber(new a.Registrar),this}}}().initialize()}(BTG),function(a){a.version="1.10.1"}(BTG),function(a){a.version="1.10.1"}(BTG),Bento.prototype={logger:new Util.Logger("pjs-reporting"),bento:{},bentoConfig:{},bentoMetadata:{},hasPlayed:!1,isBuffering:!1,hasSeekStart:!1,hasPaused:!1,hasContentEnd:!1,playhead:0,initialize:function(a){if(this.logger.log("initialize Bento"),this.options=a,_.bindAll(this,"onReady","onMetadata","onMediaStart","onMediaEnd","onPlayheadUpdate","onStateChange"),this.bento=BTG.Bento,BTG.Log.enableLogging(),this.bentoConfig=_.extend(BTG.ConfigSettings(),this.DefaultConfig,this.options.config),this.bento.onConfig(this.bentoConfig),this.options.currentMetadata){this.logger.log("using currentMetadata");var b=_.extend(BTG.Metadata(),this.DefaultMetadata,this.options.currentMetadata);this.bento.onMetadata(b)}this.options.playhead&&(this.playhead=this.options.playhead),this.options.state&&this.onStateChange({data:this.options.state})},onReady:function(){this.logger.log("onReady")},onMediaStart:function(){this.logger.log("onMediaStart"),this.hasPlayed=!1},onMetadata:function(a){this.logger.log("onMetadata");var b=_.extend(BTG.Metadata(),this.DefaultMetadata,this.options.currentMetadata,a.data);this.bento.onMetadata(b)},onPlayheadUpdate:function(a){var b=this.playhead=a.data;this.bento.onPlayheadUpdate(b),(this.isBuffering||this.hasSeekStart)&&this.hasPlayed&&(this.isBuffering=!1,this.hasSeekStart=!1,this.bento.onResumePlay(b))},onStateChange:function(a){this.logger.log("onStateChange: ",a.data);var b=this.playhead,c=this.bento,d=a.data;switch(d){case"playing":this.hasPlayed?this.hasPaused&&(this.hasPaused=!1,c.onResumePlay(b)):(this.hasPlayed=!0,c.onMediaStart(),this.logger.log("about to call onPlay("+b+")"),c.onPlay(b))}if(this.hasPlayed)switch(d){case"paused":this.hasPaused=!0,c.onPause(b);break;case"seeking":this.hasSeekStart=!0,c.onSeeking(b);break;case"buffering":this.isBuffering=!0,c.onBuffering(b);break;case"stopped":this.hasPlayed=!1,c.onPlayEnd(b)}},onMediaEnd:function(){this.logger.log("onMediaEnd"),this.hasContentEnd=!0}},Bento.prototype.DefaultConfig={applicationContext:"media.mtvnservices.com",applicationName:"Network Player",applicationOrigin:null,applicationType:null,comscoreAdTracking:!0,comscoreEnabled:!1,countryCode:"COUNTRY_XX",customFields:{},demdexEnabled:!1,demdexEndCallEnabled:!1,freewheelEnabled:!1,group:null,nielsenEnabled:!1,omnitureAdTrackingEnabled:!1,omnitureCharSet:"ISO-8859-1",omnitureDataCenter:"112",omnitureEnabled:!0,omnitureEndslateTracking:!1,omnitureFirstPartyServer:"sc.mtv.com",omnitureHeartbeatsDisabled:!0,omnitureLiveEventBeaconFreq:180,omnitureLiveEventHeartbeatsDisabled:!1,omnitureLiveEventTrackingEnabled:!1,omnitureMediaTrackingEnabled:!0,omniturePathContext:"video/net/",omnitureSuite:"viamtv",omnitureVisitorNamespace:!1,playerURL:null,referrer:"media.mtvnservices.com"},Bento.prototype.DefaultMetadata={adDuration:0/0,adId:0,adUrl:"",adUrlRedirect:null,aggrementId:0,applicationContext:null,applicationName:null,applicationOrigin:null,artistId:null,artistName:"NO-ARTIST",bandwidth:2089,businessUnit:"mtv.com",clipType:null,clipTypeId:null,contentType:"Live Stream",description:"",duration:0,events:null,eventType:"NO-EVENT",franchise:"Hey Gurl",guid:"mgid:uma:video:mtv.com:1014920",hasPlayList:!1,isAd:!1,isFullEpisode:!1,isLiveEvent:!0,itemDuration:0/0,itemIndex:0,label:null,lineupId:null,location:null,mediaCategory:"Live Stream",mediaDescription:"",mediaTitle:null,mtvnOwner:"mtv.com",pageName:"http://www.mtv.com/videos/?id=1727079",partIndex:0,playerHeight:319,playerMode:"normal",playerSize:null,playerUrl:"http://media.mtvnservices.com/embed/mgid:uma:video:mtv.com:1014920/cp~id%3D1727079%26vid%3D1014920%26uri%3Dmgid%3Auma%3Avideolist%3Amtv.com%3A1727079",playerWidth:512,playlistDuration:0,playlistId:"mgid:uma:videolist:mtv.com:1727079",playlistLength:1,playlistTitle:"2014 Hangout Livestream",playlistType:"NO-CONTENTTYPE",precisionTestSegment:"defaultPrecisionTestSegment",previousItemGUID:"mgid:cms:video:thedailyshow.com:412604",previousItemPlaylistURI:null,products:null,reportable:!0,segmentName:null,showTitle:null,subBrand:null,thumbnailUrl:"http://mtv.mtvnimages.com/uri/mgid:uma:video:mtv.com:1014920?height=288&width=512",uriNamespace:"mgid:uma:video:mtv.com:1014920",userSegment:null,videoId:"1014920",videoTitle:"Best Of Hangout_1014920",videoUrl:"http://www.mtv.com/player/includes/mediaGen.jhtml?uri=mgid:uma:video:mtv.com:1014920&id=1727079&vid=1014920&ref=http://www.mtv-d.mtvi.com/music/hangout-festival/2014/index.jhtml&device={device}&viewUri=mgid:uma:video:mtv.com:1014920",vmnUUID:""},Bento.prototype.DefaultMetadata.playlistMetadataItems={adUrl:"",adUrlRedirect:null,affectCounters:!0,age:0,agreement:null,agreementId:0,albumLabel:null,albumName:null,align:null,allowAds:!0,artistId:null,artistName:"NO-ARTIST",artists:null,beacons:null,businessUnit:null,category:null,clickUrl:null,contentType:"Live Stream",description:"",duration:0,endTracker:null,eventType:"NO-EVENT",frameRate:0/0,franchise:"Hey Gurl",guid:"mgid:uma:video:mtv.com:1014920",header:null,height:0/0,id:null,image:null,isAd:!1,isBumper:!1,isDefault:!0,keyWords:"",link:"http://www.mtv.com/videos/misc/1014920/best-of-hangout.jhtml#id=1727079",location:null,medium:"video",mtvnOwner:null,playerUrl:"http://media.mtvnservices.com/embed/mgid:uma:video:mtv.com:1014920/cp~id%3D1727079%26vid%3D1014920%26uri%3Dmgid%3Auma%3Avideolist%3Amtv.com%3A1727079",playlistDuration:0/0,playlistLength:0/0,playlistLink:"http://www.mtv.com/videos/?id=1727079",playlistRepTitle:null,playlistTitle:"2014 Hangout Livestream",playlistType:"NO-CONTENTTYPE",playlistUri:"mgid:uma:videolist:mtv.com:1727079",pubDate:"Fri, 02 May 2014 00:00:00 EDT",rating:"nonadult",renditions:null,reportable:!0,scale:null,showTitle:null,startTracker:null,subBrand:null,thumbnailFeedVO:null,thumbnailUrl:"http://mtv.mtvnimages.com/uri/mgid:uma:video:mtv.com:1014920?height=288&width=512",title:"Best Of Hangout",type:"text/xml",url:"http://www.mtv.com/player/includes/mediaGen.jhtml?uri=mgid:uma:video:mtv.com:1014920&id=1727079&vid=1014920&ref=http://www.mtv-d.mtvi.com/music/hangout-festival/2014/index.jhtml&device={device}&viewUri=mgid:uma:video:mtv.com:1014920",videoId:null,videoTitle:"Best Of Hangout",width:0/0,xPercent:null,yPercent:null},Reporting.Bento=Bento,Reporting});
//# sourceMappingURL=mtvn.min.map